!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@aws-amplify/core"),require("lodash"),require("@aws-sdk/credential-provider-node"),require("@aws-sdk/region-provider"),require("@aws-sdk/hash-node"),require("@aws-sdk/node-http-handler"),require("@aws-sdk/url-parser-node"),require("@aws-sdk/util-body-length-node"),require("@aws-sdk/stream-collector-node"),require("@aws-sdk/util-utf8-node"),require("@aws-sdk/util-base64-node"),require("@aws-sdk/util-user-agent-node"),require("@aws-sdk/config-resolver"),require("@aws-sdk/middleware-content-length"),require("@aws-sdk/middleware-host-header"),require("@aws-sdk/middleware-retry"),require("@aws-sdk/middleware-signing"),require("@aws-sdk/middleware-user-agent"),require("@aws-sdk/smithy-client"),require("@aws-sdk/protocol-http"),require("@aws-sdk/middleware-serde"),require("uuid"),require("@aws-sdk/eventstream-serde-node"),require("@aws-sdk/eventstream-serde-config-resolver"),require("@aws-sdk/util-utf8-browser"),require("crypto-js/core"),require("crypto-js/lib-typedarrays"),require("crypto-js/sha256"),require("crypto-js/hmac-sha256"),require("crypto-js/enc-base64"),require("js-cookie"),require("@aws-sdk/hash-stream-node"),require("@aws-sdk/middleware-bucket-endpoint"),require("@aws-sdk/middleware-expect-continue"),require("@aws-sdk/middleware-sdk-s3"),require("@aws-sdk/xml-builder"),require("fast-xml-parser"),require("@aws-sdk/middleware-ssec"),require("@aws-sdk/middleware-location-constraint"),require("@aws-sdk/middleware-apply-body-checksum"),require("@aws-sdk/util-format-url"),require("@aws-sdk/util-create-request"),require("@aws-sdk/s3-request-presigner"),require("@aws-sdk/querystring-builder"),require("axios"),require("@aws-sdk/stream-collector-native"),require("zen-observable"),require("paho-mqtt"),require("@aws-amplify/ui")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@aws-amplify/core","lodash","@aws-sdk/credential-provider-node","@aws-sdk/region-provider","@aws-sdk/hash-node","@aws-sdk/node-http-handler","@aws-sdk/url-parser-node","@aws-sdk/util-body-length-node","@aws-sdk/stream-collector-node","@aws-sdk/util-utf8-node","@aws-sdk/util-base64-node","@aws-sdk/util-user-agent-node","@aws-sdk/config-resolver","@aws-sdk/middleware-content-length","@aws-sdk/middleware-host-header","@aws-sdk/middleware-retry","@aws-sdk/middleware-signing","@aws-sdk/middleware-user-agent","@aws-sdk/smithy-client","@aws-sdk/protocol-http","@aws-sdk/middleware-serde","uuid","@aws-sdk/eventstream-serde-node","@aws-sdk/eventstream-serde-config-resolver","@aws-sdk/util-utf8-browser","crypto-js/core","crypto-js/lib-typedarrays","crypto-js/sha256","crypto-js/hmac-sha256","crypto-js/enc-base64","js-cookie","@aws-sdk/hash-stream-node","@aws-sdk/middleware-bucket-endpoint","@aws-sdk/middleware-expect-continue","@aws-sdk/middleware-sdk-s3","@aws-sdk/xml-builder","fast-xml-parser","@aws-sdk/middleware-ssec","@aws-sdk/middleware-location-constraint","@aws-sdk/middleware-apply-body-checksum","@aws-sdk/util-format-url","@aws-sdk/util-create-request","@aws-sdk/s3-request-presigner","@aws-sdk/querystring-builder","axios","@aws-sdk/stream-collector-native","zen-observable","paho-mqtt","@aws-amplify/ui"],t):t((e=e||self)["aws-amplify-angular"]={},e.ng.core,e.ng.common,e.Amplify,e._,e.credentialProviderNode,e.regionProvider,e.hashNode,e.nodeHttpHandler,e.urlParserNode,e.utilBodyLengthNode,e.streamCollectorNode,e.utilUtf8Node,e.utilBase64Node,e.utilUserAgentNode,e.configResolver,e.middlewareContentLength,e.middlewareHostHeader,e.middlewareRetry,e.middlewareSigning,e.middlewareUserAgent,e.smithyClient,e.protocolHttp,e.middlewareSerde,e.uuid,e.eventstreamSerdeNode,e.eventstreamSerdeConfigResolver,e.utilUtf8Browser,e.CryptoJS,e.libTypedarrays,e.SHA256,e.HmacSHA256,e.Base64,e.Cookies,e.hashStreamNode,e.middlewareBucketEndpoint,e.middlewareExpectContinue,e.middlewareSdkS3,e.xmlBuilder,e.fastXmlParser,e.middlewareSsec,e.middlewareLocationConstraint,e.middlewareApplyBodyChecksum,e.utilFormatUrl,e.utilCreateRequest,e.s3RequestPresigner,e.querystringBuilder,e.axios,e.streamCollectorNative,e.zenObservable,e.Paho,e.AmplifyUI)}(this,function(e,h,t,x,b,n,r,o,i,s,a,u,c,l,p,d,f,m,g,y,v,w,_,S,C,E,I,A,P,k,O,T,N,U,R,M,D,F,L,j,B,V,q,z,H,K,G,W,$,Y,J,Z){"use strict";var Q="default"in x?x.default:x;P=P&&Object.prototype.hasOwnProperty.call(P,"default")?P.default:P,k=k&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k,O=O&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O,T=T&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T,N=N&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N,W=W&&Object.prototype.hasOwnProperty.call(W,"default")?W.default:W,Y=Y&&Object.prototype.hasOwnProperty.call(Y,"default")?Y.default:Y;var X=function(e,t){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ee(e,t){function n(){this.constructor=e}X(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var te=function(){return(te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ne(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(i<3?o(s):3<i?o(t,n,s):o(t,n))||s);return 3<i&&s&&Object.defineProperty(t,n,s),s}function re(n,r){return function(e,t){r(e,t,n)}}function oe(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function ie(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function se(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function ae(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ue(e){return"function"==typeof e}var ce=!1,le={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,ce=e},get useDeprecatedSynchronousErrorHandling(){return ce}};function pe(e){setTimeout(function(){throw e},0)}var de={closed:!0,next:function(e){},error:function(e){if(le.useDeprecatedSynchronousErrorHandling)throw e;pe(e)},complete:function(){}},he=Array.isArray||function(e){return e&&"number"==typeof e.length};function fe(e){return null!==e&&"object"==typeof e}var me,ge=(be.prototype=Object.create(Error.prototype),be),ye=(ve.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this._parentOrParents,n=this._unsubscribe,r=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof ve)t.remove(this);else if(null!==t)for(var o=0;o<t.length;++o)t[o].remove(this);if(ue(n))try{n.call(this)}catch(t){e=t instanceof ge?we(t.errors):[t]}if(he(r))for(var o=-1,i=r.length;++o<i;){var s=r[o];if(fe(s))try{s.unsubscribe()}catch(t){e=e||[],t instanceof ge?e=e.concat(we(t.errors)):e.push(t)}}if(e)throw new ge(e)}},ve.prototype.add=function(e){var t,n=e;if(!e)return ve.EMPTY;switch(typeof e){case"function":n=new ve(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof ve||(t=n,(n=new ve)._subscriptions=[t]);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof ve){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},ve.prototype.remove=function(e){var t,n=this._subscriptions;!n||-1!==(t=n.indexOf(e))&&n.splice(t,1)},ve.EMPTY=((me=new ve).closed=!0,me),ve);function ve(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}function be(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}function we(e){return e.reduce(function(e,t){return e.concat(t instanceof ge?t.errors:t)},[])}var _e,Se,Ce="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),Ee=(ee(Pe,Se=ye),Pe.prototype[Ce]=function(){return this},Pe.create=function(e,t,n){var r=new Pe(e,t,n);return r.syncErrorThrowable=!1,r},Pe.prototype.next=function(e){this.isStopped||this._next(e)},Pe.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},Pe.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Pe.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,Se.prototype.unsubscribe.call(this))},Pe.prototype._next=function(e){this.destination.next(e)},Pe.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},Pe.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},Pe.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},Pe),Ie=(ee(Ae,_e=Ee),Ae.prototype.next=function(e){var t;!this.isStopped&&this._next&&(t=this._parentSubscriber,le.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e))},Ae.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=le.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):pe(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;pe(e)}}},Ae.prototype.complete=function(){var e,t,n=this;this.isStopped||(e=this._parentSubscriber,this._complete&&(t=function(){return n._complete.call(n._context)},le.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,t):this.__tryOrUnsub(t)),this.unsubscribe())},Ae.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),le.useDeprecatedSynchronousErrorHandling)throw e;pe(e)}},Ae.prototype.__tryOrSetError=function(e,t,n){if(!le.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return le.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):(pe(t),!0)}return!1},Ae.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},Ae);function Ae(e,t,n,r){var o,i=_e.call(this)||this;i._parentSubscriber=e;var s=i;return ue(t)?o=t:t&&(o=t.next,n=t.error,r=t.complete,t!==de&&(ue((s=Object.create(t)).unsubscribe)&&i.add(s.unsubscribe.bind(s)),s.unsubscribe=i.unsubscribe.bind(i))),i._context=s,i._next=o,i._error=n,i._complete=r,i}function Pe(e,t,n){var r=Se.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=de;break;case 1:if(!e){r.destination=de;break}if("object"==typeof e){e instanceof Pe?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new Ie(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new Ie(r,e,t,n)}return r}var ke="function"==typeof Symbol&&Symbol.observable||"@@observable";var Oe=(Te.prototype.lift=function(e){var t=new Te;return t.source=this,t.operator=e,t},Te.prototype.subscribe=function(e,t,n){var r=this.operator,o=function(e,t,n){if(e){if(e instanceof Ee)return e;if(e[Ce])return e[Ce]()}return e||t||n?new Ee(e,t,n):new Ee(de)}(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||le.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),le.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},Te.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){le.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(e){for(;e;){var t=e.closed,n=e.destination,r=e.isStopped;if(t||r)return;e=n&&n instanceof Ee?n:null}return 1}(t)?t.error(e):console.warn(e)}},Te.prototype.forEach=function(r,e){var o=this;return new(e=xe(e))(function(e,t){var n=o.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},Te.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},Te.prototype[ke]=function(){return this},Te.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:(0===(t=e).length?function(e){return e}:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},Te.prototype.toPromise=function(e){var r=this;return new(e=xe(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},Te.create=function(e){return new Te(e)},Te);function Te(e){this._isScalar=!1,e&&(this._subscribe=e)}function xe(e){if(!(e=e||Promise))throw new Error("no Promise impl found");return e}var Ne,Ue,Re,Me,De=(Ke.prototype=Object.create(Error.prototype),Ke),Fe=(ee(He,Me=ye),He.prototype.unsubscribe=function(){var e,t,n;this.closed||(this.closed=!0,t=(e=this.subject).observers,this.subject=null,!t||0===t.length||e.isStopped||e.closed||-1!==(n=t.indexOf(this.subscriber))&&t.splice(n,1))},He),Le=(ee(ze,Re=Ee),ze),je=(ee(qe,Ue=Oe),qe.prototype[Ce]=function(){return new Le(this)},qe.prototype.lift=function(e){var t=new Be(this,this);return t.operator=e,t},qe.prototype.next=function(e){if(this.closed)throw new De;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].next(e)},qe.prototype.error=function(e){if(this.closed)throw new De;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].error(e);this.observers.length=0},qe.prototype.complete=function(){if(this.closed)throw new De;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},qe.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},qe.prototype._trySubscribe=function(e){if(this.closed)throw new De;return Ue.prototype._trySubscribe.call(this,e)},qe.prototype._subscribe=function(e){if(this.closed)throw new De;return this.hasError?(e.error(this.thrownError),ye.EMPTY):this.isStopped?(e.complete(),ye.EMPTY):(this.observers.push(e),new Fe(this,e))},qe.prototype.asObservable=function(){var e=new Oe;return e.source=this,e},qe.create=function(e,t){return new Be(e,t)},qe),Be=(ee(Ve,Ne=je),Ve.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},Ve.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},Ve.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},Ve.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):ye.EMPTY},Ve);function Ve(e,t){var n=Ne.call(this)||this;return n.destination=e,n.source=t,n}function qe(){var e=Ue.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}function ze(e){var t=Re.call(this,e)||this;return t.destination=e,t}function He(e,t){var n=Me.call(this)||this;return n.subject=e,n.subscriber=t,n.closed=!1,n}function Ke(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}function Ge(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new $e(t,n))}}var We,$e=(Ze.prototype.call=function(e,t){return t.subscribe(new Ye(e,this.project,this.thisArg))},Ze),Ye=(ee(Je,We=Ee),Je.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},Je);function Je(e,t,n){var r=We.call(this,e)||this;return r.project=t,r.count=0,r.thisArg=n||r,r}function Ze(e,t){this.project=e,this.thisArg=t}var Qe="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Xe=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function et(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var tt=function(e){if(e&&"function"==typeof e[ke])return i=e,function(e){var t=i[ke]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Xe(e))return o=e,function(e){for(var t=0,n=o.length;t<n&&!e.closed;t++)e.next(o[t]);e.complete()};if(et(e))return n=e,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,pe),t};if(e&&"function"==typeof e[Qe])return r=e,function(e){for(var t=r[Qe]();;){var n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e};var r,n,o,i,t=fe(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function nt(e,t){return t?function(e,t){if(null!=e){if(e&&"function"==typeof e[ke])return a=e,u=t,new Oe(function(t){var n=new ye;return n.add(u.schedule(function(){var e=a[ke]();n.add(e.subscribe({next:function(e){n.add(u.schedule(function(){return t.next(e)}))},error:function(e){n.add(u.schedule(function(){return t.error(e)}))},complete:function(){n.add(u.schedule(function(){return t.complete()}))}}))})),n});if(et(e))return i=e,s=t,new Oe(function(t){var n=new ye;return n.add(s.schedule(function(){return i.then(function(e){n.add(s.schedule(function(){t.next(e),n.add(s.schedule(function(){return t.complete()}))}))},function(e){n.add(s.schedule(function(){return t.error(e)}))})})),n});if(Xe(e))return r=e,o=t,new Oe(function(e){var t=new ye,n=0;return t.add(o.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t});if(e&&"function"==typeof e[Qe]||"string"==typeof e)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new Oe(function(r){var o,e=new ye;return e.add(function(){o&&"function"==typeof o.return&&o.return()}),e.add(n.schedule(function(){o=t[Qe](),e.add(n.schedule(function(){if(!r.closed){try{var e=o.next(),t=e.value,n=e.done}catch(e){return void r.error(e)}n?r.complete():(r.next(t),this.schedule())}}))})),e})}(e,t)}var r,o,i,s,a,u;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof Oe?e:new Oe(tt(e))}function rt(u,c){return new Oe(function(r){var o=u.length;if(0!==o)for(var i=new Array(o),s=0,a=0,e=0;e<o;e++)!function(t){var e=nt(u[t]),n=!1;r.add(e.subscribe({next:function(e){n||(n=!0,a++),i[t]=e},error:function(e){return r.error(e)},complete:function(){++s!==o&&n||(a===o&&r.next(c?c.reduce(function(e,t,n){return e[t]=i[n],e},{}):i),r.complete())}}))}(e);else r.complete()})}var ot=null,it=(Object.defineProperty(st.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),st);function st(){this.resourceLoaderType=null}var at,ut=(ee(ct,at=it),ct.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},ct.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},ct.prototype.supportsDOMEvents=function(){return!0},ct.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},ct.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},ct.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},ct.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},ct);function ct(){var t=at.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var e=["Webkit","Moz","O","ms"],r=0;r<e.length;r++)if(null!=t.getStyle(n,e[r]+"AnimationName")){t._animationPrefix="-"+e[r].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=o[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}var lt,pt={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},dt={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ht={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","Â":"NumLock"};h["Éµglobal"].Node&&(lt=h["Éµglobal"].Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var ft,mt=(ee(gt,ft=ut),gt.prototype.parse=function(e){throw new Error("parse not implemented")},gt.makeCurrent=function(){var e=new gt;ot=ot||e},gt.prototype.hasProperty=function(e,t){return t in e},gt.prototype.setProperty=function(e,t,n){e[t]=n},gt.prototype.getProperty=function(e,t){return e[t]},gt.prototype.invoke=function(e,t,n){e[t].apply(e,n)},gt.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},gt.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},gt.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},gt.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(gt.prototype,"attrToPropMap",{get:function(){return pt},enumerable:!0,configurable:!0}),gt.prototype.contains=function(e,t){return lt.call(e,t)},gt.prototype.querySelector=function(e,t){return e.querySelector(t)},gt.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},gt.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},gt.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},gt.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},gt.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},gt.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},gt.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},gt.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},gt.prototype.getInnerHTML=function(e){return e.innerHTML},gt.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},gt.prototype.getOuterHTML=function(e){return e.outerHTML},gt.prototype.nodeName=function(e){return e.nodeName},gt.prototype.nodeValue=function(e){return e.nodeValue},gt.prototype.type=function(e){return e.type},gt.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},gt.prototype.firstChild=function(e){return e.firstChild},gt.prototype.nextSibling=function(e){return e.nextSibling},gt.prototype.parentElement=function(e){return e.parentNode},gt.prototype.childNodes=function(e){return e.childNodes},gt.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},gt.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},gt.prototype.appendChild=function(e,t){e.appendChild(t)},gt.prototype.removeChild=function(e,t){e.removeChild(t)},gt.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},gt.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},gt.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},gt.prototype.insertAllBefore=function(t,n,e){e.forEach(function(e){return t.insertBefore(e,n)})},gt.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},gt.prototype.setInnerHTML=function(e,t){e.innerHTML=t},gt.prototype.getText=function(e){return e.textContent},gt.prototype.setText=function(e,t){e.textContent=t},gt.prototype.getValue=function(e){return e.value},gt.prototype.setValue=function(e,t){e.value=t},gt.prototype.getChecked=function(e){return e.checked},gt.prototype.setChecked=function(e,t){e.checked=t},gt.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},gt.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},gt.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},gt.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},gt.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},gt.prototype.createScriptTag=function(e,t,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r},gt.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},gt.prototype.createShadowRoot=function(e){return e.createShadowRoot()},gt.prototype.getShadowRoot=function(e){return e.shadowRoot},gt.prototype.getHost=function(e){return e.host},gt.prototype.clone=function(e){return e.cloneNode(!0)},gt.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},gt.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},gt.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},gt.prototype.addClass=function(e,t){e.classList.add(t)},gt.prototype.removeClass=function(e,t){e.classList.remove(t)},gt.prototype.hasClass=function(e,t){return e.classList.contains(t)},gt.prototype.setStyle=function(e,t,n){e.style[t]=n},gt.prototype.removeStyle=function(e,t){e.style[t]=""},gt.prototype.getStyle=function(e,t){return e.style[t]},gt.prototype.hasStyle=function(e,t,n){var r=this.getStyle(e,t)||"";return n?r==n:0<r.length},gt.prototype.tagName=function(e){return e.tagName},gt.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var o=n.item(r);t.set(o.name,o.value)}return t},gt.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},gt.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},gt.prototype.getAttribute=function(e,t){return e.getAttribute(t)},gt.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},gt.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},gt.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},gt.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},gt.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},gt.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},gt.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},gt.prototype.getDefaultDocument=function(){return document},gt.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},gt.prototype.getTitle=function(e){return e.title},gt.prototype.setTitle=function(e,t){e.title=t||""},gt.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},gt.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},gt.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},gt.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},gt.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},gt.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},gt.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},gt.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},gt.prototype.adoptNode=function(e){return document.adoptNode(e)},gt.prototype.getHref=function(e){return e.getAttribute("href")},gt.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&ht.hasOwnProperty(t)&&(t=ht[t]))}return dt[t]||t},gt.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},gt.prototype.getHistory=function(){return window.history},gt.prototype.getLocation=function(){return window.location},gt.prototype.getBaseHref=function(e){var t,n=(vt=vt||document.querySelector("base"))?vt.getAttribute("href"):null;return null==n?null:(t=n,(yt=yt||document.createElement("a")).setAttribute("href",t),"/"===yt.pathname.charAt(0)?yt.pathname:"/"+yt.pathname)},gt.prototype.resetBaseElement=function(){vt=null},gt.prototype.getUserAgent=function(){return window.navigator.userAgent},gt.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},gt.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},gt.prototype.getComputedStyle=function(e){return getComputedStyle(e)},gt.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},gt.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},gt.prototype.supportsCookies=function(){return!0},gt.prototype.getCookie=function(e){return t["ÉµparseCookieValue"](document.cookie,e)},gt.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},gt);function gt(){return null!==ft&&ft.apply(this,arguments)||this}var yt,vt=null,bt=t.DOCUMENT;function wt(){return window.history.pushState}var _t,St=(ee(Ct,_t=t.PlatformLocation),Ct.prototype._init=function(){this.location=ot.getLocation(),this._history=ot.getHistory()},Ct.prototype.getBaseHrefFromDOM=function(){return ot.getBaseHref(this._doc)},Ct.prototype.onPopState=function(e){ot.getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},Ct.prototype.onHashChange=function(e){ot.getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(Ct.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(Ct.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(Ct.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),Ct.prototype.pushState=function(e,t,n){wt()?this._history.pushState(e,t,n):this.location.hash=n},Ct.prototype.replaceState=function(e,t,n){wt()?this._history.replaceState(e,t,n):this.location.hash=n},Ct.prototype.forward=function(){this._history.forward()},Ct.prototype.back=function(){this._history.back()},Ct.decorators=[{type:h.Injectable}],Ct.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[bt]}]}]},Ct);function Ct(e){var t=_t.call(this)||this;return t._doc=e,t._init(),t}h.Injectable,new h.InjectionToken("TRANSITION_ID");var Et=(It.init=function(){h.setTestabilityGetter(new It)},It.prototype.addToWindow=function(r){h["Éµglobal"].getAngularTestability=function(e,t){void 0===t&&(t=!0);var n=r.findTestabilityInTree(e,t);if(null==n)throw new Error("Could not find testability for element.");return n},h["Éµglobal"].getAllAngularTestabilities=function(){return r.getAllTestabilities()},h["Éµglobal"].getAllAngularRootElements=function(){return r.getAllRootElements()},h["Éµglobal"].frameworkStabilizers||(h["Éµglobal"].frameworkStabilizers=[]),h["Éµglobal"].frameworkStabilizers.push(function(t){function n(e){o=o||e,0==--r&&t(o)}var e=h["Éµglobal"].getAllAngularTestabilities(),r=e.length,o=!1;e.forEach(function(e){e.whenStable(n)})})},It.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?ot.isShadowRoot(t)?this.findTestabilityInTree(e,ot.getHost(t),!0):this.findTestabilityInTree(e,ot.parentElement(t),!0):null},It);function It(){}h.Injectable;h.ApplicationRef,h.NgZone;h.APP_INITIALIZER,h.NgProbeToken,new h.Optional;var At=new h.InjectionToken("EventManagerPlugins");Pt.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},Pt.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},Pt.prototype.getZone=function(){return this._zone},Pt.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var o=n[r];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error("No event manager plugin found for event "+e)},Pt.decorators=[{type:h.Injectable}],Pt.ctorParameters=function(){return[{type:Array,decorators:[{type:h.Inject,args:[At]}]},{type:h.NgZone}]};function Pt(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}var kt=(Ot.prototype.addGlobalEventListener=function(e,t,n){var r=ot.getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target "+r+" for event "+t);return this.addEventListener(r,t,n)},Ot);function Ot(e){this._doc=e}var Tt=(xt.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},xt.prototype.onStylesAdded=function(e){},xt.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},xt.decorators=[{type:h.Injectable}],xt.ctorParameters=function(){return[]},xt);function xt(){this._stylesSet=new Set}var Nt;ee(Ut,Nt=Tt),Ut.prototype._addStylesToHost=function(e,n){var r=this;e.forEach(function(e){var t=r._doc.createElement("style");t.textContent=e,r._styleNodes.add(n.appendChild(t))})},Ut.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},Ut.prototype.removeHost=function(e){this._hostNodes.delete(e)},Ut.prototype.onStylesAdded=function(t){var n=this;this._hostNodes.forEach(function(e){return n._addStylesToHost(t,e)})},Ut.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return ot.remove(e)})},Ut.decorators=[{type:h.Injectable}],Ut.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[bt]}]}]};function Ut(e){var t=Nt.call(this)||this;return t._doc=e,t._hostNodes=new Set,t._styleNodes=new Set,t._hostNodes.add(e.head),t}var Rt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Mt=/%COMP%/g;function Dt(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?Dt(e,o,n):(o=o.replace(Mt,e),n.push(o))}return n}function Ft(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}h.Injectable;var Lt=(jt.prototype.destroy=function(){},jt.prototype.createElement=function(e,t){return t?document.createElementNS(Rt[t],e):document.createElement(e)},jt.prototype.createComment=function(e){return document.createComment(e)},jt.prototype.createText=function(e){return document.createTextNode(e)},jt.prototype.appendChild=function(e,t){e.appendChild(t)},jt.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},jt.prototype.removeChild=function(e,t){e&&e.removeChild(t)},jt.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},jt.prototype.parentNode=function(e){return e.parentNode},jt.prototype.nextSibling=function(e){return e.nextSibling},jt.prototype.setAttribute=function(e,t,n,r){var o;r?(t=r+":"+t,(o=Rt[r])?e.setAttributeNS(o,t,n):e.setAttribute(t,n)):e.setAttribute(t,n)},jt.prototype.removeAttribute=function(e,t,n){var r;n?(r=Rt[n])?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t):e.removeAttribute(t)},jt.prototype.addClass=function(e,t){e.classList.add(t)},jt.prototype.removeClass=function(e,t){e.classList.remove(t)},jt.prototype.setStyle=function(e,t,n,r){r&h.RendererStyleFlags2.DashCase?e.style.setProperty(t,n,r&h.RendererStyleFlags2.Important?"important":""):e.style[t]=n},jt.prototype.removeStyle=function(e,t,n){n&h.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},jt.prototype.setProperty=function(e,t,n){Vt(t,"property"),e[t]=n},jt.prototype.setValue=function(e,t){e.nodeValue=t},jt.prototype.listen=function(e,t,n){return Vt(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ft(n)):this.eventManager.addEventListener(e,t,Ft(n))},jt);function jt(e){this.eventManager=e,this.data=Object.create(null)}var Bt="@".charCodeAt(0);function Vt(e,t){if(e.charCodeAt(0)===Bt)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var qt;ee(zt,qt=Lt),zt.prototype.applyToHost=function(e){qt.prototype.setAttribute.call(this,e,this.hostAttr,"")},zt.prototype.createElement=function(e,t){var n=qt.prototype.createElement.call(this,e,t);return qt.prototype.setAttribute.call(this,n,this.contentAttr,""),n};function zt(e,t,n){var r,o,i=qt.call(this,e)||this,s=Dt((i.component=n).id,n.styles,[]);return t.addStyles(s),i.contentAttr=(r=n.id,"_ngcontent-%COMP%".replace(Mt,r)),i.hostAttr=(o=n.id,"_nghost-%COMP%".replace(Mt,o)),i}var Ht;ee(Kt,Ht=Lt),Kt.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},Kt.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},Kt.prototype.appendChild=function(e,t){return Ht.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),t)},Kt.prototype.insertBefore=function(e,t,n){return Ht.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),t,n)},Kt.prototype.removeChild=function(e,t){return Ht.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),t)},Kt.prototype.parentNode=function(e){return this.nodeOrShadowRoot(Ht.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))};function Kt(e,t,n,r){var o=Ht.call(this,e)||this;o.sharedStylesHost=t,o.hostEl=n,o.component=r,o.shadowRoot=n.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var i=Dt(r.id,r.styles,[]),s=0;s<i.length;s++){var a=document.createElement("style");a.textContent=i[s],o.shadowRoot.appendChild(a)}return o}var Gt,Wt,$t="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},Yt=$t("addEventListener"),Jt=$t("removeEventListener"),Zt={},Qt="removeEventListener",Xt="__zone_symbol__propagationStopped",en="__zone_symbol__stopImmediatePropagation",tn="undefined"!=typeof Zone&&Zone[$t("BLACK_LISTED_EVENTS")];function nn(e){return Gt&&Gt.hasOwnProperty(e)}function rn(e){var t=Zt[e.type];if(t){var n=this[t];if(n){var r=[e];if(1===n.length)return(o=n[0]).zone!==Zone.current?o.zone.run(o.handler,this,r):o.handler.apply(this,r);for(var o,i=n.slice(),s=0;s<i.length&&!0!==e[Xt];s++)(o=i[s]).zone!==Zone.current?o.zone.run(o.handler,this,r):o.handler.apply(this,r)}}}function on(e,t){var n=Wt.call(this,e)||this;return n.ngZone=t,n.patchEvent(),n}tn&&(Gt={},tn.forEach(function(e){Gt[e]=e})),ee(on,Wt=kt),on.prototype.patchEvent=function(){var e;Event&&Event.prototype&&(Event.prototype[en]||(e=Event.prototype[en]=Event.prototype.stopImmediatePropagation,Event.prototype.stopImmediatePropagation=function(){this&&(this[Xt]=!0),e&&e.apply(this,arguments)}))},on.prototype.supports=function(e){return!0},on.prototype.addEventListener=function(e,t,n){var r=this,o=e[Yt],i=n;if(!o||h.NgZone.isInAngularZone()&&!nn(t))e.addEventListener(t,i,!1);else{var s=(s=Zt[t])||(Zt[t]=$t("ANGULAR"+t+"FALSE")),a=(u=e[s])&&0<u.length,u=u||(e[s]=[]),c=nn(t)?Zone.root:Zone.current;if(0===u.length)u.push({zone:c,handler:i});else{for(var l=!1,p=0;p<u.length;p++)if(u[p].handler===i){l=!0;break}l||u.push({zone:c,handler:i})}a||e[Yt](t,rn,!1)}return function(){return r.removeEventListener(e,t,i)}},on.prototype.removeEventListener=function(e,t,n){var r=e[Jt];if(!r)return e[Qt].apply(e,[t,n,!1]);var o=Zt[t],i=o&&e[o];if(!i)return e[Qt].apply(e,[t,n,!1]);for(var s=!1,a=0;a<i.length;a++)if(i[a].handler===n){s=!0,i.splice(a,1);break}s?0===i.length&&r.apply(e,[t,rn,!1]):e[Qt].apply(e,[t,n,!1])},on.decorators=[{type:h.Injectable}],on.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[bt]}]},{type:h.NgZone}]};var sn,an={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},un=new h.InjectionToken("HammerGestureConfig"),cn=(ln.prototype.buildHammer=function(e){var t=new Hammer(e);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t},ln.decorators=[{type:h.Injectable}],ln.ctorParameters=function(){return[]},ln);function ln(){this.events=[],this.overrides={}}function pn(e,t){var n=sn.call(this,e)||this;return n._config=t,n}ee(pn,sn=kt),pn.prototype.supports=function(e){if(!an.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+e+" event");return!0},pn.prototype.addEventListener=function(n,r,o){var i=this,s=this.manager.getZone();return r=r.toLowerCase(),s.runOutsideAngular(function(){function e(e){s.runGuarded(function(){o(e)})}var t=i._config.buildHammer(n);return t.on(r,e),function(){return t.off(r,e)}})},pn.prototype.isCustomEvent=function(e){return-1<this._config.events.indexOf(e)},pn.decorators=[{type:h.Injectable}],pn.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[bt]}]},{type:cn,decorators:[{type:h.Inject,args:[un]}]}]};var dn,hn=["alt","control","meta","shift"],fn={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}};function mn(e){return dn.call(this,e)||this}ee(mn,dn=kt),mn.prototype.supports=function(e){return null!=mn.parseEventName(e)},mn.prototype.addEventListener=function(e,t,n){var r=mn.parseEventName(t),o=mn.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return ot.onAndCancel(e,r.domEventName,o)})},mn.parseEventName=function(e){var n=e.toLowerCase().split("."),t=n.shift();if(0===n.length||"keydown"!==t&&"keyup"!==t)return null;var r=mn._normalizeKey(n.pop()),o="";if(hn.forEach(function(e){var t=n.indexOf(e);-1<t&&(n.splice(t,1),o+=e+".")}),o+=r,0!=n.length||0===r.length)return null;var i={};return i.domEventName=t,i.fullKey=o,i},mn.getEventFullKey=function(t){var n="",r=ot.getEventKey(t);return" "===(r=r.toLowerCase())?r="space":"."===r&&(r="dot"),hn.forEach(function(e){e!=r&&(0,fn[e])(t)&&(n+=e+".")}),n+=r},mn.eventCallback=function(t,n,r){return function(e){mn.getEventFullKey(e)===t&&r.runGuarded(function(){return n(e)})}},mn._normalizeKey=function(e){switch(e){case"esc":return"escape";default:return e}},mn.decorators=[{type:h.Injectable}],mn.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[bt]}]}]};var gn=(yn.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null);var n=t.response.body;return n.removeChild(n.firstChild),n},yn.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},yn.prototype.getInertBodyElement_InertDocument=function(e){var t=this.DOM.createElement("template");return"content"in t?(this.DOM.setInnerHTML(t,e),t):(this.DOM.setInnerHTML(this.inertBodyElement,e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},yn.prototype.stripCustomNsAttrs=function(n){var r=this;this.DOM.attributeMap(n).forEach(function(e,t){"xmlns:ns1"!==t&&0!==t.indexOf("ns1:")||r.DOM.removeAttribute(n,t)});for(var e=0,t=this.DOM.childNodesAsList(n);e<t.length;e++){var o=t[e];this.DOM.isElementNode(o)&&this.stripCustomNsAttrs(o)}},yn);function yn(e,t){this.defaultDoc=e,this.DOM=t;var n,r=this.DOM.createHtmlDocument();this.inertBodyElement=r.body,null==this.inertBodyElement&&(n=this.DOM.createElement("html",r),this.inertBodyElement=this.DOM.createElement("body",r),this.DOM.appendChild(n,this.inertBodyElement),this.DOM.appendChild(r,n)),this.DOM.setInnerHTML(this.inertBodyElement,'<svg><g onload="this.parentNode.remove()"></g></svg>'),!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.DOM.setInnerHTML(this.inertBodyElement,'<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return window.DOMParser}catch(e){return}}()?this.getInertBodyElement=this.getInertBodyElement_DOMParser:this.getInertBodyElement=this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}var vn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,bn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function wn(e){return(e=String(e)).match(vn)||e.match(bn)?e:(h.isDevMode()&&ot.log("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function _n(e){for(var t={},n=0,r=e.split(",");n<r.length;n++)t[r[n]]=!0;return t}function Sn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,o=e;r<o.length;r++){var i=o[r];for(var s in i)i.hasOwnProperty(s)&&(n[s]=!0)}return n}var Cn=_n("area,br,col,hr,img,wbr"),En=_n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),In=_n("rp,rt"),An=Sn(In,En),Pn=Sn(En,_n("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),kn=Sn(In,_n("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),On=Sn(Cn,Pn,kn,An),Tn=_n("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),xn=_n("srcset"),Nn=_n("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Un=Sn(Tn,xn,Nn),Rn=(Mn.prototype.sanitizeChildren=function(e){for(var t=this.DOM.firstChild(e);t;)if(this.DOM.isElementNode(t)?this.startElement(t):this.DOM.isTextNode(t)?this.chars(this.DOM.nodeValue(t)):this.sanitizedSomething=!0,this.DOM.firstChild(t))t=this.DOM.firstChild(t);else for(;t;){this.DOM.isElementNode(t)&&this.endElement(t);var n=this.checkClobberedElement(t,this.DOM.nextSibling(t));if(n){t=n;break}t=this.checkClobberedElement(t,this.DOM.parentElement(t))}return this.buf.join("")},Mn.prototype.startElement=function(e){var r=this,t=this.DOM.nodeName(e).toLowerCase();On.hasOwnProperty(t)?(this.buf.push("<"),this.buf.push(t),this.DOM.attributeMap(e).forEach(function(e,t){var n=t.toLowerCase();Un.hasOwnProperty(n)?(Tn[n]&&(e=wn(e)),xn[n]&&(e=String(e).split(",").map(function(e){return wn(e.trim())}).join(", ")),r.buf.push(" "),r.buf.push(t),r.buf.push('="'),r.buf.push(jn(e)),r.buf.push('"')):r.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},Mn.prototype.endElement=function(e){var t=this.DOM.nodeName(e).toLowerCase();On.hasOwnProperty(t)&&!Cn.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))},Mn.prototype.chars=function(e){this.buf.push(jn(e))},Mn.prototype.checkClobberedElement=function(e,t){if(t&&this.DOM.contains(e,t))throw new Error("Failed to sanitize html because the element is clobbered: "+this.DOM.getOuterHTML(e));return t},Mn);function Mn(){this.sanitizedSomething=!1,this.buf=[],this.DOM=ot}var Dn,Fn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ln=/([^\#-~ |!])/g;function jn(e){return e.replace(/&/g,"&amp;").replace(Fn,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Ln,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Bn,Vn=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),qn=/^url\(([^)]+)\)$/;function zn(e){var t=Bn.call(this)||this;return t._doc=e,t}ee(zn,Bn=function(){}),zn.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case h.SecurityContext.NONE:return t;case h.SecurityContext.HTML:return t instanceof Wn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=ot,r=null;try{Dn=Dn||new gn(e,n);var o=t?String(t):"",r=Dn.getInertBodyElement(o),i=5,s=o;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,o=s,s=n.getInnerHTML(r),r=Dn.getInertBodyElement(o)}while(o!==s);var a=new Rn,u=a.sanitizeChildren(n.getTemplateContent(r)||r);return h.isDevMode()&&a.sanitizedSomething&&n.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}finally{if(r)for(var c=n.getTemplateContent(r)||r,l=0,p=n.childNodesAsList(c);l<p.length;l++){var d=p[l];n.removeChild(c,d)}}}(this._doc,String(t)));case h.SecurityContext.STYLE:return t instanceof Jn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";var t=e.match(qn);return t&&wn(t[1])===t[1]||e.match(Vn)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var o=e.charAt(r);"'"===o&&n?t=!t:'"'===o&&t&&(n=!n)}return t&&n}(e)?e:(h.isDevMode()&&ot.log("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}(t));case h.SecurityContext.SCRIPT:if(t instanceof Xn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case h.SecurityContext.URL:return t instanceof ir||t instanceof nr?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),wn(String(t)));case h.SecurityContext.RESOURCE_URL:if(t instanceof ir)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},zn.prototype.checkNotSafeValue=function(e,t){if(e instanceof Hn)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},zn.prototype.bypassSecurityTrustHtml=function(e){return new Wn(e)},zn.prototype.bypassSecurityTrustStyle=function(e){return new Jn(e)},zn.prototype.bypassSecurityTrustScript=function(e){return new Xn(e)},zn.prototype.bypassSecurityTrustUrl=function(e){return new nr(e)},zn.prototype.bypassSecurityTrustResourceUrl=function(e){return new ir(e)},zn.decorators=[{type:h.Injectable}],zn.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[bt]}]}]};var Hn=(Kn.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},Kn);function Kn(e){this.changingThisBreaksApplicationSecurity=e}var Gn,Wn=(ee($n,Gn=Hn),$n.prototype.getTypeName=function(){return"HTML"},$n);function $n(){return null!==Gn&&Gn.apply(this,arguments)||this}var Yn,Jn=(ee(Zn,Yn=Hn),Zn.prototype.getTypeName=function(){return"Style"},Zn);function Zn(){return null!==Yn&&Yn.apply(this,arguments)||this}var Qn,Xn=(ee(er,Qn=Hn),er.prototype.getTypeName=function(){return"Script"},er);function er(){return null!==Qn&&Qn.apply(this,arguments)||this}var tr,nr=(ee(rr,tr=Hn),rr.prototype.getTypeName=function(){return"URL"},rr);function rr(){return null!==tr&&tr.apply(this,arguments)||this}var or,ir=(ee(sr,or=Hn),sr.prototype.getTypeName=function(){return"ResourceURL"},sr);function sr(){return null!==or&&or.apply(this,arguments)||this}var ar=[{provide:h.PLATFORM_ID,useValue:t["ÉµPLATFORM_BROWSER_ID"]},{provide:h.PLATFORM_INITIALIZER,useValue:function(){mt.makeCurrent(),Et.init()},multi:!0},{provide:t.PlatformLocation,useClass:St,deps:[bt]},{provide:bt,useFactory:function(){return document},deps:[]}];h.createPlatformFactory(h.platformCore,"browser",ar),h.Injectable,new h.Version("5.2.11");var ur=(Object.defineProperty(cr.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),cr.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},cr.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},cr.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},cr);function cr(){}var lr,pr=(ee(dr,lr=ur),Object.defineProperty(dr.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(dr.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),dr);function dr(){return null!==lr&&lr.apply(this,arguments)||this}function hr(e){return null==e||0===e.length}var fr=new h.InjectionToken("NgValidators"),mr=new h.InjectionToken("NgAsyncValidators"),gr=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,yr=(vr.min=function(n){return function(e){if(hr(e.value)||hr(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}},vr.max=function(n){return function(e){if(hr(e.value)||hr(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&n<t?{max:{max:n,actual:e.value}}:null}},vr.required=function(e){return hr(e.value)?{required:!0}:null},vr.requiredTrue=function(e){return!0===e.value?null:{required:!0}},vr.email=function(e){return hr(e.value)||gr.test(e.value)?null:{email:!0}},vr.minLength=function(n){return function(e){if(hr(e.value))return null;var t=e.value?e.value.length:0;return t<n?{minlength:{requiredLength:n,actualLength:t}}:null}},vr.maxLength=function(n){return function(e){var t=e.value?e.value.length:0;return n<t?{maxlength:{requiredLength:n,actualLength:t}}:null}},vr.pattern=function(e){if(!e)return vr.nullValidator;var n,r="string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),new RegExp(n)):(n=e.toString(),e);return function(e){if(hr(e.value))return null;var t=e.value;return r.test(t)?null:{pattern:{requiredPattern:n,actualValue:t}}}},vr.nullValidator=function(e){return null},vr.compose=function(e){if(!e)return null;var n=e.filter(br);return 0==n.length?null:function(e){return _r((t=e,n.map(function(e){return e(t)})));var t}},vr.composeAsync=function(e){if(!e)return null;var n=e.filter(br);return 0==n.length?null:function(e){var t;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(he(n))return rt(n,null);if(fe(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return rt(r.map(function(e){return n[e]}),r)}}if("function"!=typeof e[e.length-1])return rt(e,null);var o=e.pop();return rt(e=1===e.length&&he(e[0])?e[0]:e,null).pipe(Ge(function(e){return o.apply(void 0,e)}))}((t=e,n.map(function(e){return e(t)}).map(wr))).pipe(Ge(_r))}},vr);function vr(){}function br(e){return null!=e}function wr(e){var t=h["ÉµisPromise"](e)?nt(e):e;if(!h["ÉµisObservable"](t))throw new Error("Expected validator to return Promise or Observable.");return t}function _r(e){var t=e.reduce(function(e,t){return null!=t?te({},e,t):e},{});return 0===Object.keys(t).length?null:t}var Sr=new h.InjectionToken("NgValueAccessor"),Cr={provide:Sr,useExisting:h.forwardRef(function(){return Er}),multi:!0},Er=(Ir.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},Ir.prototype.registerOnChange=function(e){this.onChange=e},Ir.prototype.registerOnTouched=function(e){this.onTouched=e},Ir.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Ir=ne([h.Directive({selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[Cr]}),oe("design:paramtypes",[h.Renderer2,h.ElementRef])],Ir));function Ir(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var Ar={provide:Sr,useExisting:h.forwardRef(function(){return kr}),multi:!0},Pr=new h.InjectionToken("CompositionEventMode"),kr=(Or.prototype.writeValue=function(e){var t=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",t)},Or.prototype.registerOnChange=function(e){this.onChange=e},Or.prototype.registerOnTouched=function(e){this.onTouched=e},Or.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Or.prototype._handleInput=function(e){this._compositionMode&&(!this._compositionMode||this._composing)||this.onChange(e)},Or.prototype._compositionStart=function(){this._composing=!0},Or.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},Or=ne([h.Directive({selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[Ar]}),re(2,h.Optional()),re(2,h.Inject(Pr)),oe("design:paramtypes",[h.Renderer2,h.ElementRef,Boolean])],Or));function Or(e,t,n){var r;this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(r=ot?ot.getUserAgent():"",!/android (\d+)/.test(r.toLowerCase())))}function Tr(t){return t.validate?function(e){return t.validate(e)}:t}function xr(t){return t.validate?function(e){return t.validate(e)}:t}var Nr={provide:Sr,useExisting:h.forwardRef(function(){return Ur}),multi:!0},Ur=(Rr.prototype.writeValue=function(e){var t=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",t)},Rr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},Rr.prototype.registerOnTouched=function(e){this.onTouched=e},Rr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Rr=ne([h.Directive({selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[Nr]}),oe("design:paramtypes",[h.Renderer2,h.ElementRef])],Rr));function Rr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}function Mr(){throw new Error("unimplemented")}var Dr,Fr=(ee(Lr,Dr=ur),Object.defineProperty(Lr.prototype,"validator",{get:Mr,enumerable:!0,configurable:!0}),Object.defineProperty(Lr.prototype,"asyncValidator",{get:Mr,enumerable:!0,configurable:!0}),Lr);function Lr(){var e=null!==Dr&&Dr.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}var jr={provide:Sr,useExisting:h.forwardRef(function(){return qr}),multi:!0},Br=(Vr.prototype.add=function(e,t){this._accessors.push([e,t])},Vr.prototype.remove=function(e){for(var t=this._accessors.length-1;0<=t;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},Vr.prototype.select=function(t){var n=this;this._accessors.forEach(function(e){n._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})},Vr.prototype._isSameGroup=function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name},Vr=ne([h.Injectable()],Vr));function Vr(){this._accessors=[]}var qr=(zr.prototype.ngOnInit=function(){this._control=this._injector.get(Fr),this._checkName(),this._registry.add(this._control,this)},zr.prototype.ngOnDestroy=function(){this._registry.remove(this)},zr.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},zr.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},zr.prototype.fireUncheck=function(e){this.writeValue(e)},zr.prototype.registerOnTouched=function(e){this.onTouched=e},zr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},zr.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},zr.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},ne([h.Input(),oe("design:type",String)],zr.prototype,"name",void 0),ne([h.Input(),oe("design:type",String)],zr.prototype,"formControlName",void 0),ne([h.Input(),oe("design:type",Object)],zr.prototype,"value",void 0),zr=ne([h.Directive({selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[jr]}),oe("design:paramtypes",[h.Renderer2,h.ElementRef,Br,h.Injector])],zr));function zr(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}var Hr={provide:Sr,useExisting:h.forwardRef(function(){return Kr}),multi:!0},Kr=(Gr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},Gr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},Gr.prototype.registerOnTouched=function(e){this.onTouched=e},Gr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Gr=ne([h.Directive({selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[Hr]}),oe("design:paramtypes",[h.Renderer2,h.ElementRef])],Gr));function Gr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var Wr='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',$r='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Yr='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Jr=(Zr.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Wr)},Zr.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+$r+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+Yr)},Zr.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Wr)},Zr.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+$r)},Zr.arrayParentException=function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')},Zr.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},Zr.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},Zr);function Zr(){}var Qr={provide:Sr,useExisting:h.forwardRef(function(){return eo}),multi:!0};function Xr(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var eo=(Object.defineProperty(to.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),to.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=Xr(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)},to.prototype.registerOnChange=function(t){var n=this;this.onChange=function(e){n.value=n._getOptionValue(e),t(n.value)}},to.prototype.registerOnTouched=function(e){this.onTouched=e},to.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},to.prototype._registerOption=function(){return(this._idCounter++).toString()},to.prototype._getOptionId=function(e){var t,n;try{for(var r=ae(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i),e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},to.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t):e},ne([h.Input(),oe("design:type",Function),oe("design:paramtypes",[Function])],to.prototype,"compareWith",null),to=ne([h.Directive({selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[Qr]}),oe("design:paramtypes",[h.Renderer2,h.ElementRef])],to));function to(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=h["ÉµlooseIdentical"]}var no=(Object.defineProperty(ro.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Xr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(ro.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),ro.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},ro.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},ne([h.Input("ngValue"),oe("design:type",Object),oe("design:paramtypes",[Object])],ro.prototype,"ngValue",null),ne([h.Input("value"),oe("design:type",Object),oe("design:paramtypes",[Object])],ro.prototype,"value",null),ro=ne([h.Directive({selector:"option"}),re(2,h.Optional()),re(2,h.Host()),oe("design:paramtypes",[h.ElementRef,h.Renderer2,eo])],ro));function ro(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}var oo={provide:Sr,useExisting:h.forwardRef(function(){return so}),multi:!0};function io(e,t){return null==e?""+t:("string"==typeof t&&(t="'"+t+"'"),t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var so=(Object.defineProperty(ao.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),ao.prototype.writeValue=function(e){var n,t,r=this;this.value=e,t=Array.isArray(e)?(n=e.map(function(e){return r._getOptionId(e)}),function(e,t){e._setSelected(-1<n.indexOf(t.toString()))}):function(e,t){e._setSelected(!1)},this._optionMap.forEach(t)},ao.prototype.registerOnChange=function(s){var a=this;this.onChange=function(e){var t=[];if(e.hasOwnProperty("selectedOptions"))for(var n=e.selectedOptions,r=0;r<n.length;r++){var o=n.item(r),i=a._getOptionValue(o.value);t.push(i)}else for(n=e.options,r=0;r<n.length;r++)(o=n.item(r)).selected&&(i=a._getOptionValue(o.value),t.push(i));a.value=t,s(t)}},ao.prototype.registerOnTouched=function(e){this.onTouched=e},ao.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},ao.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},ao.prototype._getOptionId=function(e){var t,n;try{for(var r=ae(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i)._value,e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},ao.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t)._value:e},ne([h.Input(),oe("design:type",Function),oe("design:paramtypes",[Function])],ao.prototype,"compareWith",null),ao=ne([h.Directive({selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[oo]}),oe("design:paramtypes",[h.Renderer2,h.ElementRef])],ao));function ao(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=h["ÉµlooseIdentical"]}var uo=(Object.defineProperty(co.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(io(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(co.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(io(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),co.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},co.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},co.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},ne([h.Input("ngValue"),oe("design:type",Object),oe("design:paramtypes",[Object])],co.prototype,"ngValue",null),ne([h.Input("value"),oe("design:type",Object),oe("design:paramtypes",[Object])],co.prototype,"value",null),co=ne([h.Directive({selector:"option"}),re(2,h.Optional()),re(2,h.Host()),oe("design:paramtypes",[h.ElementRef,h.Renderer2,so])],co));function co(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}function lo(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(arguments[t]));return e}(t.path,[e])}function po(t,n){var r,o,i,e,s;t||go(n,"Cannot find control with"),n.valueAccessor||go(n,"No value accessor for form control with"),t.validator=yr.compose([t.validator,n.validator]),t.asyncValidator=yr.composeAsync([t.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(t.value),r=t,(o=n).valueAccessor.registerOnChange(function(e){r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&ho(r,o)}),i=n,t.registerOnChange(function(e,t){i.valueAccessor.writeValue(e),t&&i.viewToModelUpdate(e)}),e=t,(s=n).valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&ho(e,s),"submit"!==e.updateOn&&e.markAsTouched()}),n.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(e){n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function ho(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function fo(e,t){null==e&&go(t,"Cannot find control with"),e.validator=yr.compose([e.validator,t.validator]),e.asyncValidator=yr.composeAsync([e.asyncValidator,t.asyncValidator])}function mo(e){return go(e,"There is no FormControl instance attached to form control element with")}function go(e,t){var n=1<e.path.length?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute";throw new Error(t+" "+n)}function yo(e){return null!=e?yr.compose(e.map(Tr)):null}function vo(e){return null!=e?yr.composeAsync(e.map(xr)):null}function bo(e,t){if(e.hasOwnProperty("model")){var n=e.model;return n.isFirstChange()||!h["ÉµlooseIdentical"](t,n.currentValue)}}var wo=[Er,Kr,Ur,eo,so,qr];function _o(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function So(n,e){if(!e)return null;Array.isArray(e)||go(n,"Value accessor was not provided as an array for form control with");var r=void 0,o=void 0,i=void 0;return e.forEach(function(e){var t;e.constructor===kr?r=e:(t=e,wo.some(function(e){return t.constructor===e})?(o&&go(n,"More than one built-in value accessor matches form control with"),o=e):(i&&go(n,"More than one custom value accessor matches form control with"),i=e))}),i||o||r||(go(n,"No valid value accessor for form control with"),null)}function Co(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function Eo(e,t,n,r){h.isDevMode()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(Jr.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}var Io,Ao=(ee(Po,Io=pr),Po.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},Po.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(Po.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Po.prototype,"path",{get:function(){return lo(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Po.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Po.prototype,"validator",{get:function(){return yo(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Po.prototype,"asyncValidator",{get:function(){return vo(this._asyncValidators)},enumerable:!0,configurable:!0}),Po.prototype._checkParentType=function(){},Po);function Po(){return null!==Io&&Io.apply(this,arguments)||this}var ko=(Object.defineProperty(Oo.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(Oo.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(Oo.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(Oo.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(Oo.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(Oo.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(Oo.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),Oo);function Oo(e){this._cd=e}var To,xo={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},No=(ee(Uo,To=ko),Uo=ne([h.Directive({selector:"[formControlName],[ngModel],[formControl]",host:xo}),re(0,h.Self()),oe("design:paramtypes",[Fr])],Uo));function Uo(e){return To.call(this,e)||this}var Ro,Mo=(ee(Do,Ro=ko),Do=ne([h.Directive({selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:xo}),re(0,h.Self()),oe("design:paramtypes",[pr])],Do));function Do(e){return Ro.call(this,e)||this}var Fo="VALID",Lo="INVALID",jo="PENDING",Bo="DISABLED";function Vo(e){var t=zo(e)?e.validators:e;return Array.isArray(t)?yo(t):t||null}function qo(e,t){var n=zo(t)?t.asyncValidators:e;return Array.isArray(n)?vo(n):n||null}function zo(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var Ho=(Object.defineProperty(Ko.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(Ko.prototype,"valid",{get:function(){return this.status===Fo},enumerable:!0,configurable:!0}),Object.defineProperty(Ko.prototype,"invalid",{get:function(){return this.status===Lo},enumerable:!0,configurable:!0}),Object.defineProperty(Ko.prototype,"pending",{get:function(){return this.status==jo},enumerable:!0,configurable:!0}),Object.defineProperty(Ko.prototype,"disabled",{get:function(){return this.status===Bo},enumerable:!0,configurable:!0}),Object.defineProperty(Ko.prototype,"enabled",{get:function(){return this.status!==Bo},enumerable:!0,configurable:!0}),Object.defineProperty(Ko.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(Ko.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(Ko.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),Ko.prototype.setValidators=function(e){this.validator=Vo(e)},Ko.prototype.setAsyncValidators=function(e){this.asyncValidator=qo(e)},Ko.prototype.clearValidators=function(){this.validator=null},Ko.prototype.clearAsyncValidators=function(){this.asyncValidator=null},Ko.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},Ko.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},Ko.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},Ko.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},Ko.prototype.markAsPending=function(e){void 0===e&&(e={}),!(this.status=jo)!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},Ko.prototype.disable=function(t){void 0===t&&(t={}),this.status=Bo,this.errors=null,this._forEachChild(function(e){e.disable(te({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!0)})},Ko.prototype.enable=function(t){void 0===t&&(t={}),this.status=Fo,this._forEachChild(function(e){e.enable(te({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!1)})},Ko.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},Ko.prototype.setParent=function(e){this._parent=e},Ko.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Fo&&this.status!==jo||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},Ko.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},Ko.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?Bo:Fo},Ko.prototype._runValidator=function(){return this.validator?this.validator(this):null},Ko.prototype._runAsyncValidator=function(t){var e,n=this;this.asyncValidator&&(this.status=jo,e=wr(this.asyncValidator(this)),this._asyncValidationSubscription=e.subscribe(function(e){return n.setErrors(e,{emitEvent:t})}))},Ko.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},Ko.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},Ko.prototype.get=function(e){return null==(t=e)?null:(t instanceof Array||(t=t.split(".")),t instanceof Array&&0===t.length?null:t.reduce(function(e,t){return e instanceof Jo?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Xo&&e.at(t)||null},this));var t},Ko.prototype.getError=function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null},Ko.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(Ko.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),Ko.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},Ko.prototype._initObservables=function(){this.valueChanges=new h.EventEmitter,this.statusChanges=new h.EventEmitter},Ko.prototype._calculateStatus=function(){return this._allControlsDisabled()?Bo:this.errors?Lo:this._anyControlsHaveStatus(jo)?jo:this._anyControlsHaveStatus(Lo)?Lo:Fo},Ko.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},Ko.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},Ko.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},Ko.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},Ko.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},Ko.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},Ko.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},Ko.prototype._setUpdateStrategy=function(e){zo(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},Ko);function Ko(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}var Go,Wo=(ee($o,Go=Ho),$o.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},$o.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},$o.prototype.reset=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},$o.prototype._updateValue=function(){},$o.prototype._anyControls=function(e){return!1},$o.prototype._allControlsDisabled=function(){return this.disabled},$o.prototype.registerOnChange=function(e){this._onChange.push(e)},$o.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},$o.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},$o.prototype._forEachChild=function(e){},$o.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},$o.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},$o);function $o(e,t,n){void 0===e&&(e=null);var r=Go.call(this,Vo(t),qo(n,t))||this;return r._onChange=[],r._applyFormState(e),r._setUpdateStrategy(t),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r._initObservables(),r}var Yo,Jo=(ee(Zo,Yo=Ho),Zo.prototype.registerControl=function(e,t){return this.controls[e]?this.controls[e]:((this.controls[e]=t).setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},Zo.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},Zo.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},Zo.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},Zo.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},Zo.prototype.setValue=function(t,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(e){r._throwIfControlMissing(e),r.controls[e].setValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Zo.prototype.patchValue=function(t,n){var r=this;void 0===n&&(n={}),Object.keys(t).forEach(function(e){r.controls[e]&&r.controls[e].patchValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Zo.prototype.reset=function(n,r){void 0===n&&(n={}),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},Zo.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof Wo?t.value:t.getRawValue(),e})},Zo.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},Zo.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},Zo.prototype._forEachChild=function(t){var n=this;Object.keys(this.controls).forEach(function(e){return t(n.controls[e],e)})},Zo.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},Zo.prototype._updateValue=function(){this.value=this._reduceValue()},Zo.prototype._anyControls=function(n){var r=this,o=!1;return this._forEachChild(function(e,t){o=o||r.contains(t)&&n(e)}),o},Zo.prototype._reduceValue=function(){var r=this;return this._reduceChildren({},function(e,t,n){return(t.enabled||r.disabled)&&(e[n]=t.value),e})},Zo.prototype._reduceChildren=function(e,n){var r=e;return this._forEachChild(function(e,t){r=n(r,e,t)}),r},Zo.prototype._allControlsDisabled=function(){var e,t;try{for(var n=ae(Object.keys(this.controls)),r=n.next();!r.done;r=n.next()){var o=r.value;if(this.controls[o].enabled)return!1}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return 0<Object.keys(this.controls).length||this.disabled},Zo.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control with name: '"+t+"'.")})},Zo);function Zo(e,t,n){var r=Yo.call(this,Vo(t),qo(n,t))||this;return r.controls=e,r._initObservables(),r._setUpdateStrategy(t),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}var Qo,Xo=(ee(ei,Qo=Ho),ei.prototype.at=function(e){return this.controls[e]},ei.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},ei.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},ei.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},ei.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(ei.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),ei.prototype.setValue=function(e,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),e.forEach(function(e,t){r._throwIfControlMissing(t),r.at(t).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},ei.prototype.patchValue=function(e,n){var r=this;void 0===n&&(n={}),e.forEach(function(e,t){r.at(t)&&r.at(t).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},ei.prototype.reset=function(n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},ei.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof Wo?e.value:e.getRawValue()})},ei.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},ei.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},ei.prototype._forEachChild=function(n){this.controls.forEach(function(e,t){n(e,t)})},ei.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(e){return e.value})},ei.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},ei.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},ei.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control at index: "+t+".")})},ei.prototype._allControlsDisabled=function(){var e,t;try{for(var n=ae(this.controls),r=n.next();!r.done;r=n.next())if(r.value.enabled)return!1}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return 0<this.controls.length||this.disabled},ei.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},ei);function ei(e,t,n){var r=Qo.call(this,Vo(t),qo(n,t))||this;return r.controls=e,r._initObservables(),r._setUpdateStrategy(t),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}var ti,ni={provide:pr,useExisting:h.forwardRef(function(){return oi})},ri=Promise.resolve(null),oi=(ee(ii,ti=pr),ii.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(ii.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(ii.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(ii.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(ii.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),ii.prototype.addControl=function(t){var n=this;ri.then(function(){var e=n._findContainer(t.path);t.control=e.registerControl(t.name,t.control),po(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),n._directives.push(t)})},ii.prototype.getControl=function(e){return this.form.get(e.path)},ii.prototype.removeControl=function(t){var n=this;ri.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name),Co(n._directives,t)})},ii.prototype.addFormGroup=function(n){var r=this;ri.then(function(){var e=r._findContainer(n.path),t=new Jo({});fo(t,n),e.registerControl(n.name,t),t.updateValueAndValidity({emitEvent:!1})})},ii.prototype.removeFormGroup=function(t){var n=this;ri.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name)})},ii.prototype.getFormGroup=function(e){return this.form.get(e.path)},ii.prototype.updateModel=function(e,t){var n=this;ri.then(function(){n.form.get(e.path).setValue(t)})},ii.prototype.setValue=function(e){this.control.setValue(e)},ii.prototype.onSubmit=function(e){return this.submitted=!0,_o(this.form,this._directives),this.ngSubmit.emit(e),!1},ii.prototype.onReset=function(){this.resetForm()},ii.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},ii.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},ii.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},ne([h.Input("ngFormOptions"),oe("design:type",Object)],ii.prototype,"options",void 0),ii=ne([h.Directive({selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[ni],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}),re(0,h.Optional()),re(0,h.Self()),re(0,h.Inject(fr)),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(mr)),oe("design:paramtypes",[Array,Array])],ii));function ii(e,t){var n=ti.call(this)||this;return n.submitted=!1,n._directives=[],n.ngSubmit=new h.EventEmitter,n.form=new Jo({},yo(e),vo(t)),n}var si=(ai.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+Wr+'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},ai.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+$r+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+Yr)},ai.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},ai.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+$r+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+Yr)},ai);function ai(){}var ui,ci,li={provide:pr,useExisting:h.forwardRef(function(){return pi})},pi=(ee(di,ui=Ao),(ci=di).prototype._checkParentType=function(){this._parent instanceof ci||this._parent instanceof oi||si.modelGroupParentException()},ne([h.Input("ngModelGroup"),oe("design:type",String)],di.prototype,"name",void 0),di=ci=ne([h.Directive({selector:"[ngModelGroup]",providers:[li],exportAs:"ngModelGroup"}),re(0,h.Host()),re(0,h.SkipSelf()),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(fr)),re(2,h.Optional()),re(2,h.Self()),re(2,h.Inject(mr)),oe("design:paramtypes",[pr,Array,Array])],di));function di(e,t,n){var r=ui.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var hi,fi={provide:Fr,useExisting:h.forwardRef(function(){return gi})},mi=Promise.resolve(null),gi=(ee(yi,hi=Fr),yi.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),bo(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},yi.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(yi.prototype,"path",{get:function(){return this._parent?lo(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(yi.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(yi.prototype,"validator",{get:function(){return yo(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(yi.prototype,"asyncValidator",{get:function(){return vo(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),yi.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},yi.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},yi.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},yi.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},yi.prototype._setUpStandalone=function(){po(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},yi.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},yi.prototype._checkParentType=function(){!(this._parent instanceof pi)&&this._parent instanceof Ao?si.formGroupNameException():this._parent instanceof pi||this._parent instanceof oi||si.modelParentException()},yi.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||si.missingNameException()},yi.prototype._updateValue=function(e){var t=this;mi.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},yi.prototype._updateDisabled=function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;mi.then(function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()})},ne([h.Input(),oe("design:type",String)],yi.prototype,"name",void 0),ne([h.Input("disabled"),oe("design:type",Boolean)],yi.prototype,"isDisabled",void 0),ne([h.Input("ngModel"),oe("design:type",Object)],yi.prototype,"model",void 0),ne([h.Input("ngModelOptions"),oe("design:type",Object)],yi.prototype,"options",void 0),ne([h.Output("ngModelChange"),oe("design:type",Object)],yi.prototype,"update",void 0),yi=ne([h.Directive({selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[fi],exportAs:"ngModel"}),re(0,h.Optional()),re(0,h.Host()),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(fr)),re(2,h.Optional()),re(2,h.Self()),re(2,h.Inject(mr)),re(3,h.Optional()),re(3,h.Self()),re(3,h.Inject(Sr)),oe("design:paramtypes",[pr,Array,Array,Array])],yi));function yi(e,t,n,r){var o=hi.call(this)||this;return o.control=new Wo,o._registered=!1,o.update=new h.EventEmitter,o._parent=e,o._rawValidators=t||[],o._rawAsyncValidators=n||[],o.valueAccessor=So(o,r),o}var vi,bi,wi=new h.InjectionToken("NgModelWithFormControlWarning"),_i={provide:Fr,useExisting:h.forwardRef(function(){return Si})},Si=(ee(Ci,vi=Fr),bi=Ci,Object.defineProperty(Ci.prototype,"isDisabled",{set:function(e){Jr.disabledAttrWarning()},enumerable:!0,configurable:!0}),Ci.prototype.ngOnChanges=function(e){this._isControlChanged(e)&&(po(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),bo(e,this.viewModel)&&(Eo("formControl",bi,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(Ci.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(Ci.prototype,"validator",{get:function(){return yo(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Ci.prototype,"asyncValidator",{get:function(){return vo(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Ci.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Ci.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Ci.prototype._isControlChanged=function(e){return e.hasOwnProperty("form")},Ci._ngModelWarningSentOnce=!1,ne([h.Input("formControl"),oe("design:type",Wo)],Ci.prototype,"form",void 0),ne([h.Input("disabled"),oe("design:type",Boolean),oe("design:paramtypes",[Boolean])],Ci.prototype,"isDisabled",null),ne([h.Input("ngModel"),oe("design:type",Object)],Ci.prototype,"model",void 0),ne([h.Output("ngModelChange"),oe("design:type",Object)],Ci.prototype,"update",void 0),Ci=bi=ne([h.Directive({selector:"[formControl]",providers:[_i],exportAs:"ngForm"}),re(0,h.Optional()),re(0,h.Self()),re(0,h.Inject(fr)),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(mr)),re(2,h.Optional()),re(2,h.Self()),re(2,h.Inject(Sr)),re(3,h.Optional()),re(3,h.Inject(wi)),oe("design:paramtypes",[Array,Array,Array,Object])],Ci));function Ci(e,t,n,r){var o=vi.call(this)||this;return o._ngModelWarningConfig=r,o.update=new h.EventEmitter,o._ngModelWarningSent=!1,o._rawValidators=e||[],o._rawAsyncValidators=t||[],o.valueAccessor=So(o,n),o}var Ei,Ii={provide:pr,useExisting:h.forwardRef(function(){return Ai})},Ai=(ee(Pi,Ei=pr),Pi.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(Pi.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Pi.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(Pi.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Pi.prototype.addControl=function(e){var t=this.form.get(e.path);return po(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},Pi.prototype.getControl=function(e){return this.form.get(e.path)},Pi.prototype.removeControl=function(e){Co(this.directives,e)},Pi.prototype.addFormGroup=function(e){var t=this.form.get(e.path);fo(t,e),t.updateValueAndValidity({emitEvent:!1})},Pi.prototype.removeFormGroup=function(e){},Pi.prototype.getFormGroup=function(e){return this.form.get(e.path)},Pi.prototype.addFormArray=function(e){var t=this.form.get(e.path);fo(t,e),t.updateValueAndValidity({emitEvent:!1})},Pi.prototype.removeFormArray=function(e){},Pi.prototype.getFormArray=function(e){return this.form.get(e.path)},Pi.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},Pi.prototype.onSubmit=function(e){return this.submitted=!0,_o(this.form,this.directives),this.ngSubmit.emit(e),!1},Pi.prototype.onReset=function(){this.resetForm()},Pi.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},Pi.prototype._updateDomValue=function(){var o=this;this.directives.forEach(function(e){var t,n,r=o.form.get(e.path);e.control!==r&&(t=e.control,(n=e).valueAccessor.registerOnChange(function(){return mo(n)}),n.valueAccessor.registerOnTouched(function(){return mo(n)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t&&t._clearChangeFns(),r&&po(r,e),e.control=r)}),this.form._updateTreeValidity({emitEvent:!1})},Pi.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange(function(){return e._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},Pi.prototype._updateValidators=function(){var e=yo(this._validators);this.form.validator=yr.compose([this.form.validator,e]);var t=vo(this._asyncValidators);this.form.asyncValidator=yr.composeAsync([this.form.asyncValidator,t])},Pi.prototype._checkFormPresent=function(){this.form||Jr.missingFormException()},ne([h.Input("formGroup"),oe("design:type",Jo)],Pi.prototype,"form",void 0),ne([h.Output(),oe("design:type",Object)],Pi.prototype,"ngSubmit",void 0),Pi=ne([h.Directive({selector:"[formGroup]",providers:[Ii],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}),re(0,h.Optional()),re(0,h.Self()),re(0,h.Inject(fr)),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(mr)),oe("design:paramtypes",[Array,Array])],Pi));function Pi(e,t){var n=Ei.call(this)||this;return n._validators=e,n._asyncValidators=t,n.submitted=!1,n.directives=[],n.form=null,n.ngSubmit=new h.EventEmitter,n}var ki,Oi={provide:pr,useExisting:h.forwardRef(function(){return Ti})},Ti=(ee(xi,ki=Ao),xi.prototype._checkParentType=function(){Di(this._parent)&&Jr.groupParentException()},ne([h.Input("formGroupName"),oe("design:type",String)],xi.prototype,"name",void 0),xi=ne([h.Directive({selector:"[formGroupName]",providers:[Oi]}),re(0,h.Optional()),re(0,h.Host()),re(0,h.SkipSelf()),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(fr)),re(2,h.Optional()),re(2,h.Self()),re(2,h.Inject(mr)),oe("design:paramtypes",[pr,Array,Array])],xi));function xi(e,t,n){var r=ki.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var Ni,Ui={provide:pr,useExisting:h.forwardRef(function(){return Ri})},Ri=(ee(Mi,Ni=pr),Mi.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},Mi.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(Mi.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Mi.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Mi.prototype,"path",{get:function(){return lo(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Mi.prototype,"validator",{get:function(){return yo(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Mi.prototype,"asyncValidator",{get:function(){return vo(this._asyncValidators)},enumerable:!0,configurable:!0}),Mi.prototype._checkParentType=function(){Di(this._parent)&&Jr.arrayParentException()},ne([h.Input("formArrayName"),oe("design:type",String)],Mi.prototype,"name",void 0),Mi=ne([h.Directive({selector:"[formArrayName]",providers:[Ui]}),re(0,h.Optional()),re(0,h.Host()),re(0,h.SkipSelf()),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(fr)),re(2,h.Optional()),re(2,h.Self()),re(2,h.Inject(mr)),oe("design:paramtypes",[pr,Array,Array])],Mi));function Mi(e,t,n){var r=Ni.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}function Di(e){return!(e instanceof Ti||e instanceof Ai||e instanceof Ri)}var Fi,Li,ji={provide:Fr,useExisting:h.forwardRef(function(){return Bi})},Bi=(ee(Vi,Fi=Fr),Li=Vi,Object.defineProperty(Vi.prototype,"isDisabled",{set:function(e){Jr.disabledAttrWarning()},enumerable:!0,configurable:!0}),Vi.prototype.ngOnChanges=function(e){this._added||this._setUpControl(),bo(e,this.viewModel)&&(Eo("formControlName",Li,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},Vi.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Vi.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(Vi.prototype,"path",{get:function(){return lo(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Vi.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Vi.prototype,"validator",{get:function(){return yo(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Vi.prototype,"asyncValidator",{get:function(){return vo(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Vi.prototype._checkParentType=function(){!(this._parent instanceof Ti)&&this._parent instanceof Ao?Jr.ngModelGroupException():this._parent instanceof Ti||this._parent instanceof Ai||this._parent instanceof Ri||Jr.controlParentException()},Vi.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},Vi._ngModelWarningSentOnce=!1,ne([h.Input("formControlName"),oe("design:type",String)],Vi.prototype,"name",void 0),ne([h.Input("disabled"),oe("design:type",Boolean),oe("design:paramtypes",[Boolean])],Vi.prototype,"isDisabled",null),ne([h.Input("ngModel"),oe("design:type",Object)],Vi.prototype,"model",void 0),ne([h.Output("ngModelChange"),oe("design:type",Object)],Vi.prototype,"update",void 0),Vi=Li=ne([h.Directive({selector:"[formControlName]",providers:[ji]}),re(0,h.Optional()),re(0,h.Host()),re(0,h.SkipSelf()),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(fr)),re(2,h.Optional()),re(2,h.Self()),re(2,h.Inject(mr)),re(3,h.Optional()),re(3,h.Self()),re(3,h.Inject(Sr)),re(4,h.Optional()),re(4,h.Inject(wi)),oe("design:paramtypes",[pr,Array,Array,Array,Object])],Vi));function Vi(e,t,n,r,o){var i=Fi.call(this)||this;return i._ngModelWarningConfig=o,i._added=!1,i.update=new h.EventEmitter,i._ngModelWarningSent=!1,i._parent=e,i._rawValidators=t||[],i._rawAsyncValidators=n||[],i.valueAccessor=So(i,r),i}var qi={provide:fr,useExisting:h.forwardRef(function(){return Hi}),multi:!0},zi={provide:fr,useExisting:h.forwardRef(function(){return Wi}),multi:!0},Hi=(Object.defineProperty(Ki.prototype,"required",{get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),Ki.prototype.validate=function(e){return this.required?yr.required(e):null},Ki.prototype.registerOnValidatorChange=function(e){this._onChange=e},ne([h.Input(),oe("design:type",Object),oe("design:paramtypes",[Object])],Ki.prototype,"required",null),Ki=ne([h.Directive({selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[qi],host:{"[attr.required]":'required ? "" : null'}})],Ki));function Ki(){}var Gi,Wi=(ee($i,Gi=Hi),$i.prototype.validate=function(e){return this.required?yr.requiredTrue(e):null},$i=ne([h.Directive({selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[zi],host:{"[attr.required]":'required ? "" : null'}})],$i));function $i(){return null!==Gi&&Gi.apply(this,arguments)||this}var Yi={provide:fr,useExisting:h.forwardRef(function(){return Ji}),multi:!0},Ji=(Object.defineProperty(Zi.prototype,"email",{set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),Zi.prototype.validate=function(e){return this._enabled?yr.email(e):null},Zi.prototype.registerOnValidatorChange=function(e){this._onChange=e},ne([h.Input(),oe("design:type",Object),oe("design:paramtypes",[Object])],Zi.prototype,"email",null),Zi=ne([h.Directive({selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[Yi]})],Zi));function Zi(){}var Qi={provide:fr,useExisting:h.forwardRef(function(){return Xi}),multi:!0},Xi=(es.prototype.ngOnChanges=function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},es.prototype.validate=function(e){return null==this.minlength?null:this._validator(e)},es.prototype.registerOnValidatorChange=function(e){this._onChange=e},es.prototype._createValidator=function(){this._validator=yr.minLength(parseInt(this.minlength,10))},ne([h.Input(),oe("design:type",String)],es.prototype,"minlength",void 0),es=ne([h.Directive({selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[Qi],host:{"[attr.minlength]":"minlength ? minlength : null"}})],es));function es(){}var ts={provide:fr,useExisting:h.forwardRef(function(){return ns}),multi:!0},ns=(rs.prototype.ngOnChanges=function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},rs.prototype.validate=function(e){return null!=this.maxlength?this._validator(e):null},rs.prototype.registerOnValidatorChange=function(e){this._onChange=e},rs.prototype._createValidator=function(){this._validator=yr.maxLength(parseInt(this.maxlength,10))},ne([h.Input(),oe("design:type",String)],rs.prototype,"maxlength",void 0),rs=ne([h.Directive({selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[ts],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}})],rs));function rs(){}var os={provide:fr,useExisting:h.forwardRef(function(){return is}),multi:!0},is=(ss.prototype.ngOnChanges=function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())},ss.prototype.validate=function(e){return this._validator(e)},ss.prototype.registerOnValidatorChange=function(e){this._onChange=e},ss.prototype._createValidator=function(){this._validator=yr.pattern(this.pattern)},ne([h.Input(),oe("design:type",Object)],ss.prototype,"pattern",void 0),ss=ne([h.Directive({selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[os],host:{"[attr.pattern]":"pattern ? pattern : null"}})],ss));function ss(){}var as=(us.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),r=null!=t?t.validator:null,o=null!=t?t.asyncValidator:null;return new Jo(n,r,o)},us.prototype.control=function(e,t,n){return new Wo(e,t,n)},us.prototype.array=function(e,t,n){var r=this,o=e.map(function(e){return r._createControl(e)});return new Xo(o,t,n)},us.prototype._reduceControls=function(t){var n=this,r={};return Object.keys(t).forEach(function(e){r[e]=n._createControl(t[e])}),r},us.prototype._createControl=function(e){if(e instanceof Wo||e instanceof Jo||e instanceof Xo)return e;if(Array.isArray(e)){var t=e[0],n=1<e.length?e[1]:null,r=2<e.length?e[2]:null;return this.control(t,n,r)}return this.control(e)},us=ne([h.Injectable()],us));function us(){}function cs(){}new h.Version("6.1.10");var ls=[cs=ne([h.Directive({selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}})],cs),no,uo,kr,Ur,Kr,Er,eo,so,qr,No,Mo,Hi,Xi,ns,is,Wi,Ji],ps=[gi,pi,oi],ds=[Si,Ai,Bi,Ti,Ri],hs=fs=ne([h.NgModule({declarations:ls,exports:ls})],fs);function fs(){}var ms,gs=ys=ne([h.NgModule({declarations:ps,providers:[Br],exports:[hs,ps]})],ys);function ys(){}function vs(){}(ms=vs).withConfig=function(e){return{ngModule:ms,providers:[{provide:wi,useValue:e.warnOnNgModelWithFormControl}]}},vs=ms=ne([h.NgModule({declarations:[ds],providers:[as,Br],exports:[hs,ds]})],vs);var bs=(ws.decorators=[{type:h.Directive,args:[{selector:"[component-host]"}]}],ws.ctorParameters=function(){return[{type:h.ViewContainerRef}]},ws);function ws(e){this.viewContainerRef=e}function _s(e,t){this.component=e,this.data=t}var Ss=new x.Logger("AuthDecorator");var Cs,Es="pinpoint.{region}.amazonaws.com",Is=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),As=new Set(["cn-north-1","cn-northwest-1"]),Ps=new Set(["us-iso-east-1"]),ks=new Set(["us-isob-east-1"]),Os=new Set(["us-gov-west-1","us-gov-east-1"]),Ts=te(te({},{apiVersion:"2016-12-01",disableHostPrefix:!1,signingName:"mobiletargeting",regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",signingService:"mobiletargeting"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",signingService:"mobiletargeting"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",signingService:"mobiletargeting"};break;default:Is.has(e)&&(n={hostname:Es.replace("{region}",e),signingService:"mobiletargeting"}),As.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e)}),Ps.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e)}),ks.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e)}),Os.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:Es.replace("{region}",e),signingService:"mobiletargeting"})}return Promise.resolve(n)}}),{requestHandler:new i.NodeHttpHandler,sha256:o.Hash.bind(null,"sha256"),urlParser:s.parseUrl,bodyLengthChecker:a.calculateBodyLength,streamCollector:u.streamCollector,base64Decoder:l.fromBase64,base64Encoder:l.toBase64,utf8Decoder:c.fromUtf8,utf8Encoder:c.toUtf8,defaultUserAgent:p.defaultUserAgent("@aws-sdk/client-pinpoint","1.0.0-beta.5"),runtime:"node",credentialDefaultProvider:n.defaultProvider,regionDefaultProvider:r.defaultProvider}),xs=(ee(Ns,Cs=w.Client),Ns.prototype.destroy=function(){},Ns);function Ns(e){var t=this,n=te(te({},Ts),e),r=d.resolveRegionConfig(n),o=d.resolveEndpointsConfig(r),i=y.resolveAwsAuthConfig(o),s=g.resolveRetryConfig(i),a=v.resolveUserAgentConfig(s),u=m.resolveHostHeaderConfig(a);return(t=Cs.call(this,u)||this).config=u,t.middlewareStack.use(y.getAwsAuthPlugin(t.config)),t.middlewareStack.use(g.getRetryPlugin(t.config)),t.middlewareStack.use(v.getUserAgentPlugin(t.config)),t.middlewareStack.use(f.getContentLengthPlugin(t.config)),t.middlewareStack.use(m.getHostHeaderPlugin(t.config)),t}function Us(c,l){return ie(this,void 0,void 0,function(){var i,s,a,u;return se(this,function(e){if(i={"Content-Type":"application/json"},s="/v1/apps/{ApplicationId}/events",void 0===c.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((a=c.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return s=s.replace("{ApplicationId}",w.extendedEncodeURIComponent(a)),void 0!==c.EventsRequest&&(t=c.EventsRequest,n={},void 0!==t.BatchItem&&(n.BatchItem=(r=t.BatchItem,o={},Object.keys(r).forEach(function(e){var t,n;o[e]=(t=r[e],n={},void 0!==t.Endpoint&&(n.Endpoint=Xs(t.Endpoint)),void 0!==t.Events&&(n.Events=function(r){var o={};return Object.keys(r).forEach(function(e){var t,n;o[e]=(t=r[e],n={},void 0!==t.AppPackageName&&(n.AppPackageName=t.AppPackageName),void 0!==t.AppTitle&&(n.AppTitle=t.AppTitle),void 0!==t.AppVersionCode&&(n.AppVersionCode=t.AppVersionCode),void 0!==t.Attributes&&(n.Attributes=Qs(t.Attributes)),void 0!==t.ClientSdkVersion&&(n.ClientSdkVersion=t.ClientSdkVersion),void 0!==t.EventType&&(n.EventType=t.EventType),void 0!==t.Metrics&&(n.Metrics=Zs(t.Metrics)),void 0!==t.SdkName&&(n.SdkName=t.SdkName),void 0!==t.Session&&(n.Session=ea(t.Session)),void 0!==t.Timestamp&&(n.Timestamp=t.Timestamp),n)}),o}(t.Events)),n)}),o)),u=n),void 0===u&&(u={}),u=JSON.stringify(u),[2,new _.HttpRequest(te(te({},l.endpoint),{protocol:"https",method:"POST",headers:i,path:s,body:u}))];var t,r,o,n})})}function Rs(a,u){return ie(this,void 0,void 0,function(){var r,o,i,s;return se(this,function(e){if(r={"Content-Type":"application/json"},o="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===a.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=a.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(o=o.replace("{ApplicationId}",w.extendedEncodeURIComponent(i)),void 0===a.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((i=a.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return o=o.replace("{EndpointId}",w.extendedEncodeURIComponent(i)),void 0!==a.EndpointRequest&&(t=a.EndpointRequest,n={},void 0!==t.Address&&(n.Address=t.Address),void 0!==t.Attributes&&(n.Attributes=Js(t.Attributes)),void 0!==t.ChannelType&&(n.ChannelType=t.ChannelType),void 0!==t.Demographic&&(n.Demographic=Ls(t.Demographic)),void 0!==t.EffectiveDate&&(n.EffectiveDate=t.EffectiveDate),void 0!==t.EndpointStatus&&(n.EndpointStatus=t.EndpointStatus),void 0!==t.Location&&(n.Location=js(t.Location)),void 0!==t.Metrics&&(n.Metrics=Zs(t.Metrics)),void 0!==t.OptOut&&(n.OptOut=t.OptOut),void 0!==t.RequestId&&(n.RequestId=t.RequestId),void 0!==t.User&&(n.User=Gs(t.User)),s=n),void 0===s&&(s={}),s=JSON.stringify(s),[2,new _.HttpRequest(te(te({},u.endpoint),{protocol:"https",method:"PUT",headers:r,path:o,body:s}))];var t,n})})}function Ms(o,i){return ie(this,void 0,void 0,function(){var n,r;return se(this,function(e){switch(e.label){case 0:return 200!==o.statusCode&&400<=o.statusCode?[2,function(f,m){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h;return se(this,function(e){switch(e.label){case 0:return n=[te({},f)],r={},[4,Ws(f.body,m)];case 1:switch(t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=$s(f,t.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return s=[{}],[4,Bs(t)];case 3:return o=te.apply(void 0,[te.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 4:return a=[{}],[4,Vs(t)];case 5:return o=te.apply(void 0,[te.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 6:return u=[{}],[4,qs(t)];case 7:return o=te.apply(void 0,[te.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 8:return c=[{}],[4,zs(t)];case 9:return o=te.apply(void 0,[te.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 10:return l=[{}],[4,Hs(t)];case 11:return o=te.apply(void 0,[te.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 12:return p=[{}],[4,Ks(t)];case 13:return o=te.apply(void 0,[te.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 14:d=t.body,i=d.code||d.Code||i,o=te(te({},d),{name:""+i,message:d.message||d.Message||i,$fault:"client",$metadata:ra(f)}),e.label=15;case 15:return h=o.message||o.Message||i,o.message=h,delete o.Message,[2,Promise.reject(Object.assign(new Error(h),o))]}})})}(o,i)]:(n={$metadata:ra(o),__type:"GetUserEndpointsResponse",EndpointsResponse:void 0},[4,Ws(o.body,i)]);case 1:return r=e.sent(),n.EndpointsResponse=(t={__type:"EndpointsResponse",Item:void 0},void 0!==r.Item&&null!==r.Item&&(t.Item=(r.Item||[]).map(function(e){return s={__type:"EndpointResponse",Address:void 0,ApplicationId:void 0,Attributes:void 0,ChannelType:void 0,CohortId:void 0,CreationDate:void 0,Demographic:void 0,EffectiveDate:void 0,EndpointStatus:void 0,Id:void 0,Location:void 0,Metrics:void 0,OptOut:void 0,RequestId:void 0,User:void 0},void 0!==(t=e).Address&&null!==t.Address&&(s.Address=t.Address),void 0!==t.ApplicationId&&null!==t.ApplicationId&&(s.ApplicationId=t.ApplicationId),void 0!==t.Attributes&&null!==t.Attributes&&(s.Attributes=ta(t.Attributes)),void 0!==t.ChannelType&&null!==t.ChannelType&&(s.ChannelType=t.ChannelType),void 0!==t.CohortId&&null!==t.CohortId&&(s.CohortId=t.CohortId),void 0!==t.CreationDate&&null!==t.CreationDate&&(s.CreationDate=t.CreationDate),void 0!==t.Demographic&&null!==t.Demographic&&(s.Demographic=(n=t.Demographic,r={__type:"EndpointDemographic",AppVersion:void 0,Locale:void 0,Make:void 0,Model:void 0,ModelVersion:void 0,Platform:void 0,PlatformVersion:void 0,Timezone:void 0},void 0!==n.AppVersion&&null!==n.AppVersion&&(r.AppVersion=n.AppVersion),void 0!==n.Locale&&null!==n.Locale&&(r.Locale=n.Locale),void 0!==n.Make&&null!==n.Make&&(r.Make=n.Make),void 0!==n.Model&&null!==n.Model&&(r.Model=n.Model),void 0!==n.ModelVersion&&null!==n.ModelVersion&&(r.ModelVersion=n.ModelVersion),void 0!==n.Platform&&null!==n.Platform&&(r.Platform=n.Platform),void 0!==n.PlatformVersion&&null!==n.PlatformVersion&&(r.PlatformVersion=n.PlatformVersion),void 0!==n.Timezone&&null!==n.Timezone&&(r.Timezone=n.Timezone),r)),void 0!==t.EffectiveDate&&null!==t.EffectiveDate&&(s.EffectiveDate=t.EffectiveDate),void 0!==t.EndpointStatus&&null!==t.EndpointStatus&&(s.EndpointStatus=t.EndpointStatus),void 0!==t.Id&&null!==t.Id&&(s.Id=t.Id),void 0!==t.Location&&null!==t.Location&&(s.Location=(o=t.Location,i={__type:"EndpointLocation",City:void 0,Country:void 0,Latitude:void 0,Longitude:void 0,PostalCode:void 0,Region:void 0},void 0!==o.City&&null!==o.City&&(i.City=o.City),void 0!==o.Country&&null!==o.Country&&(i.Country=o.Country),void 0!==o.Latitude&&null!==o.Latitude&&(i.Latitude=o.Latitude),void 0!==o.Longitude&&null!==o.Longitude&&(i.Longitude=o.Longitude),void 0!==o.PostalCode&&null!==o.PostalCode&&(i.PostalCode=o.PostalCode),void 0!==o.Region&&null!==o.Region&&(i.Region=o.Region),i)),void 0!==t.Metrics&&null!==t.Metrics&&(s.Metrics=na(t.Metrics)),void 0!==t.OptOut&&null!==t.OptOut&&(s.OptOut=t.OptOut),void 0!==t.RequestId&&null!==t.RequestId&&(s.RequestId=t.RequestId),void 0!==t.User&&null!==t.User&&(s.User=function(e){var t={__type:"EndpointUser",UserAttributes:void 0,UserId:void 0};return void 0!==e.UserAttributes&&null!==e.UserAttributes&&(t.UserAttributes=ta(e.UserAttributes)),void 0!==e.UserId&&null!==e.UserId&&(t.UserId=e.UserId),t}(t.User)),s;var t,n,r,o,i,s})),t),[2,Promise.resolve(n)]}var t})})}function Ds(o,a){return ie(this,void 0,void 0,function(){var n,r;return se(this,function(e){switch(e.label){case 0:return 202!==o.statusCode&&400<=o.statusCode?[2,function(f,m){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h;return se(this,function(e){switch(e.label){case 0:return n=[te({},f)],r={},[4,Ws(f.body,m)];case 1:switch(t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=$s(f,t.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return s=[{}],[4,Bs(t)];case 3:return o=te.apply(void 0,[te.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 4:return a=[{}],[4,Vs(t)];case 5:return o=te.apply(void 0,[te.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 6:return u=[{}],[4,qs(t)];case 7:return o=te.apply(void 0,[te.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 8:return c=[{}],[4,zs(t)];case 9:return o=te.apply(void 0,[te.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 10:return l=[{}],[4,Hs(t)];case 11:return o=te.apply(void 0,[te.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 12:return p=[{}],[4,Ks(t)];case 13:return o=te.apply(void 0,[te.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 14:d=t.body,i=d.code||d.Code||i,o=te(te({},d),{name:""+i,message:d.message||d.Message||i,$fault:"client",$metadata:ra(f)}),e.label=15;case 15:return h=o.message||o.Message||i,o.message=h,delete o.Message,[2,Promise.reject(Object.assign(new Error(h),o))]}})})}(o,a)]:(n={$metadata:ra(o),__type:"PutEventsResponse",EventsResponse:void 0},[4,Ws(o.body,a)]);case 1:return r=e.sent(),n.EventsResponse=(t={__type:"EventsResponse",Results:void 0},void 0!==r.Results&&null!==r.Results&&(t.Results=(i=r.Results,s={},Object.keys(i).forEach(function(e){var t,n,r,o;s[e]=(t=i[e],o={__type:"ItemResponse",EndpointItemResponse:void 0,EventsItemResponse:void 0},void 0!==t.EndpointItemResponse&&null!==t.EndpointItemResponse&&(o.EndpointItemResponse=(n=t.EndpointItemResponse,r={__type:"EndpointItemResponse",Message:void 0,StatusCode:void 0},void 0!==n.Message&&null!==n.Message&&(r.Message=n.Message),void 0!==n.StatusCode&&null!==n.StatusCode&&(r.StatusCode=n.StatusCode),r)),void 0!==t.EventsItemResponse&&null!==t.EventsItemResponse&&(o.EventsItemResponse=function(r){var o={};return Object.keys(r).forEach(function(e){var t,n;o[e]=(t=r[e],n={__type:"EventItemResponse",Message:void 0,StatusCode:void 0},void 0!==t.Message&&null!==t.Message&&(n.Message=t.Message),void 0!==t.StatusCode&&null!==t.StatusCode&&(n.StatusCode=t.StatusCode),n)}),o}(t.EventsItemResponse)),o)}),s)),t),[2,Promise.resolve(n)]}var i,s,t})})}function Fs(i,s){return ie(this,void 0,void 0,function(){var r,o;return se(this,function(e){switch(e.label){case 0:return 202!==i.statusCode&&400<=i.statusCode?[2,function(f,m){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h;return se(this,function(e){switch(e.label){case 0:return n=[te({},f)],r={},[4,Ws(f.body,m)];case 1:switch(t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=$s(f,t.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return s=[{}],[4,Bs(t)];case 3:return o=te.apply(void 0,[te.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 4:return a=[{}],[4,Vs(t)];case 5:return o=te.apply(void 0,[te.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 6:return u=[{}],[4,qs(t)];case 7:return o=te.apply(void 0,[te.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 8:return c=[{}],[4,zs(t)];case 9:return o=te.apply(void 0,[te.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 10:return l=[{}],[4,Hs(t)];case 11:return o=te.apply(void 0,[te.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 12:return p=[{}],[4,Ks(t)];case 13:return o=te.apply(void 0,[te.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:ra(f)}]),[3,15];case 14:d=t.body,i=d.code||d.Code||i,o=te(te({},d),{name:""+i,message:d.message||d.Message||i,$fault:"client",$metadata:ra(f)}),e.label=15;case 15:return h=o.message||o.Message||i,o.message=h,delete o.Message,[2,Promise.reject(Object.assign(new Error(h),o))]}})})}(i,s)]:(r={$metadata:ra(i),__type:"UpdateEndpointResponse",MessageBody:void 0},[4,Ws(i.body,s)]);case 1:return o=e.sent(),r.MessageBody=(n={__type:"MessageBody",Message:void 0,RequestID:void 0},void 0!==(t=o).Message&&null!==t.Message&&(n.Message=t.Message),void 0!==t.RequestID&&null!==t.RequestID&&(n.RequestID=t.RequestID),n),[2,Promise.resolve(r)]}var t,n})})}function Ls(e){var t={};return void 0!==e.AppVersion&&(t.AppVersion=e.AppVersion),void 0!==e.Locale&&(t.Locale=e.Locale),void 0!==e.Make&&(t.Make=e.Make),void 0!==e.Model&&(t.Model=e.Model),void 0!==e.ModelVersion&&(t.ModelVersion=e.ModelVersion),void 0!==e.Platform&&(t.Platform=e.Platform),void 0!==e.PlatformVersion&&(t.PlatformVersion=e.PlatformVersion),void 0!==e.Timezone&&(t.Timezone=e.Timezone),t}function js(e){var t={};return void 0!==e.City&&(t.City=e.City),void 0!==e.Country&&(t.Country=e.Country),void 0!==e.Latitude&&(t.Latitude=e.Latitude),void 0!==e.Longitude&&(t.Longitude=e.Longitude),void 0!==e.PostalCode&&(t.PostalCode=e.PostalCode),void 0!==e.Region&&(t.Region=e.Region),t}function Bs(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:ra(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})}function Vs(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"ForbiddenException",$fault:"client",$metadata:ra(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})}function qs(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"InternalServerErrorException",$fault:"server",$metadata:ra(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})}function zs(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:ra(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})}function Hs(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:ra(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})}function Ks(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"TooManyRequestsException",$fault:"client",$metadata:ra(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})}function Gs(e,t){var n={};return void 0!==e.UserAttributes&&(n.UserAttributes=Js(e.UserAttributes)),void 0!==e.UserId&&(n.UserId=e.UserId),n}function Ws(e,t){return o=n=t,((r=e)instanceof Uint8Array?Promise.resolve(r):o.streamCollector(r)||Promise.resolve(new Uint8Array)).then(function(e){return n.utf8Encoder(e)}).then(function(e){return e.length?JSON.parse(e):{}});var n,r,o}function $s(e,t){function n(e){var t=e;return 0<=t.indexOf(":")&&(t=t.split(":")[0]),0<=t.indexOf("#")&&(t=t.split("#")[1]),t}var r,o=(r=e.headers,Object.keys(r).find(function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""}var Ys,Js=function(t,e){var n={};return Object.keys(t).forEach(function(e){n[e]=function(e){var t,n,r=[];try{for(var o=ae(e),i=o.next();!i.done;i=o.next()){var s=i.value;r.push(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(t[e])}),n},Zs=function(t,e){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n},Qs=function(t,e){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n},Xs=function(e,t){var n={};return void 0!==e.Address&&(n.Address=e.Address),void 0!==e.Attributes&&(n.Attributes=Js(e.Attributes)),void 0!==e.ChannelType&&(n.ChannelType=e.ChannelType),void 0!==e.Demographic&&(n.Demographic=Ls(e.Demographic)),void 0!==e.EffectiveDate&&(n.EffectiveDate=e.EffectiveDate),void 0!==e.EndpointStatus&&(n.EndpointStatus=e.EndpointStatus),void 0!==e.Location&&(n.Location=js(e.Location)),void 0!==e.Metrics&&(n.Metrics=Zs(e.Metrics)),void 0!==e.OptOut&&(n.OptOut=e.OptOut),void 0!==e.RequestId&&(n.RequestId=e.RequestId),void 0!==e.User&&(n.User=Gs(e.User)),n},ea=function(e,t){var n={};return void 0!==e.Duration&&(n.Duration=e.Duration),void 0!==e.Id&&(n.Id=e.Id),void 0!==e.StartTimestamp&&(n.StartTimestamp=e.StartTimestamp),void 0!==e.StopTimestamp&&(n.StopTimestamp=e.StopTimestamp),n},ta=function(t,e){var n={};return Object.keys(t).forEach(function(e){n[e]=(t[e]||[]).map(function(e){return e})}),n},na=function(t,e){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n},ra=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},oa=(ee(ia,Ys=w.Command),ia.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},ia.prototype.serialize=function(e,t){return function(o,i){return ie(this,void 0,void 0,function(){var t,n,r;return se(this,function(e){if(t={"Content-Type":""},n="/v1/apps/{ApplicationId}/users/{UserId}",void 0===o.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((r=o.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(n=n.replace("{ApplicationId}",w.extendedEncodeURIComponent(r)),void 0===o.UserId)throw new Error("No value provided for input HTTP label: UserId.");if((r=o.UserId).length<=0)throw new Error("Empty value provided for input HTTP label: UserId.");return n=n.replace("{UserId}",w.extendedEncodeURIComponent(r)),[2,new _.HttpRequest(te(te({},i.endpoint),{protocol:"https",method:"GET",headers:t,path:n,body:void 0}))]})})}(e,t)},ia.prototype.deserialize=function(e,t){return Ms(e,t)},ia);function ia(e){var t=Ys.call(this)||this;return t.input=e,t}var sa,aa=(ee(ua,sa=w.Command),ua.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},ua.prototype.serialize=function(e,t){return Us(e,t)},ua.prototype.deserialize=function(e,t){return Ds(e,t)},ua);function ua(e){var t=sa.call(this)||this;return t.input=e,t}var ca,la=(ee(pa,ca=w.Command),pa.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},pa.prototype.serialize=function(e,t){return Rs(e,t)},pa.prototype.deserialize=function(e,t){return Fs(e,t)},pa);function pa(e){var t=ca.call(this)||this;return t.input=e,t}var da={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new x.StorageHelper).getStorage()};function ha(e){for(var t=0,t=e.length,n=e.length;0<=n;--n){var r=e.charCodeAt(n);127<r&&r<=2047?t+=1:2047<r&&r<=65535&&(t+=2),56320<=r&&r<=57343&&--n}return t}function fa(){return(new Date).getTime()}function ma(e){return Number.isInteger?Number.isInteger(e):"number"==typeof(t=e)&&isFinite(t)&&Math.floor(t)===t;var t}var ga=new x.ConsoleLogger("StorageCache"),ya=(va.prototype.getModuleName=function(){return"Cache"},va.prototype.checkConfig=function(){ma(this.config.capacityInBytes)||(ga.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=da.capacityInBytes),ma(this.config.itemMaxSize)||(ga.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=da.itemMaxSize),ma(this.config.defaultTTL)||(ga.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=da.defaultTTL),ma(this.config.defaultPriority)||(ga.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=da.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(ga.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=da.itemMaxSize),(5<this.config.defaultPriority||this.config.defaultPriority<1)&&(ga.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=da.defaultPriority),(1<Number(this.config.warningThreshold)||Number(this.config.warningThreshold)<0)&&(ga.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=da.warningThreshold),5242880<this.config.capacityInBytes&&(ga.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=da.capacityInBytes)},va.prototype.fillCacheItem=function(e,t,n){var r={key:e,data:t,timestamp:fa(),visitedTime:fa(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0};return r.byteSize=ha(JSON.stringify(r)),r.byteSize=ha(JSON.stringify(r)),r},va.prototype.configure=function(e){return e&&(e.keyPrefix&&ga.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig()),this.config},va);function va(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}var ba,wa,_a=(ba=function(e,t){return(ba=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ba(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Sa=new x.ConsoleLogger("Cache");function Ca(e){var t=this,n=e?Object.assign({},da,e):da;return(t=wa.call(this,n)||this).config.storage=n.storage,t.getItem=t.getItem.bind(t),t.setItem=t.setItem.bind(t),t.removeItem=t.removeItem.bind(t),t}var Ea=(_a(Ca,wa=ya),Ca.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},Ca.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},Ca.prototype._refreshItem=function(e,t){return e.visitedTime=fa(),this.config.storage.setItem(t,JSON.stringify(e)),e},Ca.prototype._isExpired=function(e){var t=this.config.storage.getItem(e),n=JSON.parse(t);return fa()>=n.expires},Ca.prototype._removeItem=function(e,t){var n=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(n),this.config.storage.removeItem(e)},Ca.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),Sa.error("Failed to set item "+e)}},Ca.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,n=(1-this.config.warningThreshold)*this.config.capacityInBytes;return n<t?t:n},Ca.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},Ca.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},Ca.prototype._popOutItems=function(e,t){for(var n=[],r=t,o=0;o<e.length;o+=1){var i,s=this.config.storage.getItem(e[o]);null!=s&&(i=JSON.parse(s),n.push(i))}for(n.sort(function(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&e.visitedTime<t.visitedTime?-1:1}),o=0;o<n.length;o+=1)if(this._removeItem(n[o].key,n[o].byteSize),(r-=n[o].byteSize)<=0)return},Ca.prototype.setItem=function(e,t,n){Sa.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t){var o={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+fa()};if(o.priority<1||5<o.priority)Sa.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var i=this.fillCacheItem(r,t,o);if(i.byteSize>this.config.itemMaxSize)Sa.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var s,a,u=this.config.storage.getItem(r);u&&this._removeItem(r,JSON.parse(u).byteSize),this._isCacheFull(i.byteSize)&&(s=this._findValidKeys(),this._isCacheFull(i.byteSize)&&(a=this._sizeToPop(i.byteSize),this._popOutItems(s,a))),this._setItem(r,i)}catch(e){Sa.warn("setItem failed! "+e)}}}else Sa.warn("The value of item should not be undefined!");else Sa.warn("Invalid key: should not be empty or 'CurSize'")},Ca.prototype.getItem=function(e,t){Sa.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return Sa.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var o=JSON.parse(n);return(o=this._refreshItem(o,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){var i=t.callback();return null!==i&&this.setItem(e,i,t),i}return null}catch(e){return Sa.warn("getItem failed! "+e),null}},Ca.prototype.removeItem=function(e){Sa.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(e){Sa.warn("removeItem failed! "+e)}},Ca.prototype.clear=function(){Sa.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){Sa.warn("clear failed! "+e)}},Ca.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},Ca.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},Ca.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==da.keyPrefix||(Sa.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=fa.toString()),new Ca(e)},new Ca);x.Amplify.register(Ea);function Ia(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var Aa=new x.ConsoleLogger("EventsBuffer"),Pa=[429,500],ka=[202],Oa=(Ta.prototype.push=function(e){var t;if(this._buffer>this._config.bufferSize)return Aa.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var n=((t={})[e.params.event.eventId]=e,t);this._buffer.push(n)},Ta.prototype.pause=function(){this._pause=!0},Ta.prototype.resume=function(){this._pause=!1},Ta.prototype.updateClient=function(e){this._client=e},Ta.prototype.flush=function(){this._flush=!0},Ta.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},Ta.prototype._sendBatch=function(){var e,t,n,r=this._buffer.length;this._flush&&!r&&clearInterval(this._interval),!this._pause&&r&&(e=this._config.flushSize,t=Math.min(e,r),n=this._buffer.splice(0,t),this._putEvents(n))},Ta.prototype._putEvents=function(h){return e=this,u=function(){var t,n,r,o,i,s,a,u,c,l,p,e;return s=this,a=function(e){switch(e.label){case 0:t=this._bufferToMap(h),n=this._generateBatchEventParams(t),e.label=1;case 1:return e.trys.push([1,3,,4]),r=new aa(n),[4,this._client.send(r)];case 2:return o=e.sent(),this._processPutEventsSuccessResponse(o,t),[3,4];case 3:return i=e.sent(),[2,this._handlePutEventsFailure(i,t)];case 4:return[2]}},p={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},e={next:d(0),throw:d(1),return:d(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function d(t){return function(e){return function(t){if(u)throw new TypeError("Generator is already executing.");for(;p;)try{if(u=1,c&&(l=2&t[0]?c.return:t[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,t[1])).done)return l;switch(c=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return p.label++,{value:t[1],done:!1};case 5:p.label++,c=t[1],t=[0];continue;case 7:t=p.ops.pop(),p.trys.pop();continue;default:if(!(l=0<(l=p.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){p=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){p.label=t[1];break}if(6===t[0]&&p.label<l[1]){p.label=l[1],l=t;break}if(l&&p.label<l[2]){p.label=l[2],p.ops.push(t);break}l[2]&&p.ops.pop(),p.trys.pop();continue}t=a.call(s,p)}catch(e){t=[6,e],c=0}finally{u=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},Ta.prototype._generateBatchEventParams=function(e){var h={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach(function(e){var t=e.params,n=t.event,r=t.timestamp,o=t.config,i=n.name,s=n.attributes,a=n.metrics,u=n.eventId,c=n.session,l=o.appId,p=o.endpointId,d=h.EventsRequest.BatchItem;h.ApplicationId=h.ApplicationId||l,d[p]||(d[p]={Endpoint:{},Events:{}}),d[p].Events[u]={EventType:i,Timestamp:new Date(r).toISOString(),Attributes:s,Metrics:a,Session:c}}),h},Ta.prototype._handlePutEventsFailure=function(e,t){Aa.debug("_putEvents Failed: ",e);var n,r=e.$metadata&&e.$metadata.httpStatusCode;Pa.includes(r)&&(n=Object.values(t),this._retry(n))},Ta.prototype._processPutEventsSuccessResponse=function(e,d){var t=e.EventsResponse.Results,h=[];Object.entries(t).forEach(function(e){var t=Ia(e,2),p=t[0],n=t[1].EventsItemResponse;Object.entries(n).forEach(function(e){var t,n,r=Ia(e,2),o=r[0],i=r[1],s=i.StatusCode,a=i.Message,u=d[o],c={EventsResponse:{Results:((t={})[p]={EventsItemResponse:((n={})[o]={StatusCode:s,Message:a},n)},t)}};if(ka.includes(s))u.handlers.resolve(c);else{if(!Pa.includes(s)){var l=u.params.event.name;return Aa.error("event "+o+" : "+l+" failed with error: "+a),u.handlers.reject(c)}h.push(u)}})}),h.length&&this._retry(h)},Ta.prototype._retry=function(e){var t,s=[];e.forEach(function(e){var t,n=e.params,r=n.event,o=r.eventId,i=r.name;if(0<n.resendLimit--)return Aa.debug("resending event "+o+" : "+i+" with "+n.resendLimit+" retry attempts remaining"),void s.push(((t={})[o]=e,t));Aa.debug("no retry attempts remaining for event "+o+" : "+i)}),(t=this._buffer).unshift.apply(t,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ia(arguments[t]));return e}(s))},Ta.prototype._bufferToMap=function(e){return e.reduce(function(e,t){var n=Ia(Object.entries(t),1),r=Ia(n[0],2),o=r[0],i=r[1];return e[o]=i,e},{})},Ta);function Ta(e,t){this._pause=!1,this._flush=!1,Aa.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}function xa(e,t){x.Hub.dispatch("analytics",{event:e,data:t},"Analytics",Da)}function Na(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Ua(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Ra(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}var Ma=function(){return(Ma=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Da="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Fa=new x.ConsoleLogger("AWSPinpointProvider"),La=[429,500],ja=[202],Ba="_update_endpoint",Va="_session.stop",qa="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,za=(Ha.prototype.getCategory=function(){return Ha.category},Ha.prototype.getProviderName=function(){return Ha.providerName},Ha.prototype.configure=function(e){var t=this;Fa.debug("configure Analytics",e);var n,r=e||{};return this._config=Object.assign({},this._config,r),this._config.appId&&!this._config.disabled?this._config.endpointId?xa("pinpointProvider_configured",null):(n=this.getProviderName()+"_"+this._config.appId,this._getEndpointId(n).then(function(e){Fa.debug("setting endpoint id from the cache",e),t._config.endpointId=e,xa("pinpointProvider_configured",null)}).catch(function(e){Fa.debug("Failed to generate endpointId",e)})):this._flushBuffer(),this._config},Ha.prototype.record=function(r,o){return Na(this,void 0,void 0,function(){var t,n;return Ua(this,function(e){switch(e.label){case 0:return Fa.debug("_public record",r),[4,this._getCredentials()];case 1:return(t=e.sent())&&this._config.appId&&this._config.region?(this._initClients(t),n=(new Date).getTime(),this._generateSession(r),r.event.eventId=C.v1(),Object.assign(r,{timestamp:n,config:this._config}),r.event.immediate?[2,this._send(r,o)]:(this._putToBuffer(r,o),[2])):(Fa.debug("cannot send events without credentials, applicationId or region"),[2,o.reject(new Error("No credentials, applicationId or region"))])}})})},Ha.prototype._sendEndpointUpdate=function(n){return Na(this,void 0,void 0,function(){var t;return Ua(this,function(e){switch(e.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(n),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(n)]);case 1:return e.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}})})},Ha.prototype._putToBuffer=function(e,t){e.event.name!==Ba?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},Ha.prototype._generateSession=function(e){this._sessionId=this._sessionId||C.v1();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=C.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case Va:var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||C.v1(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||C.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},Ha.prototype._send=function(t,n){return Na(this,void 0,void 0,function(){return Ua(this,function(e){switch(t.event.name){case Ba:return[2,this._updateEndpoint({params:t,handlers:n})];case Va:return[2,this._pinpointSendStopSession(t,n)];default:return[2,this._pinpointPutEvents(t,n)]}})})},Ha.prototype._generateBatchItemContext=function(e){var t,n=e.event,r=e.timestamp,o=e.config,i=n.name,s=n.attributes,a=n.metrics,u=n.eventId,c=n.session,l=o.appId,p=o.endpointId,d={ApplicationId:l,EventsRequest:{BatchItem:{}}},h={Endpoint:{}};return h.Events=((t={})[u]={EventType:i,Timestamp:new Date(r).toISOString(),Attributes:s,Metrics:a,Session:c},t),d.EventsRequest.BatchItem[p]=h,d},Ha.prototype._pinpointPutEvents=function(l,p){return Na(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return Ua(this,function(e){switch(e.label){case 0:t=l.event.eventId,n=l.config.endpointId,r=this._generateBatchItemContext(l),o=new aa(r),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.pinpointClient.send(o)];case 2:return i=e.sent(),s=i.EventsResponse.Results[n].EventsItemResponse[t],a=s.StatusCode,u=s.Message,ja.includes(a)?(Fa.debug("record event success. ",i),[2,p.resolve(i)]):La.includes(a)?(this._retry(l,p),[3,4]):(Fa.error("Event "+t+" is not accepted, the error is "+u),[2,p.reject(i)]);case 3:return c=e.sent(),this._eventError(c),[2,p.reject(c)];case 4:return[2]}})})},Ha.prototype._pinpointSendStopSession=function(e,t){if(qa){var n=this._generateBatchItemContext(e),r=this._config.region,o=n.ApplicationId,i=n.EventsRequest,s={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},a="https://pinpoint."+r+".amazonaws.com/v1/apps/"+o+"/events/legacy",u=JSON.stringify(i),c={url:a,body:u,method:"POST"},l={region:r,service:"mobiletargeting"},p=x.Signer.signUrl(c,s,l,null);return navigator.sendBeacon(p,u)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},Ha.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,0<e.resendLimit--?(Fa.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):Fa.debug("retry times used up for event "+e.eventName)},Ha.prototype._updateEndpoint=function(h){return Na(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d;return Ua(this,function(e){switch(e.label){case 0:t=h.params,n=h.handlers,r=t.config,o=t.event,i=r.appId,s=r.endpointId,a=this._endpointRequest(r,x.JS.transferKeyToLowerCase(o,[],["attributes","userAttributes","Attributes","UserAttributes"])),u={ApplicationId:i,EndpointId:s,EndpointRequest:a},e.label=1;case 1:return e.trys.push([1,3,,4]),c=new la(u),[4,this.pinpointClient.send(c)];case 2:return l=e.sent(),Fa.debug("updateEndpoint success",l),this._endpointGenerating=!1,this._resumeBuffer(),n.resolve(l),[2];case 3:return p=e.sent(),d={err:p,update_params:u,endpointObject:h},[2,this._handleEndpointUpdateFailure(d)];case 4:return[2]}})})},Ha.prototype._handleEndpointUpdateFailure=function(o){return Na(this,void 0,void 0,function(){var t,n,r;return Ua(this,function(e){switch(t=o.err,n=o.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,Fa.debug("updateEndpoint failed",t),r){case 400:return[2,this._handleEndpointUpdateBadRequest(o)];case 403:return[2,this._handleEndpointUpdateForbidden(o)];default:if(La.includes(r))return[2,this._retryEndpointUpdate(n,!0)];n.handlers.reject(t)}return[2]})})},Ha.prototype._handleEndpointUpdateBadRequest=function(u){return Na(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return Ua(this,function(e){switch(e.label){case 0:if(t=u.err,n=u.update_params,r=u.endpointObject,o=t.message,i=n.ApplicationId,s=n.EndpointRequest,!String(o).startsWith("Exceeded maximum endpoint per user count"))return[2,r.handlers.reject(t)];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._removeUnusedEndpoints(i,s.User.UserId)];case 2:return e.sent(),Fa.debug("Removed unused endpoints successfully"),this._retryEndpointUpdate(r),[3,4];case 3:return a=e.sent(),Fa.warn("Failed to remove unused endpoints with error: "+a),Fa.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:GetUserEndpoints" in order to get endpoints info of the user'),[2,r.handlers.reject(a)];case 4:return[2]}})})},Ha.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,o=t.retryable;if("ExpiredTokenException"!==r&&!o)return n.handlers.reject(t);this._retryEndpointUpdate(n)},Ha.prototype._retryEndpointUpdate=function(e,t){Fa.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,0<n.resendLimit--)return Fa.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));Fa.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&Fa.error("Initial endpoint update failed. ")},Ha.prototype._removeUnusedEndpoints=function(h,f){return Na(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d;return Ua(this,function(e){switch(e.label){case 0:return e.trys.push([0,6,,7]),t=new oa({ApplicationId:h,UserId:f}),[4,this.pinpointClient.send(t)];case 1:for(n=e.sent(),r=n.EndpointsResponse.Item,Fa.debug("get endpoints associated with the userId: "+f+" with data",r),o=r[0],i=1;i<r.length&&(s=Date.parse(o.EffectiveDate),a=Date.parse(r[i].EffectiveDate),!isNaN(s));i++){if(isNaN(a)){o=r[i];break}a<s&&(o=r[i])}u={ApplicationId:h,EndpointId:o.Id,EndpointRequest:{User:{UserId:""}}},e.label=2;case 2:return e.trys.push([2,4,,5]),c=new la(u),[4,this.pinpointClient.send(c)];case 3:return l=e.sent(),Fa.debug("The old endpoint is updated with an empty string for user id"),[2,l];case 4:throw p=e.sent(),Fa.debug("Failed to update the endpoint",p),p;case 5:return[3,7];case 6:throw d=e.sent(),Fa.debug("Failed to get endpoints associated with the userId: "+f+" with error",d),d;case 7:return[2]}})})},Ha.prototype._initClients=function(r){return Na(this,void 0,void 0,function(){var t,n;return Ua(this,function(e){return Fa.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===r.sessionToken&&this._config.credentials.identityId===r.identityId?Fa.debug("no change for aws credentials, directly return from init"):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=r,n=this._config.region,Fa.debug("init clients with credentials",r),this.pinpointClient=new xs({region:n,credentials:r,customUserAgent:x.getAmplifyUserAgent()}),this._bufferExists()&&t===r.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq()),[2]})})},Ha.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof Oa},Ha.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new Oa(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},Ha.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},Ha.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},Ha.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},Ha.prototype._customizePinpointClientReq=function(){},Ha.prototype._getEndpointId=function(n){return Na(this,void 0,void 0,function(){var t;return Ua(this,function(e){switch(e.label){case 0:return[4,Ea.getItem(n)];case 1:return t=e.sent(),Fa.debug("endpointId from cache",t,"type",typeof t),t||(t=C.v1(),Ea.setItem(n,t)),[2,t]}})})},Ha.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},o=e.clientContext||{},i=e.endpoint||{},s={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},a=Ra(o,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"]),u=t.address?"android"===r.platform?"GCM":"APNS":void 0,c=Ma(Ma(Ma({channelType:u,requestId:C.v1(),effectiveDate:(new Date).toISOString()},i),t),{attributes:Ma(Ma({},i.attributes),t.attributes),demographic:Ma(Ma(Ma(Ma({},s),a),i.demographic),t.demographic),location:Ma(Ma({},i.location),t.location),metrics:Ma(Ma({},i.metrics),t.metrics),user:{userId:t.userId||i.userId||n.identityId,userAttributes:Ma(Ma({},i.userAttributes),t.userAttributes)}}),l=(c.userId,c.userAttributes,c.name,c.session,c.eventId,c.immediate,Ra(c,["userId","userAttributes","name","session","eventId","immediate"]));return x.JS.transferKeyToUpperCase(l,[],["metrics","userAttributes","attributes"])},Ha.prototype._eventError=function(e){Fa.error("record event failed.",e),Fa.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},Ha.prototype._getCredentials=function(){return Na(this,void 0,void 0,function(){var t,n;return Ua(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,x.Credentials.get()];case 1:return(t=e.sent())?(Fa.debug("set credentials for analytics",t),[2,x.Credentials.shear(t)]):[2,null];case 2:return n=e.sent(),Fa.debug("ensure credentials error",n),[2,null];case 3:return[2]}})})},Ha.category="Analytics",Ha.providerName="AWSPinpoint",Ha);function Ha(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=x.ClientDevice.clientInfo()}function Ka(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(arguments[t]));return e}var Ga=[],Wa=($a.add=function(e,t,n){Ya(e,t).set(n)},$a.remove=function(e,t){Ya(e,t).remove()},$a.prototype.set=function(n){var r=this;this.context[this.methodName]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r._originalMethod.apply(r,Ka(e)))}},$a.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},$a);function $a(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}function Ya(t,n){var e=Ga.filter(function(e){return e.context===t&&e.methodName===n})[0];return e||(e=new Wa(t,n),Ga.push(e)),e}function Ja(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Za(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Qa=new x.ConsoleLogger("PageViewTracker"),Xa="aws-amplify-analytics-prevUrl",eu={enable:!1,provider:"AWSPinpoint",getUrl:function(){return x.JS.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},tu=(nu.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},nu.prototype._isSameUrl=function(){return sessionStorage.getItem(Xa)===this._config.getUrl()&&(Qa.debug("the url is same"),!0)},nu.prototype._pageViewTrackDefault=function(){return Ja(this,void 0,void 0,function(){var t,n,r;return Za(this,function(e){switch(e.label){case 0:return x.JS.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Qa.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return r=Object.assign({url:t},n),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch(function(e){Qa.debug("Failed to record the page view event",e)}),sessionStorage.setItem(Xa,t)),[2]}})})},nu.prototype._trackFunc=function(){return Ja(this,void 0,void 0,function(){var t,n,r;return Za(this,function(e){switch(e.label){case 0:return x.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Qa.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return r=Object.assign({url:t},n),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch(function(e){Qa.debug("Failed to record the page view event",e)}),sessionStorage.setItem(Xa,t)),[2]}})})},nu.prototype._pageViewTrackSPA=function(){x.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(Wa.add(history,"pushState",this._trackFunc),Wa.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(Wa.remove(history,"pushState"),Wa.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):Qa.debug("not in the supported web enviroment")},nu);function nu(e,t){Qa.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},eu,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}var ru=x.JS.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null,ou=ru?ru.matches||ru.matchesSelector||ru.webkitMatchesSelector||ru.mozMatchesSelector||ru.msMatchesSelector||ru.oMatchesSelector:null;function iu(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||su(e,t);if("length"in t)for(var n=0,r=void 0;r=t[n];n++)if(e===r||su(e,r))return 1}}function su(e,t){if("string"!=typeof t)return!1;if(ou)return ou.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0,o=void 0;o=n[r];r++)if(o===e)return!0;return!1}function au(e,t,i,s,a){function n(e){var t;if(a.composed&&"function"==typeof e.composedPath)for(var n=e.composedPath(),r=0,o=void 0;o=n[r];r++)1===o.nodeType&&iu(o,i)&&(t=o);else t=function(n,e,t){if(void 0===t&&(t=!1),n&&1===n.nodeType&&e)for(var r,o=(t?[n]:[]).concat(function(){for(var e=[],t=n;t&&t.parentNode&&1===t.parentNode.nodeType;)t=t.parentNode,e.push(t);return e}()),i=0;r=o[i];i++)if(iu(r,e))return r}(e.target,i,!0);t&&s.call(t,e,t)}return void 0===a&&(a={}),e.addEventListener(t,n,a.useCapture),{destroy:function(){e.removeEventListener(t,n,a.useCapture)}}}var uu=new x.ConsoleLogger("EventTracker"),cu={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},lu=(pu.prototype.configure=function(e){var t,n=this;return Object.assign(this._config,e),this._config.enable?this._config.enable&&0===Object.keys(this._delegates).length&&(t="["+this._config.selectorPrefix+"on]",this._config.events.forEach(function(e){n._delegates[e]=au(document,e,t,n._trackFunc,{composed:!0,useCapture:!0})})):(Object.keys(this._delegates).forEach(function(e){"function"==typeof n._delegates[e].destroy&&n._delegates[e].destroy()}),this._delegates={}),this._config},pu.prototype._trackFunc=function(f,m){return e=this,u=function(){var n,t,r,o,i,s,a,u,c,l,p,d,e;return a=this,u=function(e){switch(e.label){case 0:return n={},t=m.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),r=m.getAttribute(this._config.selectorPrefix+"name"),(o=m.getAttribute(this._config.selectorPrefix+"attrs"))&&o.split(/\s*,\s*/).forEach(function(e){var t=e.trim().split(/\s*:\s*/);n[t[0]]=t[1]}),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return i=e.sent(),[3,3];case 2:i=this._config.attributes,e.label=3;case 3:return s=Object.assign({type:f.type,target:f.target.localName+" with id "+f.target.id},i,n),uu.debug("events needed to be recorded",t),uu.debug("attributes needed to be attached",n),t.indexOf(f.type)<0?uu.debug("event "+f.type+" is not selected to be recorded"):this._tracker({name:r||"event",attributes:s},this._config.provider).catch(function(e){uu.debug("Failed to record the "+f.type+" event', "+e)}),[2]}},d={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]},e={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function h(t){return function(e){return function(t){if(c)throw new TypeError("Generator is already executing.");for(;d;)try{if(c=1,l&&(p=2&t[0]?l.return:t[0]?l.throw||((p=l.return)&&p.call(l),0):l.next)&&!(p=p.call(l,t[1])).done)return p;switch(l=0,p&&(t=[2&t[0],p.value]),t[0]){case 0:case 1:p=t;break;case 4:return d.label++,{value:t[1],done:!1};case 5:d.label++,l=t[1],t=[0];continue;case 7:t=d.ops.pop(),d.trys.pop();continue;default:if(!(p=0<(p=d.trys).length&&p[p.length-1])&&(6===t[0]||2===t[0])){d=0;continue}if(3===t[0]&&(!p||t[1]>p[0]&&t[1]<p[3])){d.label=t[1];break}if(6===t[0]&&d.label<p[1]){d.label=p[1],p=t;break}if(p&&d.label<p[2]){d.label=p[2],d.ops.push(t);break}p[2]&&d.ops.pop(),d.trys.pop();continue}t=u.call(a,d)}catch(e){t=[6,e],l=0}finally{c=p=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},pu);function pu(e,t){x.JS.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},cu,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),uu.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):uu.debug("not in the supported web environment")}function du(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function hu(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var fu=new x.ConsoleLogger("SessionTracker"),mu={enable:!1,provider:"AWSPinpoint"},gu=!1,yu=(vu.prototype._envCheck=function(){if(!x.JS.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return fu.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return fu.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},vu.prototype._trackFunc=function(){return du(this,void 0,void 0,function(){var t,n;return hu(this,function(e){switch(e.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return n=Object.assign({},t),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:n},this._config.provider).catch(function(e){fu.debug("record session stop event failed.",e)}):this._tracker({name:"_session.start",attributes:n},this._config.provider).catch(function(e){fu.debug("record session start event failed.",e)}),[2]}})})},vu.prototype._trackBeforeUnload=function(e){var n=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then(function(e){var t=Object.assign({},e);n._tracker({name:"_session.stop",attributes:t,immediate:!0},n._config.provider).catch(function(e){fu.debug("record session stop event failed.",e)})})},vu.prototype._sendInitialEvent=function(){return du(this,void 0,void 0,function(){var t,n;return hu(this,function(e){switch(e.label){case 0:return gu?(fu.debug("the start session has been sent when the page is loaded"),[2]):(gu=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return n=Object.assign({},t),this._tracker({name:"_session.start",attributes:n},this._config.provider).catch(function(e){fu.debug("record session start event failed.",e)}),[2]}})})},vu.prototype.configure=function(e){return this._envCheck()&&(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1)),this._config},vu);function vu(e,t){this._config=Object.assign({},mu,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}function bu(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function wu(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var _u=function(){return(_u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Su=new x.ConsoleLogger("AnalyticsClass"),Cu="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Eu={pageView:tu,event:lu,session:yu},Iu=null,Au=(Pu.prototype.getModuleName=function(){return"Analytics"},Pu.prototype.configure=function(e){var n=this;if(!e)return this._config;Su.debug("configure Analytics",e);var t=x.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Analytics,e),this._config.disabled&&(this._disabled=!0),this._pluggables.forEach(function(e){var t="AWSPinpoint"!==e.getProviderName()||n._config.AWSPinpoint?n._config[e.getProviderName()]:n._config;e.configure(_u({disabled:n._config.disabled},t))}),0===this._pluggables.length&&this.addPluggable(new za),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),x.Hub.dispatch("analytics",{event:"configured",data:null,message:"The Analytics category has been configured successfully"},"Analytics",Cu),Su.debug("current configuration",this._config),this._config},Pu.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,n=_u({disabled:this._config.disabled},t);return e.configure(n),n}},Pu.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return Su.debug("No plugin found with providerName",e),null},Pu.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;return t===this._pluggables.length?void Su.debug("No plugin found with providerName",e):void this._pluggables.splice(t,t+1)},Pu.prototype.disable=function(){this._disabled=!0},Pu.prototype.enable=function(){this._disabled=!1},Pu.prototype.startSession=function(n){return bu(this,void 0,void 0,function(){var t;return wu(this,function(e){return t={event:{name:"_session.start"},provider:n},[2,this._sendEvent(t)]})})},Pu.prototype.stopSession=function(n){return bu(this,void 0,void 0,function(){var t;return wu(this,function(e){return t={event:{name:"_session.stop"},provider:n},[2,this._sendEvent(t)]})})},Pu.prototype.record=function(n,r,o){return bu(this,void 0,void 0,function(){var t;return wu(this,function(e){return t="string"==typeof n?{event:{name:n,attributes:r,metrics:o},provider:"AWSPinpoint"}:{event:n,provider:r},[2,this._sendEvent(t)]})})},Pu.prototype.updateEndpoint=function(n,r){return bu(this,void 0,void 0,function(){var t;return wu(this,function(e){return t=_u(_u({},n),{name:"_update_endpoint"}),[2,this.record(t,r)]})})},Pu.prototype._sendEvent=function(r){var e=this;if(this._disabled)return Su.debug("Analytics has been disabled"),Promise.resolve();var o=r.provider?r.provider:"AWSPinpoint";return new Promise(function(t,n){e._pluggables.forEach(function(e){e.getProviderName()===o&&e.record(r,{resolve:t,reject:n})})})},Pu.prototype.autoTrack=function(e,t){var n;Eu[e]?("session"===e&&(this._config.autoSessionRecord=t.enable),(n=this._trackers[e])?n.configure(t):this._trackers[e]=new Eu[e](this.record,t)):Su.debug("invalid tracker type")},Pu);function Pu(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},(Iu=this).record=this.record.bind(this),x.Hub.listen("auth",Mu),x.Hub.listen("storage",Mu),x.Hub.listen("analytics",Mu),x.Amplify.register(this)}var ku,Ou,Tu,xu,Nu=!1,Uu=!1,Ru=!1,Mu=function(e){var t=e.channel,n=e.payload;switch(Su.debug("on hub capsule "+t,n),t){case"auth":Fu(n);break;case"storage":Du(n);break;case"analytics":Lu(n)}},Du=function(e){var t=e.data,n=t.attrs,r=t.metrics;n&&Ru&&Iu.record({name:"Storage",attributes:n,metrics:r}).catch(function(e){Su.debug("Failed to send the storage event automatically",e)})},Fu=function(e){var t=e.event;if(t){var n=function(n){return bu(void 0,void 0,void 0,function(){var t;return wu(this,function(e){switch(e.label){case 0:if(!Uu||!Ru)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Iu.record({name:"_userauth."+n})];case 2:return[2,e.sent()];case 3:return t=e.sent(),Su.debug("Failed to send the "+n+" event automatically",t),[3,4];case 4:return[2]}})})};switch(t){case"signIn":return n("sign_in");case"signUp":return n("sign_up");case"signOut":return n("sign_out");case"signIn_failure":return n("auth_fail");case"configured":Uu=!0,Ru&&ju()}}},Lu=function(e){var t=e.event;if(t)switch(t){case"pinpointProvider_configured":Ru=!0,Uu&&Ru&&ju()}},ju=function(){var e=Iu.configure();!Nu&&e.autoSessionRecord&&(Iu.updateEndpoint({immediate:!0}).catch(function(e){Su.debug("Failed to update the endpoint",e)}),Nu=!0),Iu.autoTrack("session",{enable:e.autoSessionRecord})},Bu=new Au;function Vu(t){return t&&["provider","customState"].find(function(e){return t.hasOwnProperty(e)})}function qu(e){return void 0!==e.redirectSignIn}(Ou=ku=ku||{}).Cognito="COGNITO",Ou.Google="Google",Ou.Facebook="Facebook",Ou.Amazon="LoginWithAmazon",(xu=Tu=Tu||{}).NoConfig="noConfig",xu.MissingAuthConfig="missingAuthConfig",xu.EmptyUsername="emptyUsername",xu.InvalidUsername="invalidUsername",xu.EmptyPassword="emptyPassword",xu.EmptyCode="emptyCode",xu.SignUpError="signUpError",xu.NoMFA="noMFA",xu.InvalidMFA="invalidMFA",xu.EmptyChallengeResponse="emptyChallengeResponse",xu.NoUserSession="noUserSession",xu.Default="default";var zu,Hu=((zu=Ju.prototype).getUsername=function(){return this.username},zu.getPassword=function(){return this.password},zu.getValidationData=function(){return this.validationData},zu.getAuthParameters=function(){return this.authParameters},zu.getClientMetadata=function(){return this.clientMetadata},Ju),Ku="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Gu=[],Wu=[],$u="undefined"!=typeof Uint8Array?Uint8Array:Array,Yu=!1;function Ju(e){var t=e||{},n=t.ValidationData,r=t.Username,o=t.Password,i=t.AuthParameters,s=t.ClientMetadata;this.validationData=n||{},this.authParameters=i||{},this.clientMetadata=s||{},this.username=r,this.password=o}function Zu(){Yu=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)Gu[t]=e[t],Wu[e.charCodeAt(t)]=t;Wu["-".charCodeAt(0)]=62,Wu["_".charCodeAt(0)]=63}function Qu(e){var t;Yu||Zu();for(var n=e.length,r=n%3,o="",i=[],s=0,a=n-r;s<a;s+=16383)i.push(function(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(Gu[r>>18&63]+Gu[r>>12&63]+Gu[r>>6&63]+Gu[63&r]);return o.join("")}(e,s,a<s+16383?a:s+16383));return 1==r?(t=e[n-1],o+=Gu[t>>2],o+=Gu[t<<4&63],o+="=="):2==r&&(t=(e[n-2]<<8)+e[n-1],o+=Gu[t>>10],o+=Gu[t>>4&63],o+=Gu[t<<2&63],o+="="),i.push(o),i.join("")}function Xu(e,t,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,c=u>>1,l=-7,p=n?o-1:0,d=n?-1:1,h=e[t+p];for(p+=d,i=h&(1<<-l)-1,h>>=-l,l+=a;0<l;i=256*i+e[t+p],p+=d,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;0<l;s=256*s+e[t+p],p+=d,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),i-=c}return(h?-1:1)*s*Math.pow(2,i-r)}function ec(e,t,n,r,o,i){var s,a,u,c=8*i-o-1,l=(1<<c)-1,p=l>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),2<=(t+=1<=s+p?d/u:d*Math.pow(2,1-p))*u&&(s++,u/=2),l<=s+p?(a=0,s=l):1<=s+p?(a=(t*u-1)*Math.pow(2,o),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,o),s=0));8<=o;e[n+h]=255&a,h+=f,a/=256,o-=8);for(s=s<<o|a,c+=o;0<c;e[n+h]=255&s,h+=f,s/=256,c-=8);e[n+h-f]|=128*m}var tc={}.toString,nc=Array.isArray||function(e){return"[object Array]"==tc.call(e)};function rc(){return ic.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function oc(e,t){if(rc()<t)throw new RangeError("Invalid typed array length");return ic.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=ic.prototype:(null===e&&(e=new ic(t)),e.length=t),e}function ic(e,t,n){if(!(ic.TYPED_ARRAY_SUPPORT||this instanceof ic))return new ic(e,t,n);if("number"!=typeof e)return sc(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return uc(this,e)}function sc(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),ic.TYPED_ARRAY_SUPPORT?(e=t).__proto__=ic.prototype:e=cc(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!ic.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|dc(t,n),o=(e=oc(e,r)).write(t,n);return o!==r&&(e=e.slice(0,o)),e}(e,t,n):function(e,t){if(pc(t)){var n=0|lc(t.length);return 0===(e=oc(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?oc(e,0):cc(e,t);if("Buffer"===t.type&&nc(t.data))return cc(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function ac(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function uc(e,t){if(ac(t),e=oc(e,t<0?0:0|lc(t)),!ic.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function cc(e,t){var n=t.length<0?0:0|lc(t.length);e=oc(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function lc(e){if(e>=rc())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+rc().toString(16)+" bytes");return 0|e}function pc(e){return null!=e&&e._isBuffer}function dc(e,t){if(pc(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return kc(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Oc(e).length;default:if(r)return kc(e).length;t=(""+t).toLowerCase(),r=!0}}function hc(e,o,i){var t,n,r=!1;if((void 0===o||o<0)&&(o=0),o>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(o>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var o,i="",s=t;s<n;++s)i+=(o=e[s])<16?"0"+o.toString(16):o.toString(16);return i}(this,o,i);case"utf8":case"utf-8":return vc(this,o,i);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}(this,o,i);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}(this,o,i);case"base64":return n=i,0===(t=o)&&n===this.length?Qu(this):Qu(this.slice(t,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e){for(var t=e.slice(o,i),n="",r=0;r<t.length;r+=2)n+=String.fromCharCode(t[r]+256*t[r+1]);return n}(this);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function fc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function mc(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=ic.from(t,r)),pc(t))return 0===t.length?-1:gc(e,t,n,r,o);if("number"==typeof t)return t&=255,ic.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):gc(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function gc(e,t,n,r,o){var i=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=i=2,a/=2,n/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o)for(var c=-1,l=n;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===a)return c*i}else-1!==c&&(l-=l-c),c=-1;else for(s<n+a&&(n=s-a),l=n;0<=l;l--){for(var p=!0,d=0;d<a;d++)if(u(e,l+d)!==u(t,d)){p=!1;break}if(p)return l}return-1}function yc(e,t,n,r){return Tc(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function vc(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,u,c=e[o],l=null,p=239<c?4:223<c?3:191<c?2:1;if(o+p<=n)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&127<(u=(31&c)<<6|63&i)&&(l=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&i)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,p=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=p}return function(e){var t=e.length;if(t<=bc)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=bc));return n}(r)}ic.TYPED_ARRAY_SUPPORT=void 0===Ku.TYPED_ARRAY_SUPPORT||Ku.TYPED_ARRAY_SUPPORT,ic.poolSize=8192,ic._augment=function(e){return e.__proto__=ic.prototype,e},ic.from=function(e,t,n){return sc(null,e,t,n)},ic.TYPED_ARRAY_SUPPORT&&(ic.prototype.__proto__=Uint8Array.prototype,ic.__proto__=Uint8Array),ic.alloc=function(e,t,n){return r=null,i=t,s=n,ac(o=e),o<=0||void 0===i?oc(r,o):"string"==typeof s?oc(r,o).fill(i,s):oc(r,o).fill(i);var r,o,i,s},ic.allocUnsafe=function(e){return uc(null,e)},ic.allocUnsafeSlow=function(e){return uc(null,e)},ic.isBuffer=function(e){return null!=e&&(!!e._isBuffer||xc(e)||"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&xc(e.slice(0,0)))},ic.compare=function(e,t){if(!pc(e)||!pc(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},ic.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ic.concat=function(e,t){if(!nc(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return ic.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var n=ic.allocUnsafe(t),r=0,o=0;o<e.length;++o){var i=e[o];if(!pc(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,r),r+=i.length}return n},ic.byteLength=dc,ic.prototype._isBuffer=!0,ic.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)fc(this,t,t+1);return this},ic.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)fc(this,t,t+3),fc(this,t+1,t+2);return this},ic.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)fc(this,t,t+7),fc(this,t+1,t+6),fc(this,t+2,t+5),fc(this,t+3,t+4);return this},ic.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?vc(this,0,e):hc.apply(this,arguments)},ic.prototype.equals=function(e){if(!pc(e))throw new TypeError("Argument must be a Buffer");return this===e||0===ic.compare(this,e)},ic.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},ic.prototype.compare=function(e,t,n,r,o){if(!pc(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=t)return 0;if(o<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(r,o),c=e.slice(t,n),l=0;l<a;++l)if(u[l]!==c[l]){i=u[l],s=c[l];break}return i<s?-1:s<i?1:0},ic.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},ic.prototype.indexOf=function(e,t,n){return mc(this,e,t,n,!0)},ic.prototype.lastIndexOf=function(e,t,n){return mc(this,e,t,n,!1)},ic.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||o<n)&&(n=o),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,s,a,u,c,l,p,d=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var o=e.length-n;(!r||o<(r=Number(r)))&&(r=o);var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");i/2<r&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}(this,e,t,n);case"utf8":case"utf-8":return a=t,u=n,Tc(kc(e,this.length-a),this,a,u);case"ascii":return yc(this,e,t,n);case"latin1":case"binary":return yc(this,e,t,n);case"base64":return i=t,s=n,Tc(Oc(e),this,i,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l=t,p=n,Tc(function(e,t){for(var n,r,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,o=n%256,i.push(o),i.push(r);return i}(e,(c=this).length-l),c,l,p);default:if(d)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),d=!0}},ic.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var bc=4096;function wc(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function _c(e,t,n,r,o,i){if(!pc(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Sc(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function Cc(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function Ec(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Ic(e,t,n,r,o){return o||Ec(e,0,n,4),ec(e,t,n,r,23,4),n+4}function Ac(e,t,n,r,o){return o||Ec(e,0,n,8),ec(e,t,n,r,52,8),n+8}ic.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),ic.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=ic.prototype;else for(var r=t-e,o=new ic(r,void 0),i=0;i<r;++i)o[i]=this[i+e];return o},ic.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||wc(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},ic.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||wc(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},ic.prototype.readUInt8=function(e,t){return t||wc(e,1,this.length),this[e]},ic.prototype.readUInt16LE=function(e,t){return t||wc(e,2,this.length),this[e]|this[e+1]<<8},ic.prototype.readUInt16BE=function(e,t){return t||wc(e,2,this.length),this[e]<<8|this[e+1]},ic.prototype.readUInt32LE=function(e,t){return t||wc(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ic.prototype.readUInt32BE=function(e,t){return t||wc(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ic.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||wc(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*t)),r},ic.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||wc(e,t,this.length);for(var r=t,o=1,i=this[e+--r];0<r&&(o*=256);)i+=this[e+--r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},ic.prototype.readInt8=function(e,t){return t||wc(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ic.prototype.readInt16LE=function(e,t){t||wc(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},ic.prototype.readInt16BE=function(e,t){t||wc(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},ic.prototype.readInt32LE=function(e,t){return t||wc(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ic.prototype.readInt32BE=function(e,t){return t||wc(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ic.prototype.readFloatLE=function(e,t){return t||wc(e,4,this.length),Xu(this,e,!0,23,4)},ic.prototype.readFloatBE=function(e,t){return t||wc(e,4,this.length),Xu(this,e,!1,23,4)},ic.prototype.readDoubleLE=function(e,t){return t||wc(e,8,this.length),Xu(this,e,!0,52,8)},ic.prototype.readDoubleBE=function(e,t){return t||wc(e,8,this.length),Xu(this,e,!1,52,8)},ic.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||_c(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},ic.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||_c(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+n},ic.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||_c(this,e,t,1,255,0),ic.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},ic.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||_c(this,e,t,2,65535,0),ic.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Sc(this,e,t,!0),t+2},ic.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||_c(this,e,t,2,65535,0),ic.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Sc(this,e,t,!1),t+2},ic.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||_c(this,e,t,4,4294967295,0),ic.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Cc(this,e,t,!0),t+4},ic.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||_c(this,e,t,4,4294967295,0),ic.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Cc(this,e,t,!1),t+4},ic.prototype.writeIntLE=function(e,t,n,r){var o;e=+e,t|=0,r||_c(this,e,t,n,(o=Math.pow(2,8*n-1))-1,-o);var i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},ic.prototype.writeIntBE=function(e,t,n,r){var o;e=+e,t|=0,r||_c(this,e,t,n,(o=Math.pow(2,8*n-1))-1,-o);var i=n-1,s=1,a=0;for(this[t+i]=255&e;0<=--i&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},ic.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||_c(this,e,t,1,127,-128),ic.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},ic.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||_c(this,e,t,2,32767,-32768),ic.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Sc(this,e,t,!0),t+2},ic.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||_c(this,e,t,2,32767,-32768),ic.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Sc(this,e,t,!1),t+2},ic.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||_c(this,e,t,4,2147483647,-2147483648),ic.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Cc(this,e,t,!0),t+4},ic.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||_c(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),ic.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Cc(this,e,t,!1),t+4},ic.prototype.writeFloatLE=function(e,t,n){return Ic(this,e,t,!0,n)},ic.prototype.writeFloatBE=function(e,t,n){return Ic(this,e,t,!1,n)},ic.prototype.writeDoubleLE=function(e,t,n){return Ac(this,e,t,!0,n)},ic.prototype.writeDoubleBE=function(e,t,n){return Ac(this,e,t,!1,n)},ic.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),t=t||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;0<=o;--o)e[o+t]=this[o+n];else if(i<1e3||!ic.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},ic.prototype.fill=function(e,t,n,r){if("string"==typeof e){var o;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==e.length||(o=e.charCodeAt(0))<256&&(e=o),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!ic.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else for(var i=pc(e)?e:kc(new ic(e,r).toString()),s=i.length,a=0;a<n-t;++a)this[a+t]=i[a%s];return this};var Pc=/[^+\/0-9A-Za-z-_]/g;function kc(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!o){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,n<128){if(--t<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Oc(e){return function(e){var t,n,r,o;Yu||Zu();var i=e.length;if(0<i%4)throw new Error("Invalid string. Length must be a multiple of 4");r="="===e[i-2]?2:"="===e[i-1]?1:0,o=new $u(3*i/4-r),t=0<r?i-4:i;for(var s=0,a=0;a<t;a+=4)n=Wu[e.charCodeAt(a)]<<18|Wu[e.charCodeAt(a+1)]<<12|Wu[e.charCodeAt(a+2)]<<6|Wu[e.charCodeAt(a+3)],o[s++]=n>>16&255,o[s++]=n>>8&255,o[s++]=255&n;return 2==r?(n=Wu[e.charCodeAt(a)]<<2|Wu[e.charCodeAt(a+1)]>>4,o[s++]=255&n):1==r&&(n=Wu[e.charCodeAt(a)]<<10|Wu[e.charCodeAt(a+1)]<<4|Wu[e.charCodeAt(a+2)]>>2,o[s++]=n>>8&255,o[s++]=255&n),o}(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(Pc,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Tc(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function xc(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function Nc(e,t){null!=e&&this.fromString(e,t)}function Uc(){return new Nc(null)}var Rc="undefined"!=typeof navigator,Mc=Rc&&"Microsoft Internet Explorer"==navigator.appName?(Nc.prototype.am=function(e,t,n,r,o,i){for(var s=32767&t,a=t>>15;0<=--i;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;o=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&o))>>>30)+(l>>>15)+a*c+(o>>>30),n[r++]=1073741823&u}return o},30):Rc&&"Netscape"!=navigator.appName?(Nc.prototype.am=function(e,t,n,r,o,i){for(;0<=--i;){var s=t*this[e++]+n[r]+o;o=Math.floor(s/67108864),n[r++]=67108863&s}return o},26):(Nc.prototype.am=function(e,t,n,r,o,i){for(var s=16383&t,a=t>>14;0<=--i;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;o=((u=s*u+((16383&l)<<14)+n[r]+o)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return o},28);Nc.prototype.DB=Mc,Nc.prototype.DM=(1<<Mc)-1,Nc.prototype.DV=1<<Mc,Nc.prototype.FV=Math.pow(2,52),Nc.prototype.F1=52-Mc,Nc.prototype.F2=2*Mc-52;for(var Dc=new Array,Fc="0".charCodeAt(0),Lc=0;Lc<=9;++Lc)Dc[Fc++]=Lc;for(Fc="a".charCodeAt(0),Lc=10;Lc<36;++Lc)Dc[Fc++]=Lc;for(Fc="A".charCodeAt(0),Lc=10;Lc<36;++Lc)Dc[Fc++]=Lc;function jc(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function Bc(e){var t=Uc();return t.fromInt(e),t}function Vc(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function qc(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function zc(e){return ic.from(P.lib.WordArray.random(e).toString(),"hex")}qc.prototype.convert=function(e){var t=Uc();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(Nc.ZERO)&&this.m.subTo(t,t),t},qc.prototype.revert=function(e){var t=Uc();return e.copyTo(t),this.reduce(t),t},qc.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},qc.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},qc.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Nc.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},Nc.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},Nc.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r,o=e.length,i=!1,s=0;0<=--o;){var a=null==(r=Dc[e.charCodeAt(o)])?-1:r;a<0?"-"==e.charAt(o)&&(i=!0):(i=!1,0==s?this[this.t++]=a:s+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=n)>=this.DB&&(s-=this.DB))}this.clamp(),i&&Nc.ZERO.subTo(this,this)},Nc.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},Nc.prototype.dlShiftTo=function(e,t){for(var n=this.t-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t.t=this.t+e,t.s=this.s},Nc.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},Nc.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,r=this.DB-n,o=(1<<r)-1,i=Math.floor(e/this.DB),s=this.s<<n&this.DM,a=this.t-1;0<=a;--a)t[a+i+1]=this[a]>>r|s,s=(this[a]&o)<<n;for(a=i-1;0<=a;--a)t[a]=0;t[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()},Nc.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,o=this.DB-r,i=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&i)<<o,t[s-n]=this[s]>>r;0<r&&(t[this.t-n-1]|=(this.s&i)<<o),t.t=this.t-n,t.clamp()}},Nc.prototype.subTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:0<r&&(t[n++]=r),t.t=n,t.clamp()},Nc.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),o=n.t;for(t.t=o+r.t;0<=--o;)t[o]=0;for(o=0;o<r.t;++o)t[o+n.t]=n.am(0,r[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&Nc.ZERO.subTo(t,t)},Nc.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},Nc.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var o=this.abs();if(o.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=Uc());var i=Uc(),s=this.s,a=e.s,u=this.DB-Vc(r[r.t-1]);0<u?(r.lShiftTo(u,i),o.lShiftTo(u,n)):(r.copyTo(i),o.copyTo(n));var c=i.t,l=i[c-1];if(0!=l){var p=l*(1<<this.F1)+(1<c?i[c-2]>>this.F2:0),d=this.FV/p,h=(1<<this.F1)/p,f=1<<this.F2,m=n.t,g=m-c,y=null==t?Uc():t;for(i.dlShiftTo(g,y),0<=n.compareTo(y)&&(n[n.t++]=1,n.subTo(y,n)),Nc.ONE.dlShiftTo(c,y),y.subTo(i,i);i.t<c;)i[i.t++]=0;for(;0<=--g;){var v=n[--m]==l?this.DM:Math.floor(n[m]*d+(n[m-1]+f)*h);if((n[m]+=i.am(0,v,n,g,0,c))<v)for(i.dlShiftTo(g,y),n.subTo(y,n);n[m]<--v;)n.subTo(y,n)}null!=t&&(n.drShiftTo(c,t),s!=a&&Nc.ZERO.subTo(t,t)),n.t=c,n.clamp(),0<u&&n.rShiftTo(u,n),s<0&&Nc.ZERO.subTo(n,n)}}},Nc.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},Nc.prototype.addTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,0<r?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},Nc.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,o=!1,i="",s=this.t,a=this.DB-s*this.DB%t;if(0<s--)for(a<this.DB&&0<(n=this[s]>>a)&&(o=!0,i=jc(n));0<=s;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),0<n&&(o=!0),o&&(i+=jc(n));return o?i:"0"},Nc.prototype.negate=function(){var e=Uc();return Nc.ZERO.subTo(this,e),e},Nc.prototype.abs=function(){return this.s<0?this.negate():this},Nc.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0},Nc.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Vc(this[this.t-1]^this.s&this.DM)},Nc.prototype.mod=function(e){var t=Uc();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(Nc.ZERO)&&e.subTo(t,t),t},Nc.prototype.equals=function(e){return 0==this.compareTo(e)},Nc.prototype.add=function(e){var t=Uc();return this.addTo(e,t),t},Nc.prototype.subtract=function(e){var t=Uc();return this.subTo(e,t),t},Nc.prototype.multiply=function(e){var t=Uc();return this.multiplyTo(e,t),t},Nc.prototype.divide=function(e){var t=Uc();return this.divRemTo(e,t,null),t},Nc.prototype.modPow=function(e,t,n){var r,o=e.bitLength(),i=Bc(1),s=new qc(t);if(o<=0)return i;r=o<18?1:o<48?3:o<144?4:o<768?5:6;var a=new Array,u=3,c=r-1,l=(1<<r)-1;if(a[1]=s.convert(this),1<r){var p=Uc();for(s.sqrTo(a[1],p);u<=l;)a[u]=Uc(),s.mulTo(p,a[u-2],a[u]),u+=2}for(var d,h,f=e.t-1,m=!0,g=Uc(),o=Vc(e[f])-1;0<=f;){for(c<=o?d=e[f]>>o-c&l:(d=(e[f]&(1<<o+1)-1)<<c-o,0<f&&(d|=e[f-1]>>this.DB+o-c)),u=r;0==(1&d);)d>>=1,--u;if((o-=u)<0&&(o+=this.DB,--f),m)a[d].copyTo(i),m=!1;else{for(;1<u;)s.sqrTo(i,g),s.sqrTo(g,i),u-=2;0<u?s.sqrTo(i,g):(h=i,i=g,g=h),s.mulTo(g,a[d],i)}for(;0<=f&&0==(e[f]&1<<o);)s.sqrTo(i,g),h=i,i=g,g=h,--o<0&&(o=this.DB-1,--f)}var y=s.revert(i);return n(null,y),y},Nc.ZERO=Bc(0),Nc.ONE=Bc(1);var Hc,Kc,Gc=((Kc=Yc.prototype).getSmallAValue=function(){return this.smallAValue},Kc.getLargeAValue=function(n){var r=this;this.largeAValue?n(null,this.largeAValue):this.calculateA(this.smallAValue,function(e,t){e&&n(e,null),r.largeAValue=t,n(null,r.largeAValue)})},Kc.generateRandomSmallA=function(){return new Nc(zc(128).toString("hex"),16).mod(this.N)},Kc.generateRandomString=function(){return zc(40).toString("base64")},Kc.getRandomPassword=function(){return this.randomPassword},Kc.getSaltDevices=function(){return this.SaltToHashDevices},Kc.getVerifierDevices=function(){return this.verifierDevices},Kc.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();var o=""+e+t+":"+this.randomPassword,i=this.hash(o),s=zc(16).toString("hex");this.SaltToHashDevices=this.padHex(new Nc(s,16)),this.g.modPow(new Nc(this.hexHash(this.SaltToHashDevices+i),16),this.N,function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)})},Kc.calculateA=function(e,n){var r=this;this.g.modPow(e,this.N,function(e,t){e&&n(e,null),t.mod(r.N).equals(Nc.ZERO)&&n(new Error("Illegal paramater. A mod N cannot be 0."),null),n(null,t)})},Kc.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new Nc(this.UHexHash,16)},Kc.hash=function(e){var t=e instanceof ic?P.lib.WordArray.create(e):e,n=O(t).toString();return new Array(64-n.length).join("0")+n},Kc.hexHash=function(e){return this.hash(ic.from(e,"hex"))},Kc.computehkdf=function(e,t){var n=P.lib.WordArray.create(ic.concat([this.infoBits,ic.from(String.fromCharCode(1),"utf8")])),r=e instanceof ic?P.lib.WordArray.create(e):e,o=t instanceof ic?P.lib.WordArray.create(t):t,i=T(r,o),s=T(n,i);return ic.from(s.toString(),"hex").slice(0,16)},Kc.getPasswordAuthenticationKey=function(e,t,n,r,o){var i=this;if(n.mod(this.N).equals(Nc.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(Nc.ZERO))throw new Error("U cannot be zero.");var s=""+this.poolName+e+":"+t,a=this.hash(s),u=new Nc(this.hexHash(this.padHex(r)+a),16);this.calculateS(u,n,function(e,t){e&&o(e,null);var n=i.computehkdf(ic.from(i.padHex(t),"hex"),ic.from(i.padHex(i.UValue.toString(16)),"hex"));o(null,n)})},Kc.calculateS=function(n,r,o){var i=this;this.g.modPow(n,this.N,function(e,t){e&&o(e,null),r.subtract(i.k.multiply(t)).modPow(i.smallAValue.add(i.UValue.multiply(n)),i.N,function(e,t){e&&o(e,null),o(null,t.mod(i.N))})})},Kc.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},Kc.padHex=function(e){var t=e.toString(16);return t.length%2==1?t="0"+t:-1!=="89ABCDEFabcdef".indexOf(t[0])&&(t="00"+t),t},Yc),Wc=((Hc=$c.prototype).getJwtToken=function(){return this.jwtToken},Hc.getExpiration=function(){return this.payload.exp},Hc.getIssuedAt=function(){return this.payload.iat},Hc.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(ic.from(e,"base64").toString("utf8"))}catch(e){return{}}},$c);function $c(e){this.jwtToken=e||"",this.payload=this.decodePayload()}function Yc(e){this.N=new Nc("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new Nc("2",16),this.k=new Nc(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=ic.from("Caldera Derived Key","utf8"),this.poolName=e}var Jc,Zc,Qc,Xc=(Qc=Jc=Wc,(Zc=el).prototype=Object.create(Qc.prototype),(Zc.prototype.constructor=Zc).__proto__=Qc,el);function el(e){var t=(void 0===e?{}:e).AccessToken;return Jc.call(this,t||"")||this}var tl,nl,rl,ol,il,sl,al=(sl=ol=Wc,(il=Al).prototype=Object.create(sl.prototype),(il.prototype.constructor=il).__proto__=sl,Al),ul=(Il.prototype.getToken=function(){return this.token},Il),cl=((rl=El.prototype).getIdToken=function(){return this.idToken},rl.getRefreshToken=function(){return this.refreshToken},rl.getAccessToken=function(){return this.accessToken},rl.getClockDrift=function(){return this.clockDrift},rl.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},rl.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},El),ll=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],pl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dl=(Cl.prototype.getNowString=function(){var e=new Date,t=pl[e.getUTCDay()],n=ll[e.getUTCMonth()],r=e.getUTCDate(),o=e.getUTCHours();o<10&&(o="0"+o);var i=e.getUTCMinutes();i<10&&(i="0"+i);var s=e.getUTCSeconds();return s<10&&(s="0"+s),t+" "+n+" "+r+" "+o+":"+i+":"+s+" UTC "+e.getUTCFullYear()},Cl),hl=((nl=Sl.prototype).getValue=function(){return this.Value},nl.setValue=function(e){return this.Value=e,this},nl.getName=function(){return this.Name},nl.setName=function(e){return this.Name=e,this},nl.toString=function(){return JSON.stringify(this)},nl.toJSON=function(){return{Name:this.Name,Value:this.Value}},Sl),fl={},ml=(_l.setItem=function(e,t){return fl[e]=t,fl[e]},_l.getItem=function(e){return Object.prototype.hasOwnProperty.call(fl,e)?fl[e]:void 0},_l.removeItem=function(e){return delete fl[e]},_l.clear=function(){return fl={}},_l),gl=(wl.prototype.getStorage=function(){return this.storageWindow},wl),yl="undefined"!=typeof navigator?navigator.userAgent:"nodejs",vl=((tl=bl.prototype).setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},tl.getSignInUserSession=function(){return this.signInUserSession},tl.getUsername=function(){return this.username},tl.getAuthenticationFlowType=function(){return this.authenticationFlowType},tl.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},tl.initiateAuth=function(e,o){var i=this,t=e.getAuthParameters();t.USERNAME=this.username;var n=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),r={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:n};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",r,function(e,t){if(e)return o.onFailure(e);var n=t.ChallengeName,r=t.ChallengeParameters;return"CUSTOM_CHALLENGE"===n?(i.Session=t.Session,o.customChallenge(r)):(i.signInUserSession=i.getCognitoUserSession(t.AuthenticationResult),i.cacheTokens(),o.onSuccess(i.signInUserSession))})},tl.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},tl.authenticateUserDefaultAuth=function(r,p){var o,i,d=this,h=new Gc(this.pool.getUserPoolId().split("_")[1]),f=new dl,s={};null!=this.deviceKey&&(s.DEVICE_KEY=this.deviceKey),s.USERNAME=this.username,h.getLargeAValue(function(e,t){e&&p.onFailure(e),s.SRP_A=t.toString(16),"CUSTOM_AUTH"===d.authenticationFlowType&&(s.CHALLENGE_NAME="SRP_A");var l=0!==Object.keys(r.getValidationData()).length?r.getValidationData():r.getClientMetadata(),n={AuthFlow:d.authenticationFlowType,ClientId:d.pool.getClientId(),AuthParameters:s,ClientMetadata:l};d.getUserContextData(d.username)&&(n.UserContextData=d.getUserContextData(d.username)),d.client.request("InitiateAuth",n,function(e,u){if(e)return p.onFailure(e);var c=u.ChallengeParameters;d.username=c.USER_ID_FOR_SRP,o=new Nc(c.SRP_B,16),i=new Nc(c.SALT,16),d.getCachedDeviceKeyAndPassword(),h.getPasswordAuthenticationKey(d.username,r.getPassword(),o,i,function(e,t){e&&p.onFailure(e);var n=f.getNowString(),r=P.lib.WordArray.create(ic.concat([ic.from(d.pool.getUserPoolId().split("_")[1],"utf8"),ic.from(d.username,"utf8"),ic.from(c.SECRET_BLOCK,"base64"),ic.from(n,"utf8")])),o=P.lib.WordArray.create(t),i=N.stringify(T(r,o)),s={};s.USERNAME=d.username,s.PASSWORD_CLAIM_SECRET_BLOCK=c.SECRET_BLOCK,s.TIMESTAMP=n,s.PASSWORD_CLAIM_SIGNATURE=i,null!=d.deviceKey&&(s.DEVICE_KEY=d.deviceKey);var a={ChallengeName:"PASSWORD_VERIFIER",ClientId:d.pool.getClientId(),ChallengeResponses:s,Session:u.Session,ClientMetadata:l};d.getUserContextData()&&(a.UserContextData=d.getUserContextData()),function n(r,o){return d.client.request("RespondToAuthChallenge",r,function(e,t){return e&&"ResourceNotFoundException"===e.code&&-1!==e.message.toLowerCase().indexOf("device")?(s.DEVICE_KEY=null,d.deviceKey=null,d.randomPassword=null,d.deviceGroupKey=null,d.clearCachedDeviceKeyAndPassword(),n(r,o)):o(e,t)})}(a,function(e,t){return e?p.onFailure(e):d.authenticateUserInternal(t,h,p)})})})})},tl.authenticateUserPlainUsernamePassword=function(e,n){var r,t,o,i=this,s={};s.USERNAME=this.username,s.PASSWORD=e.getPassword(),s.PASSWORD?(r=new Gc(this.pool.getUserPoolId().split("_")[1]),this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(s.DEVICE_KEY=this.deviceKey),t=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),o={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:s,ClientMetadata:t},this.getUserContextData(this.username)&&(o.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",o,function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,r,n)})):n.onFailure(new Error("PASSWORD parameter is required"))},tl.authenticateUserInternal=function(n,r,o){var i=this,e=n.ChallengeName,t=n.ChallengeParameters;if("SMS_MFA"===e)return this.Session=n.Session,o.mfaRequired(e,t);if("SELECT_MFA_TYPE"===e)return this.Session=n.Session,o.selectMFAType(e,t);if("MFA_SETUP"===e)return this.Session=n.Session,o.mfaSetup(e,t);if("SOFTWARE_TOKEN_MFA"===e)return this.Session=n.Session,o.totpRequired(e,t);if("CUSTOM_CHALLENGE"===e)return this.Session=n.Session,o.customChallenge(t);if("NEW_PASSWORD_REQUIRED"===e){this.Session=n.Session;var s=null,a=null,u=[],c=r.getNewPasswordRequiredChallengeUserAttributePrefix();if(t&&(s=JSON.parse(n.ChallengeParameters.userAttributes),a=JSON.parse(n.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)u[l]=a[l].substr(c.length);return o.newPasswordRequired(s,u)}if("DEVICE_SRP_AUTH"!==e){this.signInUserSession=this.getCognitoUserSession(n.AuthenticationResult),this.challengeName=e,this.cacheTokens();var p=n.AuthenticationResult.NewDeviceMetadata;if(null==p)return o.onSuccess(this.signInUserSession);r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return o.onFailure(e);var t={Salt:ic.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:ic.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=t.PasswordVerifier,i.deviceGroupKey=p.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:p.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:t,DeviceName:yl},function(e,t){return e?o.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?o.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):o.onSuccess(i.signInUserSession))})})}else this.getDeviceResponse(o)},tl.completeNewPasswordChallenge=function(e,t,n,r){var o=this;if(!e)return n.onFailure(new Error("New password is required."));var i=new Gc(this.pool.getUserPoolId().split("_")[1]),s=i.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach(function(e){a[s+e]=t[e]}),a.NEW_PASSWORD=e,a.USERNAME=this.username;var u={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,function(e,t){return e?n.onFailure(e):o.authenticateUserInternal(t,i,n)})},tl.getDeviceResponse=function(l,r){var p=this,o=new Gc(this.deviceGroupKey),d=new dl,i={};i.USERNAME=this.username,i.DEVICE_KEY=this.deviceKey,o.getLargeAValue(function(e,t){e&&l.onFailure(e),i.SRP_A=t.toString(16);var n={ChallengeName:"DEVICE_SRP_AUTH",ClientId:p.pool.getClientId(),ChallengeResponses:i,ClientMetadata:r};p.getUserContextData()&&(n.UserContextData=p.getUserContextData()),p.client.request("RespondToAuthChallenge",n,function(e,u){if(e)return l.onFailure(e);var c=u.ChallengeParameters,t=new Nc(c.SRP_B,16),n=new Nc(c.SALT,16);o.getPasswordAuthenticationKey(p.deviceKey,p.randomPassword,t,n,function(e,t){if(e)return l.onFailure(e);var n=d.getNowString(),r=P.lib.WordArray.create(ic.concat([ic.from(p.deviceGroupKey,"utf8"),ic.from(p.deviceKey,"utf8"),ic.from(c.SECRET_BLOCK,"base64"),ic.from(n,"utf8")])),o=P.lib.WordArray.create(t),i=N.stringify(T(r,o)),s={};s.USERNAME=p.username,s.PASSWORD_CLAIM_SECRET_BLOCK=c.SECRET_BLOCK,s.TIMESTAMP=n,s.PASSWORD_CLAIM_SIGNATURE=i,s.DEVICE_KEY=p.deviceKey;var a={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:p.pool.getClientId(),ChallengeResponses:s,Session:u.Session};p.getUserContextData()&&(a.UserContextData=p.getUserContextData()),p.client.request("RespondToAuthChallenge",a,function(e,t){return e?l.onFailure(e):(p.signInUserSession=p.getCognitoUserSession(t.AuthenticationResult),p.cacheTokens(),l.onSuccess(p.signInUserSession))})})})})},tl.confirmRegistration=function(e,t,n,r){var o={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",o,function(e){return e?n(e,null):n(null,"SUCCESS")})},tl.sendCustomChallengeAnswer=function(e,n,t){var r=this,o={};o.USERNAME=this.username,o.ANSWER=e;var i=new Gc(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);var s={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:t};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",s,function(e,t){return e?n.onFailure(e):r.authenticateUserInternal(t,i,n)})},tl.sendMFACode=function(e,o,t,n){var i=this,r={};r.USERNAME=this.username,r.SMS_MFA_CODE=e;var s=t||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===s&&(r.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey);var a={ChallengeName:s,ChallengeResponses:r,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,function(e,n){if(e)return o.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return o.onSuccess(i.signInUserSession);var r=new Gc(i.pool.getUserPoolId().split("_")[1]);r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return o.onFailure(e);var t={Salt:ic.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:ic.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=t.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:t,DeviceName:yl},function(e,t){return e?o.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?o.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):o.onSuccess(i.signInUserSession))})})}else i.getDeviceResponse(o)})},tl.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(e){return e?n(e,null):n(null,"SUCCESS")})},tl.enableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);var e=[];e.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},tl.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},tl.disableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},tl.deleteUser=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:e},function(e){return e?t(e,null):(n.clearCachedUser(),t(null,"SUCCESS"))})},tl.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},function(e){return e?t(e,null):r.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},tl.getUserAttributes=function(s){if(null==this.signInUserSession||!this.signInUserSession.isValid())return s(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){if(e)return s(e,null);for(var n=[],r=0;r<t.UserAttributes.length;r++){var o={Name:t.UserAttributes[r].Name,Value:t.UserAttributes[r].Value},i=new hl(o);n.push(i)}return s(null,n)})},tl.getMFAOptions=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n(e,null):n(null,t.MFAOptions)})},tl.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},tl.refreshSessionIfPossible=function(){var n=this;return new Promise(function(e){var t=n.signInUserSession.getRefreshToken();t&&t.getToken()?n.refreshSession(t,e):e()})},tl.getUserData=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),t(new Error("User is not authenticated"),null);var r=this.getUserDataFromCache();if(r)if(this.isFetchUserDataAndTokenRequired(e))this.fetchUserData().then(function(e){return n.refreshSessionIfPossible().then(function(){return e})}).then(function(e){return t(null,e)}).catch(t);else try{return void t(null,JSON.parse(r))}catch(e){return this.clearCachedUserData(),void t(e,null)}else this.fetchUserData().then(function(e){t(null,e)}).catch(t)},tl.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},tl.isFetchUserDataAndTokenRequired=function(e){var t=(e||{}).bypassCache;return void 0!==t&&t},tl.fetchUserData=function(){var t=this;return this.createGetUserRequest().then(function(e){return t.cacheUserData(e),e})},tl.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},tl.resendConfirmationCode=function(n,e){var t={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.client.request("ResendConfirmationCode",t,function(e,t){return e?n(e,null):n(null,t)})},tl.getSession=function(e){if(null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,n=t+".idToken",r=t+".accessToken",o=t+".refreshToken",i=t+".clockDrift";if(this.storage.getItem(n)){var s=new al({IdToken:this.storage.getItem(n)}),a=new Xc({AccessToken:this.storage.getItem(r)}),u=new ul({RefreshToken:this.storage.getItem(o)}),c=parseInt(this.storage.getItem(i),0)||0,l=new cl({IdToken:s,AccessToken:a,RefreshToken:u,ClockDrift:c});if(l.isValid())return this.signInUserSession=l,e(null,this.signInUserSession);if(!u.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(u,e)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},tl.refreshSession=function(r,o,e){var i=this,t={};t.REFRESH_TOKEN=r.getToken();var n,s="CognitoIdentityServiceProvider."+this.pool.getClientId(),a=s+".LastAuthUser";this.storage.getItem(a)&&(this.username=this.storage.getItem(a),n=s+"."+this.username+".deviceKey",this.deviceKey=this.storage.getItem(n),t.DEVICE_KEY=this.deviceKey);var u={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:t,ClientMetadata:e};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",u,function(e,t){if(e)return"NotAuthorizedException"===e.code&&i.clearCachedUser(),o(e,null);if(t){var n=t.AuthenticationResult;return Object.prototype.hasOwnProperty.call(n,"RefreshToken")||(n.RefreshToken=r.getToken()),i.signInUserSession=i.getCognitoUserSession(n),i.cacheTokens(),o(null,i.signInUserSession)}})},tl.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",o=e+"."+this.username+".clockDrift",i=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(o,""+this.signInUserSession.getClockDrift()),this.storage.setItem(i,this.username)},tl.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},tl.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},tl.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},tl.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(r,this.deviceGroupKey)},tl.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(r))},tl.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r)},tl.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",o=e+".LastAuthUser",i=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(o),this.storage.removeItem(i)},tl.getCognitoUserSession=function(e){var t=new al(e),n=new Xc(e),r=new ul(e);return new cl({IdToken:t,AccessToken:n,RefreshToken:r})},tl.forgotPassword=function(n,e){var t={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",t,function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess(t)})},tl.confirmPassword=function(e,t,n,r){var o={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",o,function(e){return e?n.onFailure(e):n.onSuccess()})},tl.getAttributeVerificationCode=function(e,n,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess()})},tl.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},tl.getDevice=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},tl.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},tl.forgetDevice=function(t){var n=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:t.onFailure,onSuccess:function(e){return n.deviceKey=null,n.deviceGroupKey=null,n.randomPassword=null,n.clearCachedDeviceKeyAndPassword(),t.onSuccess(e)}})},tl.setDeviceStatusRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},tl.setDeviceStatusNotRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},tl.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("ListDevices",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e,PaginationToken:t},function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},tl.globalSignOut=function(t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t.onFailure(e):(n.clearCachedUser(),t.onSuccess("SUCCESS"))})},tl.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},tl.sendMFASelectionAnswer=function(n,r){var o=this,e={};e.USERNAME=this.username,e.ANSWER=n;var t={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:e,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",t,function(e,t){return e?r.onFailure(e):(o.Session=t.Session,"SMS_MFA"===n?r.mfaRequired(t.challengeName,t.challengeParameters):"SOFTWARE_TOKEN_MFA"===n?r.totpRequired(t.challengeName,t.challengeParameters):void 0)})},tl.getUserContextData=function(){return this.pool.getUserContextData(this.username)},tl.associateSoftwareToken=function(n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n.onFailure(e):n.associateSecretCode(t.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,n.associateSecretCode(t.SecretCode))})},tl.verifySoftwareToken=function(e,t,o){var i=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},function(e,t){return e?o.onFailure(e):o.onSuccess(t)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},function(e,t){if(e)return o.onFailure(e);i.Session=t.Session;var n={};n.USERNAME=i.username;var r={ChallengeName:"MFA_SETUP",ClientId:i.pool.getClientId(),ChallengeResponses:n,Session:i.Session};i.getUserContextData()&&(r.UserContextData=i.getUserContextData()),i.client.request("RespondToAuthChallenge",r,function(e,t){return e?o.onFailure(e):(i.signInUserSession=i.getCognitoUserSession(t.AuthenticationResult),i.cacheTokens(),o.onSuccess(i.signInUserSession))})})},bl);function bl(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new gl).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}function wl(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=ml}}function _l(){}function Sl(e){var t=void 0===e?{}:e,n=t.Name,r=t.Value;this.Name=n||"",this.Value=r||""}function Cl(){}function El(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,o=t.AccessToken,i=t.ClockDrift;if(null==o||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=o,this.clockDrift=void 0===i?this.calculateClockDrift():i}function Il(e){var t=(void 0===e?{}:e).RefreshToken;this.token=t||""}function Al(e){var t=(void 0===e?{}:e).IdToken;return ol.call(this,t||"")||this}function Pl(){}function kl(e){var n="function"==typeof Map?new Map:void 0;return(kl=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return Ol(e,arguments,xl(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Tl(t,e)})(e)}function Ol(e,t,n){return(Ol=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Tl(o,n.prototype),o}).apply(null,arguments)}function Tl(e,t){return(Tl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xl(e){return(xl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Pl.prototype.userAgent="aws-amplify/0.1.x js";var Nl,Ul,Rl,Ml,Dl,Fl,Ll=(Ml=kl(Error),Fl=Ml,(Dl=sp).prototype=Object.create(Fl.prototype),(Dl.prototype.constructor=Dl).__proto__=Fl,sp),jl=((Rl=ip.prototype).promisifyRequest=function(e,t){var o=this;return new Promise(function(n,r){o.request(e,t,function(e,t){e?r(new Ll(e.message,e.code,e.name,e.statusCode)):n(t)})})},Rl.request=function(e,t,o){var i,n={headers:{"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":Pl.prototype.userAgent},method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)};fetch(this.endpoint,n).then(function(e){return i=e},function(e){if(e instanceof TypeError)throw new Error("Network error");throw e}).then(function(e){return e.json().catch(function(){return{}})}).then(function(e){if(i.ok)return o(null,e);var t=(e.__type||e.code).split("#").pop(),n={code:t,name:t,message:e.message||e.Message||null};return o(n)}).catch(function(e){if(!(i&&i.headers&&i.headers.get("x-amzn-errortype"))){if(e instanceof Error&&"Network error"===e.message){var t={code:"NetworkError",name:e.name,message:e.message};return o(t)}return o(e)}try{var n=i.headers.get("x-amzn-errortype").split(":")[0],r={code:n,name:n,statusCode:i.status,message:i.status?i.status.toString():null};return o(r)}catch(t){return o(e)}})},ip),Bl=((Ul=op.prototype).getUserPoolId=function(){return this.userPoolId},Ul.getClientId=function(){return this.clientId},Ul.signUp=function(o,e,t,n,i,r){var s=this,a={ClientId:this.clientId,Username:o,Password:e,UserAttributes:t,ValidationData:n,ClientMetadata:r};this.getUserContextData(o)&&(a.UserContextData=this.getUserContextData(o)),this.client.request("SignUp",a,function(e,t){if(e)return i(e,null);var n={Username:o,Pool:s,Storage:s.storage},r={user:new vl(n),userConfirmed:t.UserConfirmed,userSub:t.UserSub,codeDeliveryDetails:t.CodeDeliveryDetails};return i(null,r)})},Ul.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",t=this.storage.getItem(e);if(t){var n={Username:t,Pool:this,Storage:this.storage};return new vl(n)}return null},Ul.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},op),Vl=((Nl=rp.prototype).setItem=function(e,t){return U.set(e,t,{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure}),U.get(e)},Nl.getItem=function(e){return U.get(e)},Nl.removeItem=function(e){return U.remove(e,{path:this.path,domain:this.domain,secure:this.secure})},Nl.clear=function(){for(var e=U.get(),t=0;t<e.length;++t)U.remove(e[t]);return{}},rp),ql=2147483647,zl=36,Hl=1,Kl=26,Gl=38,Wl=700,$l=72,Yl=128,Jl="-",Zl=/[^\x20-\x7E]/,Ql=/[\x2E\u3002\uFF0E\uFF61]/g,Xl={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ep=zl-Hl,tp=Math.floor,np=String.fromCharCode;function rp(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0}function op(e){var t=e||{},n=t.UserPoolId,r=t.ClientId,o=t.endpoint,i=t.AdvancedSecurityDataCollectionFlag;if(!n||!r)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(n))throw new Error("Invalid UserPoolId format.");var s=n.split("_")[0];this.userPoolId=n,this.clientId=r,this.client=new jl(s,o),this.advancedSecurityDataCollectionFlag=!1!==i,this.storage=e.Storage||(new gl).getStorage()}function ip(e,t){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/"}function sp(e,t,n,r){var o=Ml.call(this,e)||this;return o.code=t,o.name=n,o.statusCode=r,o}function ap(e){throw new RangeError(Xl[e])}function up(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function cp(e){return null===e}function lp(e){return"string"==typeof e}function pp(e){return void 0===e}function dp(e){return"object"==typeof e&&null!==e}var hp=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function fp(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function mp(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var gp=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t};function yp(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var i=/\+/g;e=e.split(t);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=e.length;0<s&&s<a&&(a=s);for(var u=0;u<a;++u){var c,l=e[u].replace(i,"%20"),p=l.indexOf(n),d=0<=p?(c=l.substr(0,p),l.substr(p+1)):(c=l,""),h=decodeURIComponent(c),f=decodeURIComponent(d);Object.prototype.hasOwnProperty.call(o,h)?hp(o[h])?o[h].push(f):o[h]=[o[h],f]:o[h]=f}return o}function vp(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var bp=/^([a-z0-9.+-]+:)/i,wp=/:[0-9]*$/,_p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Sp=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Cp=["'"].concat(Sp),Ep=["%","/","?",";","#"].concat(Cp),Ip=["/","?","#"],Ap=/^[+a-z0-9A-Z_-]{0,63}$/,Pp=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,kp={javascript:!0,"javascript:":!0},Op={javascript:!0,"javascript:":!0},Tp={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function xp(e,t,n){if(e&&dp(e)&&e instanceof vp)return e;var r=new vp;return r.parse(e,t,n),r}function Np(e,t,n,r){if(!lp(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),i=-1!==o&&o<t.indexOf("#")?"?":"#",s=t.split(i);s[0]=s[0].replace(/\\/g,"/");var a=(a=t=s.join(i)).trim();if(!r&&1===t.split("#").length){var u=_p.exec(a);if(u)return e.path=a,e.href=a,e.pathname=u[1],u[2]?(e.search=u[2],e.query=n?yp(e.search.substr(1)):e.search.substr(1)):n&&(e.search="",e.query={}),e}var c,l,p,d,h,f,m,g,y=bp.exec(a);if(y&&(c=(y=y[0]).toLowerCase(),e.protocol=c,a=a.substr(y.length)),(r||y||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(l="//"===a.substr(0,2))||y&&Op[y]||(a=a.substr(2),e.slashes=!0)),!Op[y]&&(l||y&&!Tp[y])){for(var v,b,w=-1,_=0;_<Ip.length;_++)-1!==(p=a.indexOf(Ip[_]))&&(-1===w||p<w)&&(w=p);for(-1!==(b=-1===w?a.lastIndexOf("@"):a.lastIndexOf("@",w))&&(v=a.slice(0,b),a=a.slice(b+1),e.auth=decodeURIComponent(v)),w=-1,_=0;_<Ep.length;_++)-1!==(p=a.indexOf(Ep[_]))&&(-1===w||p<w)&&(w=p);-1===w&&(w=a.length),e.host=a.slice(0,w),a=a.slice(w),Rp(e),e.hostname=e.hostname||"";var S="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!S)for(var C=e.hostname.split(/\./),_=0,E=C.length;_<E;_++){var I=C[_];if(I&&!I.match(Ap)){for(var A="",P=0,k=I.length;P<k;P++)127<I.charCodeAt(P)?A+="x":A+=I[P];if(!A.match(Ap)){var O=C.slice(0,_),T=C.slice(_+1),x=I.match(Pp);x&&(O.push(x[1]),T.unshift(x[2])),T.length&&(a="/"+T.join(".")+a),e.hostname=O.join(".");break}}}255<e.hostname.length?e.hostname="":e.hostname=e.hostname.toLowerCase(),S||(e.hostname=(h=e.hostname,f=function(e){return Zl.test(e)?"xn--"+function(e){for(var t,r,o,n,i,s,a,u,c,l,p,d=[],h=(e=function(e){for(var t,n,r=[],o=0,i=e.length;o<i;)55296<=(t=e.charCodeAt(o++))&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}(e)).length,f=Yl,m=$l,g=t=0;g<h;++g)(u=e[g])<128&&d.push(np(u));for(r=o=d.length,o&&d.push(Jl);r<h;){for(n=ql,g=0;g<h;++g)f<=(u=e[g])&&u<n&&(n=u);for(n-f>tp((ql-t)/(c=r+1))&&ap("overflow"),t+=(n-f)*c,f=n,g=0;g<h;++g)if((u=e[g])<f&&++t>ql&&ap("overflow"),u==f){for(i=t,s=zl;!(i<(a=s<=m?Hl:m+Kl<=s?Kl:s-m));s+=zl)p=i-a,l=zl-a,d.push(np(up(a+p%l,0))),i=tp(p/l);d.push(np(up(i,0))),m=function(e,t){var n=0;for(e=r==o?tp(e/Wl):e>>1,e+=tp(e/t);ep*Kl>>1<e;n+=zl)e=tp(e/ep);return tp(n+(ep+1)*e/(e+Gl))}(t,c),t=0,++r}++t,++f}return d.join("")}(e):e},m=h.split("@"),g="",1<m.length&&(g=m[0]+"@",h=m[1]),g+function(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}((h=h.replace(Ql,".")).split("."),f).join("."))),d=e.port?":"+e.port:"";var N=e.hostname||"";e.host=N+d,e.href+=e.host,S&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!kp[c])for(_=0,E=Cp.length;_<E;_++){var U,R=Cp[_];-1!==a.indexOf(R)&&((U=encodeURIComponent(R))===R&&(U=escape(R)),a=a.split(R).join(U))}var M=a.indexOf("#");-1!==M&&(e.hash=a.substr(M),a=a.slice(0,M));var D,F=a.indexOf("?");return-1!==F?(e.search=a.substr(F),e.query=a.substr(F+1),n&&(e.query=yp(e.query)),a=a.slice(0,F)):n&&(e.search="",e.query={}),a&&(e.pathname=a),Tp[c]&&e.hostname&&!e.pathname&&(e.pathname="/"),(e.pathname||e.search)&&(d=e.pathname||"",D=e.search||"",e.path=d+D),e.href=Up(e),e}function Up(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var n,r,o,i=e.protocol||"",s=e.pathname||"",a=e.hash||"",u=!1,c="";e.host?u=t+e.host:e.hostname&&(u=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(u+=":"+e.port)),e.query&&dp(e.query)&&Object.keys(e.query).length&&(n=e.query,r=r||"&",o=o||"=",null===n&&(n=void 0),c="object"==typeof n?mp(gp(n),function(e){var t=encodeURIComponent(fp(e))+o;return hp(n[e])?mp(n[e],function(e){return t+encodeURIComponent(fp(e))}).join(r):t+encodeURIComponent(fp(n[e]))}).join(r):"");var l=e.search||c&&"?"+c||"";return i&&":"!==i.substr(-1)&&(i+=":"),e.slashes||(!i||Tp[i])&&!1!==u?(u="//"+(u||""),s&&"/"!==s.charAt(0)&&(s="/"+s)):u=u||"",a&&"#"!==a.charAt(0)&&(a="#"+a),l&&"?"!==l.charAt(0)&&(l="?"+l),i+u+(s=s.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(l=l.replace("#","%23"))+a}function Rp(e){var t=e.host,n=wp.exec(t);n&&(":"!==(n=n[0])&&(e.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(e.hostname=t)}function Mp(e){var t=window.open(e,"_self");return t?Promise.resolve(t):Promise.reject()}function Dp(e,t,n){x.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",Vp)}vp.prototype.parse=function(e,t,n){return Np(this,e,t,n)},vp.prototype.format=function(){return Up(this)},vp.prototype.resolve=function(e){return this.resolveObject(xp(e,!1,!0)).format()},vp.prototype.resolveObject=function(e){var t;lp(e)&&((t=new vp).parse(e,!1,!0),e=t);for(var n,r,o=new vp,i=Object.keys(this),s=0;s<i.length;s++){var a=i[s];o[a]=this[a]}if(o.hash=e.hash,""===e.href)return o.href=o.format(),o;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(o[l]=e[l])}return Tp[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname="/"),o.href=o.format(),o}if(e.protocol&&e.protocol!==o.protocol){if(!Tp[e.protocol]){for(var p=Object.keys(e),d=0;d<p.length;d++){var h=p[d];o[h]=e[h]}return o.href=o.format(),o}if(o.protocol=e.protocol,e.host||Op[e.protocol])o.pathname=e.pathname;else{for(_=(e.pathname||"").split("/");_.length&&!(e.host=_.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==_[0]&&_.unshift(""),_.length<2&&_.unshift(""),o.pathname=_.join("/")}return o.search=e.search,o.query=e.query,o.host=e.host||"",o.auth=e.auth,o.hostname=e.hostname||e.host,o.port=e.port,(o.pathname||o.search)&&(n=o.pathname||"",r=o.search||"",o.path=n+r),o.slashes=o.slashes||e.slashes,o.href=o.format(),o}var f,m=o.pathname&&"/"===o.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=g||m||o.host&&e.pathname,v=y,b=o.pathname&&o.pathname.split("/")||[],w=o.protocol&&!Tp[o.protocol],_=e.pathname&&e.pathname.split("/")||[];if(w&&(o.hostname="",o.port=null,o.host&&(""===b[0]?b[0]=o.host:b.unshift(o.host)),o.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===_[0]?_[0]=e.host:_.unshift(e.host)),e.host=null),y=y&&(""===_[0]||""===b[0])),g)o.host=e.host||""===e.host?e.host:o.host,o.hostname=e.hostname||""===e.hostname?e.hostname:o.hostname,o.search=e.search,o.query=e.query,b=_;else if(_.length)(b=b||[]).pop(),b=b.concat(_),o.search=e.search,o.query=e.query;else if(null!=e.search)return w&&(o.hostname=o.host=b.shift(),(f=!!(o.host&&0<o.host.indexOf("@"))&&o.host.split("@"))&&(o.auth=f.shift(),o.host=o.hostname=f.shift())),o.search=e.search,o.query=e.query,cp(o.pathname)&&cp(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=o.format(),o;if(!b.length)return o.pathname=null,o.search?o.path="/"+o.search:o.path=null,o.href=o.format(),o;for(var S=b.slice(-1)[0],C=(o.host||e.host||1<b.length)&&("."===S||".."===S)||""===S,E=0,I=b.length;0<=I;I--)"."===(S=b[I])?b.splice(I,1):".."===S?(b.splice(I,1),E++):E&&(b.splice(I,1),E--);if(!y&&!v)for(;E--;)b.unshift("..");!y||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),C&&"/"!==b.join("/").substr(-1)&&b.push("");var A=""===b[0]||b[0]&&"/"===b[0].charAt(0);return w&&(o.hostname=o.host=!A&&b.length?b.shift():"",(f=!!(o.host&&0<o.host.indexOf("@"))&&o.host.split("@"))&&(o.auth=f.shift(),o.host=o.hostname=f.shift())),(y=y||o.host&&b.length)&&!A&&b.unshift(""),b.length?o.pathname=b.join("/"):(o.pathname=null,o.path=null),cp(o.pathname)&&cp(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.auth=e.auth||o.auth,o.slashes=o.slashes||e.slashes,o.href=o.format(),o},vp.prototype.parseHost=function(){return Rp(this)};function Fp(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Lp(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function jp(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var Bp=function(){return(Bp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Vp="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",qp=new x.ConsoleLogger("OAuth"),zp=(Hp.prototype.oauthSignIn=function(e,t,n,r,o,i){void 0===e&&(e="code"),void 0===o&&(o=ku.Cognito);var s=this._generateState(32),a=i?s+"-"+i:s,u=encodeURIComponent(a);window.sessionStorage.setItem("oauth_state",u);var c=this._generateRandom(128);window.sessionStorage.setItem("ouath_pkce_key",c);var l=this._generateChallenge(c),p="https://"+t+"/oauth2/authorize?"+Object.entries(Bp(Bp({redirect_uri:n,response_type:e,client_id:r,identity_provider:o,scopes:this._scopes,state:a},"code"===e?{code_challenge:l}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map(function(e){var t=jp(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)}).join("&");qp.debug("Redirecting to "+p),this._urlOpener(p,n)},Hp.prototype._handleCodeFlow=function(f){return Fp(this,void 0,void 0,function(){var n,r,o,i,s,a,u,c,l,p,d,h;return Lp(this,function(e){switch(e.label){case 0:return(n=(xp(f).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n,r=jp(t,2),o=r[0],i=r[1];return Bp(Bp({},e),((n={})[o]=i,n))},{code:void 0}).code)?(Dp("codeFlow",{},"Retrieving tokens from "+(r="https://"+this._config.domain+"/oauth2/token")),o=qu(this._config)?this._cognitoClientId:this._config.clientID,i=qu(this._config)?this._config.redirectSignIn:this._config.redirectUri,t=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),a=Bp({grant_type:"authorization_code",code:n,client_id:o,redirect_uri:i},(s=t)?{code_verifier:s}:{}),qp.debug("Calling token endpoint: "+r+" with",a),u=Object.entries(a).map(function(e){var t=jp(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)}).join("&"),[4,fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})]):[2];case 1:return[4,e.sent().json()];case 2:if(c=e.sent(),l=c.access_token,p=c.refresh_token,d=c.id_token,h=c.error)throw new Error(h);return[2,{accessToken:l,refreshToken:p,idToken:d}]}var t})})},Hp.prototype._handleImplicitFlow=function(o){return Fp(this,void 0,void 0,function(){var t,n,r;return Lp(this,function(e){return t=xp(o).hash.substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n,r=jp(t,2),o=r[0],i=r[1];return Bp(Bp({},e),((n={})[o]=i,n))},{id_token:void 0,access_token:void 0}),n=t.id_token,r=t.access_token,Dp("implicitFlow",{},"Got tokens from "+o),qp.debug("Retrieving implicit tokens from "+o+" with"),[2,{accessToken:r,idToken:n,refreshToken:null}]})})},Hp.prototype.handleAuthResponse=function(u){return Fp(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return Lp(this,function(e){switch(e.label){case 0:if(e.trys.push([0,5,,6]),t=u?Bp(Bp({},(xp(u).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=jp(t,2),r=n[0],o=n[1];return e[r]=o,e},{})),(xp(u).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=jp(t,2),r=n[0],o=n[1];return e[r]=o,e},{})):{},n=t.error,r=t.error_description,n)throw new Error(r);return o=this._validateState(t),qp.debug("Starting "+this._config.responseType+" flow with "+u),"code"!==this._config.responseType?[3,2]:(i=[{}],[4,this._handleCodeFlow(u)]);case 1:return[2,Bp.apply(void 0,[Bp.apply(void 0,i.concat([e.sent()])),{state:o}])];case 2:return s=[{}],[4,this._handleImplicitFlow(u)];case 3:return[2,Bp.apply(void 0,[Bp.apply(void 0,s.concat([e.sent()])),{state:o}])];case 4:return[3,6];case 5:throw a=e.sent(),qp.error("Error handling auth response.",a),a;case 6:return[2]}})})},Hp.prototype._validateState=function(e){if(e){var t,n=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),r=e.state;if(n&&n!==r)throw new Error("Invalid state in OAuth flow");return r}},Hp.prototype.signOut=function(){return Fp(this,void 0,void 0,function(){var t,n,r;return Lp(this,function(e){return t="https://"+this._config.domain+"/logout?",n=qu(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=qu(this._config)?this._config.redirectSignOut:this._config.returnTo,Dp("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+(t+=Object.entries({client_id:n,logout_uri:encodeURIComponent(r)}).map(function(e){var t=jp(e,2);return t[0]+"="+t[1]}).join("&"))),qp.debug("Signing out from "+t),[2,this._urlOpener(t)]})})},Hp.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";0<n;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},Hp.prototype._generateChallenge=function(e){return this._base64URL(O(e))},Hp.prototype._base64URL=function(e){return e.toString(N).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},Hp.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},Hp.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var o=e[r]%t.length;n.push(t[o])}return n.join("")},Hp);function Hp(e){var t=e.config,n=e.cognitoClientId,r=e.scopes,o=void 0===r?[]:r;this._urlOpener=t.urlOpener||Mp,this._config=t,this._cognitoClientId=n,this._scopes=o}var Kp,Gp,Wp=(Kp=function(e,t){return(Kp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Kp(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),$p=new x.ConsoleLogger("AuthError"),Yp="Authentication Error",Jp=(Wp(Zp,Gp=Error),Zp);function Zp(e){var t=this,n=ad[e],r=n.message,o=n.log;return(t=Gp.call(this,r)||this).constructor=Zp,Object.setPrototypeOf(t,Zp.prototype),t.name="AuthError",t.log=o||r,$p.error(t.log),t}var Qp,Xp=(Wp(ed,Qp=Jp),ed);function ed(e){var t=Qp.call(this,e)||this;return t.constructor=ed,Object.setPrototypeOf(t,ed.prototype),t.name="NoUserPoolError",t}function td(e,t,n){x.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",ld)}function nd(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function rd(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function od(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var id,sd,ad={noConfig:{message:Yp,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of aws-amplify or amplify packages in your node_modules.\n                Try deleting your node_modules folder and reinstalling the dependencies with `yarn install`\n        "},missingAuthConfig:{message:Yp,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties. \n            Did you run `amplify push` after adding auth via `amplify add auth`?\n            See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n        "},emptyUsername:{message:"Username cannot be empty"},invalidUsername:{message:"The username should either be a string or one of the sign in types"},emptyPassword:{message:"Password cannot be empty"},emptyCode:{message:"Confirmation code cannot be empty"},signUpError:{message:"Error creating account",log:"The first parameter should either be non-null string or object"},noMFA:{message:"No valid MFA method provided"},invalidMFA:{message:"Invalid MFA type"},emptyChallengeResponse:{message:"Challenge response cannot be empty"},noUserSession:{message:"Failed to get the session because the user is empty"},default:{message:Yp}},ud=new x.ConsoleLogger("AuthClass"),cd="aws.cognito.signin.user.admin",ld="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";function pd(e){var t=this;this.userPool=null,this.user=null,this.configure(e),this.currentUserCredentials=this.currentUserCredentials.bind(this),x.Hub.listen("auth",function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}}),x.Amplify.register(this)}(sd=id=id||{}).Cognito="COGNITO",sd.Google="Google",sd.Facebook="Facebook",sd.Amazon="LoginWithAmazon";var dd,hd=(pd.prototype.getModuleName=function(){return"Auth"},pd.prototype.configure=function(e){var n=this;if(!e)return this._config||{};ud.debug("configure Auth");var t=Object.assign({},this._config,x.Parser.parseMobilehubConfig(e).Auth,e);this._config=t;var r,o=this._config,i=o.userPoolId,s=o.userPoolWebClientId,a=o.cookieStorage,u=o.oauth,c=o.region,l=o.identityPoolId,p=o.mandatorySignIn,d=o.refreshHandlers,h=o.identityPoolRegion,f=o.clientMetadata;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw ud.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=a?new Vl(a):(new x.StorageHelper).getStorage();this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i&&((r={UserPoolId:i,ClientId:s}).Storage=this._storage,this.userPool=new Bl(r)),x.Credentials.configure({mandatorySignIn:p,region:h||c,userPoolId:i,identityPoolId:l,refreshHandlers:d,storage:this._storage});var m,g,y=u?qu(this._config.oauth)?u:u.awsCognito:void 0;return y&&(m=Object.assign({cognitoClientId:s,UserPoolId:i,domain:y.domain,scopes:y.scope,redirectSignIn:y.redirectSignIn,redirectSignOut:y.redirectSignOut,responseType:y.responseType,Storage:this._storage,urlOpener:y.urlOpener,clientMetadata:f},y.options),this._oAuthHandler=new zp({scopes:m.scopes,config:m,cognitoClientId:m.cognitoClientId}),g={},function(){if(x.JS.browserOrNode().isBrowser&&window.location)e={url:window.location.href},t=e.url,g[t]||(g[t]=!0,n._handleAuthResponse(t));else if(!x.JS.browserOrNode().isNode)throw new Error("Not supported");var e,t}()),td("configured",null,"The Auth category has been configured successfully"),this._config},pd.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var o,i=null,s=null,a=[],u=null;if(e&&"string"==typeof e){i=e,s=n?n[0]:null;var c=n?n[1]:null,l=n?n[2]:null;c&&a.push({Name:"email",Value:c}),l&&a.push({Name:"phone_number",Value:l})}else{if(!e||"object"!=typeof e)return this.rejectAuthError(Tu.SignUpError);i=e.username,s=e.password,e&&e.clientMetadata?o=e.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata);var p=e.attributes;p&&Object.keys(p).map(function(e){var t={Name:e,Value:p[e]};a.push(t)}),u=e.validationData||null}return i?s?(ud.debug("signUp attrs:",a),ud.debug("signUp validation data:",u),new Promise(function(n,r){t.userPool.signUp(i,s,a,u,function(e,t){e?(td("signUp_failure",e,i+" failed to signup"),r(e)):(td("signUp",t,i+" has signed up successfully"),n(t))},o)})):this.rejectAuthError(Tu.EmptyPassword):this.rejectAuthError(Tu.EmptyUsername)},pd.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(Tu.EmptyUsername);if(!t)return this.rejectAuthError(Tu.EmptyCode);var o,i=this.createCognitoUser(e),s=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?o=n.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata),new Promise(function(n,r){i.confirmRegistration(t,s,function(e,t){e?r(e):n(t)},o)})},pd.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(Tu.EmptyUsername);var o=this.createCognitoUser(e);return new Promise(function(n,r){o.resendConfirmationCode(function(e,t){e?r(e):n(t)},t)})},pd.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,o=null,i={};if("string"==typeof e)r=e,o=t;else{if(!e.username)return this.rejectAuthError(Tu.InvalidUsername);void 0!==t&&ud.warn("The password should be defined under the first parameter object!"),r=e.username,o=e.password,i=e.validationData}if(!r)return this.rejectAuthError(Tu.EmptyUsername);var s=new Hu({Username:r,Password:o,ValidationData:i,ClientMetadata:n});return o?this.signInWithPassword(s):this.signInWithoutPassword(s)},pd.prototype.authCallbacks=function(s,a,u){var e=this,c=this;return{onSuccess:function(i){return nd(e,void 0,void 0,function(){var t,n,r,o;return rd(this,function(e){switch(e.label){case 0:ud.debug(i),delete s.challengeName,delete s.challengeParam,e.label=1;case 1:return e.trys.push([1,4,5,9]),[4,x.Credentials.clear()];case 2:return e.sent(),[4,x.Credentials.set(i,"session")];case 3:return t=e.sent(),ud.debug("succeed to get cognito credentials",t),[3,9];case 4:return n=e.sent(),ud.debug("cannot get cognito credentials",n),[3,9];case 5:return e.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return r=e.sent(),td("signIn",c.user=r,"A user "+s.getUsername()+" has been signed in"),a(r),[3,8];case 7:return o=e.sent(),ud.error("Failed to get the signed in user",o),u(o),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(e){ud.debug("signIn failure",e),td("signIn_failure",e,s.getUsername()+" failed to signin"),u(e)},customChallenge:function(e){ud.debug("signIn custom challenge answer required"),s.challengeName="CUSTOM_CHALLENGE",s.challengeParam=e,a(s)},mfaRequired:function(e,t){ud.debug("signIn MFA required"),s.challengeName=e,s.challengeParam=t,a(s)},mfaSetup:function(e,t){ud.debug("signIn mfa setup",e),s.challengeName=e,s.challengeParam=t,a(s)},newPasswordRequired:function(e,t){ud.debug("signIn new password"),s.challengeName="NEW_PASSWORD_REQUIRED",s.challengeParam={userAttributes:e,requiredAttributes:t},a(s)},totpRequired:function(e,t){ud.debug("signIn totpRequired"),s.challengeName=e,s.challengeParam=t,a(s)},selectMFAType:function(e,t){ud.debug("signIn selectMFAType",e),s.challengeName=e,s.challengeParam=t,a(s)}}},pd.prototype.signInWithPassword=function(n){var r=this,o=this.createCognitoUser(n.getUsername());return new Promise(function(e,t){o.authenticateUser(n,r.authCallbacks(o,e,t))})},pd.prototype.signInWithoutPassword=function(n){var r=this,o=this.createCognitoUser(n.getUsername());return o.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(e,t){o.initiateAuth(n,r.authCallbacks(o,e,t))})},pd.prototype.getMFAOptions=function(e){return new Promise(function(n,r){e.getMFAOptions(function(e,t){return e?(ud.debug("get MFA Options failed",e),void r(e)):(ud.debug("get MFA options success",t),void n(t))})})},pd.prototype.getPreferredMFA=function(t,n){var i=this;return new Promise(function(r,o){var e=!!n&&n.bypassCache;t.getUserData(function(e,t){if(e)return ud.debug("getting preferred mfa failed",e),void o(e);var n=i._getMfaTypeFromUserData(t);return n?void r(n):void o("invalid MFA Type")},{bypassCache:e})})},pd.prototype._getMfaTypeFromUserData=function(e){var t,n=null,r=e.PreferredMfaSetting;return r?n=r:(t=e.UserMFASettingList)?0===t.length?n="NOMFA":ud.debug("invalid case for getPreferredMFA",e):n=e.MFAOptions?"SMS_MFA":"NOMFA",n},pd.prototype._getUserData=function(e,t){return new Promise(function(n,r){e.getUserData(function(e,t){return e?(ud.debug("getting user data failed",e),void r(e)):void n(t)},t)})},pd.prototype.setPreferredMFA=function(s,a){return nd(this,void 0,void 0,function(){var t,n,i,r,o;return rd(this,function(e){switch(e.label){case 0:return[4,this._getUserData(s,{bypassCache:!0})];case 1:switch(t=e.sent(),i=n=null,a){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return n={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return r=t.UserMFASettingList,[4,this._getMfaTypeFromUserData(t)];case 5:if("NOMFA"===(o=e.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===o)n={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==o)return[2,this.rejectAuthError(Tu.InvalidMFA)];i={PreferredMfa:!1,Enabled:!1}}return r&&0!==r.length&&r.forEach(function(e){"SMS_MFA"===e?n={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(i={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return ud.debug("no validmfa method provided"),[2,this.rejectAuthError(Tu.NoMFA)];case 7:return[2,new Promise(function(r,o){s.setUserMfaPreference(n,i,function(e,n){return e?(ud.debug("Set user mfa preference error",e),o(e)):(ud.debug("Set user mfa success",n),ud.debug("Caching the latest user data into local"),void s.getUserData(function(e,t){return e?(ud.debug("getting user data failed",e),o(e)):r(n)},{bypassCache:!0}))})})]}})})},pd.prototype.disableSMS=function(e){return new Promise(function(n,r){e.disableMFA(function(e,t){return e?(ud.debug("disable mfa failed",e),void r(e)):(ud.debug("disable mfa succeed",t),void n(t))})})},pd.prototype.enableSMS=function(e){return new Promise(function(n,r){e.enableMFA(function(e,t){return e?(ud.debug("enable mfa failed",e),void r(e)):(ud.debug("enable mfa succeed",t),void n(t))})})},pd.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(e){ud.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){ud.debug("associateSoftwareToken sucess",e),t(e)}})})},pd.prototype.verifyTotpToken=function(e,r){return ud.debug("verfication totp token",e,r),new Promise(function(t,n){e.verifySoftwareToken(r,"My TOTP device",{onFailure:function(e){ud.debug("verifyTotpToken failed",e),n(e)},onSuccess:function(e){ud.debug("verifyTotpToken success",e),t(e)}})})},pd.prototype.confirmSignIn=function(i,e,n,r){var s=this;if(void 0===r&&(r=this._config.clientMetadata),!e)return this.rejectAuthError(Tu.EmptyCode);var a=this;return new Promise(function(o,t){i.sendMFACode(e,{onSuccess:function(r){return nd(s,void 0,void 0,function(){var t,n;return rd(this,function(e){switch(e.label){case 0:ud.debug(r),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,x.Credentials.clear()];case 2:return e.sent(),[4,x.Credentials.set(r,"session")];case 3:return t=e.sent(),ud.debug("succeed to get cognito credentials",t),[3,6];case 4:return n=e.sent(),ud.debug("cannot get cognito credentials",n),[3,6];case 5:return td("signIn",a.user=i,i+" has signed in"),o(i),[7];case 6:return[2]}})})},onFailure:function(e){ud.debug("confirm signIn failure",e),t(e)}},n,r)})},pd.prototype.completeNewPassword=function(i,e,n,r){var s=this;if(void 0===r&&(r=this._config.clientMetadata),!e)return this.rejectAuthError(Tu.EmptyPassword);var a=this;return new Promise(function(o,t){i.completeNewPasswordChallenge(e,n,{onSuccess:function(r){return nd(s,void 0,void 0,function(){var t,n;return rd(this,function(e){switch(e.label){case 0:ud.debug(r),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,x.Credentials.clear()];case 2:return e.sent(),[4,x.Credentials.set(r,"session")];case 3:return t=e.sent(),ud.debug("succeed to get cognito credentials",t),[3,6];case 4:return n=e.sent(),ud.debug("cannot get cognito credentials",n),[3,6];case 5:return td("signIn",a.user=i,i+" has signed in"),o(i),[7];case 6:return[2]}})})},onFailure:function(e){ud.debug("completeNewPassword failure",e),td("completeNewPassword_failure",e,s.user+" failed to complete the new password flow"),t(e)},mfaRequired:function(e,t){ud.debug("signIn MFA required"),i.challengeName=e,i.challengeParam=t,o(i)},mfaSetup:function(e,t){ud.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,o(i)}},r)})},pd.prototype.sendCustomChallengeAnswer=function(n,r,o){var i=this;return void 0===o&&(o=this._config.clientMetadata),this.userPool?r?new Promise(function(e,t){n.sendCustomChallengeAnswer(r,i.authCallbacks(n,e,t),o)}):this.rejectAuthError(Tu.EmptyChallengeResponse):this.rejectNoUserPool()},pd.prototype.updateUserAttributes=function(i,s,a){void 0===a&&(a=this._config.clientMetadata);var u=[],e=this;return new Promise(function(r,o){e.userSession(i).then(function(e){for(var t in s){var n;"sub"!==t&&t.indexOf("_verified")<0&&(n={Name:t,Value:s[t]},u.push(n))}i.updateAttributes(u,function(e,t){return e?o(e):r(t)},a)})})},pd.prototype.userAttributes=function(t){var e=this;return new Promise(function(n,r){e.userSession(t).then(function(e){t.getUserAttributes(function(e,t){e?r(e):n(t)})})})},pd.prototype.verifiedContact=function(e){var o=this;return this.userAttributes(e).then(function(e){var t=o.attributesToObject(e),n={},r={};return t.email&&(t.email_verified?r.email=t.email:n.email=t.email),t.phone_number&&(t.phone_number_verified?r.phone_number=t.phone_number:n.phone_number=t.phone_number),{verified:r,unverified:n}})},pd.prototype.currentUserPoolUser=function(o){var e=this;if(!this.userPool)return this.rejectNoUserPool();var p=this;return new Promise(function(c,l){e._storageSync.then(function(){var u=p.userPool.getCurrentUser();if(!u)return ud.debug("Failed to get user from user pool"),void l("No current user");u.getSession(function(e,t){if(e)return ud.debug("Failed to get the user session",e),void l(e);var n=!!o&&o.bypassCache,r=t.getAccessToken().decodePayload().scope;if(!(void 0===r?"":r).split(" ").includes(cd))return ud.debug("Unable to get the user data because the "+cd+" is not in the scopes of the access token"),c(u);u.getUserData(function(e,t){if(e)return ud.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?l(e):c(u));for(var n=t.PreferredMfaSetting||"NOMFA",r=[],o=0;o<t.UserAttributes.length;o++){var i={Name:t.UserAttributes[o].Name,Value:t.UserAttributes[o].Value},s=new hl(i);r.push(s)}var a=p.attributesToObject(r);return Object.assign(u,{attributes:a,preferredMFA:n}),c(u)},{bypassCache:n})})}).catch(function(e){return ud.debug("Failed to sync cache info into memory",e),l(e)})})},pd.prototype.currentAuthenticatedUser=function(i){return nd(this,void 0,void 0,function(){var t,n,r,o;return rd(this,function(e){switch(e.label){case 0:ud.debug("getting current authenticated user"),t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw n=e.sent(),ud.debug("Failed to sync cache info into memory",n),n;case 4:try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user}catch(e){ud.debug("cannot load federated user from auth storage")}return t?(this.user=t,ud.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:ud.debug("get current authenticated userpool user"),r=null,e.label=6;case 6:return e.trys.push([6,8,,9]),[4,this.currentUserPoolUser(i)];case 7:return r=e.sent(),[3,9];case 8:throw"No userPool"===(o=e.sent())&&ud.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),ud.debug("The user is not authenticated by the error",o),"not authenticated";case 9:return this.user=r,[2,this.user]}})})},pd.prototype.currentSession=function(){var r=this;return ud.debug("Getting current session"),this.userPool?new Promise(function(t,n){r.currentUserPoolUser().then(function(e){r.userSession(e).then(function(e){t(e)}).catch(function(e){ud.debug("Failed to get the current session",e),n(e)})}).catch(function(e){ud.debug("Failed to get the current user",e),n(e)})}):Promise.reject()},pd.prototype.userSession=function(o){return o?new Promise(function(n,r){ud.debug("Getting the session from this user:",o),o.getSession(function(e,t){return e?(ud.debug("Failed to get the session from user",o),void r(e)):(ud.debug("Succeed to get the user session",t),void n(t))})}):(ud.debug("the user is null"),this.rejectAuthError(Tu.NoUserSession))},pd.prototype.currentUserCredentials=function(){return nd(this,void 0,void 0,function(){var t,n;return rd(this,function(e){switch(e.label){case 0:ud.debug("Getting current user credentials"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw t=e.sent(),ud.debug("Failed to sync cache info into memory",t),t;case 4:n=null;try{n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){ud.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return n?[2,x.Credentials.refreshFederatedToken(n)]:[2,this.currentSession().then(function(e){return ud.debug("getting session success",e),x.Credentials.set(e,"session")}).catch(function(e){return ud.debug("getting session failed",e),x.Credentials.set(null,"guest")})]}})})},pd.prototype.currentCredentials=function(){return ud.debug("getting current credentials"),x.Credentials.get()},pd.prototype.verifyUserAttribute=function(n,r,o){return void 0===o&&(o=this._config.clientMetadata),new Promise(function(e,t){n.getAttributeVerificationCode(r,{onSuccess:function(){return e()},onFailure:function(e){return t(e)},clientMetadata:o})})},pd.prototype.verifyUserAttributeSubmit=function(e,r,o){return o?new Promise(function(t,n){e.verifyAttribute(r,o,{onSuccess:function(e){t(e)},onFailure:function(e){n(e)}})}):this.rejectAuthError(Tu.EmptyCode)},pd.prototype.verifyCurrentUserAttribute=function(t){var n=this;return n.currentUserPoolUser().then(function(e){return n.verifyUserAttribute(e,t)})},pd.prototype.verifyCurrentUserAttributeSubmit=function(t,n){var r=this;return r.currentUserPoolUser().then(function(e){return r.verifyUserAttributeSubmit(e,t,n)})},pd.prototype.cognitoIdentitySignOut=function(s,a){return nd(this,void 0,void 0,function(){var t,o,i=this;return rd(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._storageSync];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),ud.debug("Failed to sync cache info into memory",t),t;case 3:return o=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(n,r){if(!s||!s.global)return ud.debug("user sign out",a),a.signOut(),o?n(i._oAuthHandler.signOut()):n();ud.debug("user global sign out",a),a.getSession(function(e,t){return e?(ud.debug("failed to get the user session",e),r(e)):void a.globalSignOut({onSuccess:function(e){return ud.debug("global sign out success"),o?n(i._oAuthHandler.signOut()):n()},onFailure:function(e){return ud.debug("global sign out failed",e),r(e)}})})})]}})})},pd.prototype.signOut=function(n){return nd(this,void 0,void 0,function(){var t;return rd(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return e.sent(),[3,3];case 2:return e.sent(),ud.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(n,t)]:[3,5]:[3,7];case 4:return e.sent(),[3,6];case 5:ud.debug("no current Cognito user"),e.label=6;case 6:return[3,8];case 7:ud.debug("no Congito User pool"),e.label=8;case 8:return td("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},pd.prototype.cleanCachedItems=function(){return nd(this,void 0,void 0,function(){return rd(this,function(e){switch(e.label){case 0:return[4,x.Credentials.clear()];case 1:return e.sent(),[2]}})})},pd.prototype.changePassword=function(t,o,i,s){var e=this;return void 0===s&&(s=this._config.clientMetadata),new Promise(function(n,r){e.userSession(t).then(function(e){t.changePassword(o,i,function(e,t){return e?(ud.debug("change password failure",e),r(e)):n(t)},s)})})},pd.prototype.forgotPassword=function(r,e){if(void 0===e&&(e=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!r)return this.rejectAuthError(Tu.EmptyUsername);var o=this.createCognitoUser(r);return new Promise(function(t,n){o.forgotPassword({onSuccess:function(){t()},onFailure:function(e){ud.debug("forgot password failure",e),td("forgotPassword_failure",e,r+" forgotPassword failed"),n(e)},inputVerificationCode:function(e){td("forgotPassword",o,r+" has initiated forgot password flow"),t(e)}},e)})},pd.prototype.forgotPasswordSubmit=function(n,r,o,i){if(void 0===i&&(i=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(Tu.EmptyUsername);if(!r)return this.rejectAuthError(Tu.EmptyCode);if(!o)return this.rejectAuthError(Tu.EmptyPassword);var s=this.createCognitoUser(n);return new Promise(function(e,t){s.confirmPassword(r,o,{onSuccess:function(){td("forgotPasswordSubmit",s,n+" forgotPasswordSubmit successful"),e()},onFailure:function(e){td("forgotPasswordSubmit_failure",e,n+" forgotPasswordSubmit failed"),t(e)}},i)})},pd.prototype.currentUserInfo=function(){return nd(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return rd(this,function(e){switch(e.label){case 0:return(t=x.Credentials.getCredSource())&&"aws"!==t&&"userPool"!==t?[3,9]:[4,this.currentUserPoolUser().catch(function(e){return ud.debug(e)})];case 1:if(!(a=e.sent()))return[2,null];e.label=2;case 2:return e.trys.push([2,8,,9]),[4,this.userAttributes(a)];case 3:n=e.sent(),r=this.attributesToObject(n),o=null,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return o=e.sent(),[3,7];case 6:return i=e.sent(),ud.debug("Failed to retrieve credentials while getting current user info",i),[3,7];case 7:return[2,{id:o?o.identityId:void 0,username:a.getUsername(),attributes:r}];case 8:return s=e.sent(),ud.debug("currentUserInfo error",s),[2,{}];case 9:return"federated"===t?[2,(a=this.user)||{}]:[2]}})})},pd.prototype.federatedSignIn=function(h,f,m){return nd(this,void 0,void 0,function(){var n,r,o,i,s,a,u,c,l,p,d;return rd(this,function(e){switch(e.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===h&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return Vu(h)||(t=h)&&["customProvider","customState"].find(function(e){return t.hasOwnProperty(e)})||void 0===h?(n=h||{provider:id.Cognito},s=Vu(n)?n.provider:n.customProvider,Vu(n),r=n.customState,this._config.userPoolId&&(o=qu(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,i=qu(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,i,o,s,r)),[3,4]):[3,1];case 1:s=h;try{(a=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&ud.warn("There is already a signed in user: "+a+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return u=f.token,c=f.identity_id,l=f.expires_at,[4,x.Credentials.set({provider:s,token:u,identity_id:c,user:m,expires_at:l},"federation")];case 2:return p=e.sent(),[4,this.currentAuthenticatedUser()];case 3:return td("signIn",d=e.sent(),"A user "+d.username+" has been signed in"),ud.debug("federated sign in credentials",p),[2,p];case 4:return[2]}var t})})},pd.prototype._handleAuthResponse=function(f){return nd(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h;return rd(this,function(e){switch(e.label){case 0:if(!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(td("parsingCallbackUrl",{url:f},"The callback url is being parsed"),t=f||(x.JS.browserOrNode().isBrowser?window.location.href:""),n=!!(xp(t).query||"").split("&").map(function(e){return e.split("=")}).find(function(e){var t=od(e,1)[0];return"code"===t||"error"===t}),r=!!(xp(t).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).find(function(e){var t=od(e,1)[0];return"access_token"===t||"error"===t}),!n&&!r)return[3,6];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),e.label=1;case 1:return e.trys.push([1,5,,6]),[4,this._oAuthHandler.handleAuthResponse(t)];case 2:return o=e.sent(),i=o.accessToken,s=o.idToken,a=o.refreshToken,u=o.state,c=new cl({IdToken:new al({IdToken:s}),RefreshToken:new ul({RefreshToken:a}),AccessToken:new Xc({AccessToken:i})}),l=void 0,this._config.identityPoolId?[4,x.Credentials.set(c,"session")]:[3,4];case 3:l=e.sent(),ud.debug("AWS credentials",l),e.label=4;case 4:return p=/-/.test(u),td("signIn",d=this.createCognitoUser(c.getIdToken().decodePayload()["cognito:username"]),"A user "+d.getUsername()+" has been signed in"),td("cognitoHostedUI",d,"A user "+d.getUsername()+" has been signed in via Cognito Hosted UI"),p&&td("customOAuthState",u.split("-").splice(1).join("-"),"State for user "+d.getUsername()),d.setSignInUserSession(c),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),[2,l];case 5:return h=e.sent(),ud.debug("Error in cognito hosted auth response",h),td("signIn_failure",h,"The OAuth response flow failed"),td("cognitoHostedUI_failure",h,"A failure occurred when returning to the Cognito Hosted UI"),td("customState_failure",h,"A failure occurred when returning state"),[3,6];case 6:return[2]}})})},pd.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},pd.prototype.attributesToObject=function(e){var t={};return e&&e.map(function(e){"true"===e.Value?t[e.Name]=!0:"false"===e.Value?t[e.Name]=!1:t[e.Name]=e.Value}),t},pd.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var n=this._config.authenticationFlowType,r=new vl(t);return n&&r.setAuthenticationFlowType(n),r},pd.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},pd.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?Tu.NoConfig:Tu.MissingAuthConfig},pd.prototype.rejectAuthError=function(e){return Promise.reject(new Jp(e))},pd.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new Xp(e))},new pd(null)),fd="s3.{region}.amazonaws.com",md=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),gd=new Set(["cn-north-1","cn-northwest-1"]),yd=new Set(["us-iso-east-1"]),vd=new Set(["us-isob-east-1"]),bd=new Set(["us-gov-west-1","us-gov-east-1"]),wd=te(te({},{apiVersion:"2006-03-01",disableHostPrefix:!1,signingName:"s3",regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips-us-gov-west-1.amazonaws.com",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com"};break;case"us-east-1":n={hostname:"s3.amazonaws.com"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com"};break;default:md.has(e)&&(n={hostname:fd.replace("{region}",e)}),gd.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e)}),yd.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e)}),vd.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e)}),bd.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:fd.replace("{region}",e)})}return Promise.resolve(n)},signingEscapePath:!1}),{requestHandler:new i.NodeHttpHandler,sha256:o.Hash.bind(null,"sha256"),urlParser:s.parseUrl,bodyLengthChecker:a.calculateBodyLength,streamCollector:u.streamCollector,base64Decoder:l.fromBase64,base64Encoder:l.toBase64,utf8Decoder:c.fromUtf8,utf8Encoder:c.toUtf8,defaultUserAgent:p.defaultUserAgent("@aws-sdk/client-s3","1.0.0-beta.5"),runtime:"node",credentialDefaultProvider:n.defaultProvider,regionDefaultProvider:r.defaultProvider,md5:o.Hash.bind(null,"md5"),streamHasher:R.fileStreamHasher,eventStreamSerdeProvider:E.eventStreamSerdeProvider}),_d=(ee(Sd,dd=w.Client),Sd.prototype.destroy=function(){},Sd);function Sd(e){var t=this,n=te(te({},wd),e),r=d.resolveRegionConfig(n),o=d.resolveEndpointsConfig(r),i=y.resolveAwsAuthConfig(o),s=g.resolveRetryConfig(i),a=v.resolveUserAgentConfig(s),u=M.resolveBucketEndpointConfig(a),c=m.resolveHostHeaderConfig(u),l=I.resolveEventStreamSerdeConfig(c);return(t=dd.call(this,l)||this).config=l,t.middlewareStack.use(y.getAwsAuthPlugin(t.config)),t.middlewareStack.use(g.getRetryPlugin(t.config)),t.middlewareStack.use(v.getUserAgentPlugin(t.config)),t.middlewareStack.use(f.getContentLengthPlugin(t.config)),t.middlewareStack.use(F.getValidateBucketNamePlugin(t.config)),t.middlewareStack.use(D.getAddExpectContinuePlugin(t.config)),t.middlewareStack.use(m.getHostHeaderPlugin(t.config)),t}function Cd(c,l){return ie(this,void 0,void 0,function(){var r,o,i,s,a,u;return se(this,function(e){if(r={"Content-Type":"application/xml"},void 0!==c.RequestPayer&&(r["x-amz-request-payer"]=c.RequestPayer),o="/{Bucket}/{Key+}",void 0===c.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=c.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(o=o.replace("{Bucket}",w.extendedEncodeURIComponent(i)),void 0===c.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=c.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return o=o.replace("{Key+}",i.split("/").map(function(e){return w.extendedEncodeURIComponent(e)}).join("/")),s={},void 0!==c.UploadId&&(s.uploadId=c.UploadId),void 0!==c.MultipartUpload&&(t=c.MultipartUpload,n=new L.XmlNode("CompletedMultipartUpload"),void 0!==t.Parts&&function(e){var t,n,r,o,i=[];try{for(var s=ae(e),a=s.next();!a.done;a=s.next()){var u=a.value,c=(r=u,o=void 0,o=new L.XmlNode("CompletedPart"),void 0!==r.ETag&&o.addChildNode(new L.XmlNode("ETag").addChildNode(new L.XmlText(r.ETag)).withName("ETag")),void 0!==r.PartNumber&&o.addChildNode(new L.XmlNode("PartNumber").addChildNode(new L.XmlText(String(r.PartNumber))).withName("PartNumber")),o);i.push(c.withName("member"))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i}(t.Parts).map(function(e){e=e.withName("Part"),n.addChildNode(e)}),a='<?xml version="1.0" encoding="UTF-8"?>',(u=n).addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=u.toString()),[2,new _.HttpRequest(te(te({},l.endpoint),{protocol:"https",method:"POST",headers:r,path:o,query:s,body:a}))];var t,n})})}function Ed(n,r){return ie(this,void 0,void 0,function(){var t;return se(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&400<=n.statusCode?[2,function(l,p){return ie(this,void 0,void 0,function(){var t,r,o,i,s,a,u,c;return se(this,function(e){switch(e.label){case 0:return r=[te({},l)],o={},[4,Td(l.body,p)];case 1:switch(t=te.apply(void 0,r.concat([(o.body=e.sent(),o)])),s="UnknownError",s=xd(l,t.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return a=[{}],[4,(n=t,ie(void 0,void 0,void 0,function(){var t;return se(this,function(e){return t={name:"NoSuchUpload",$fault:"client",$metadata:Ud(n)},n.body,[2,t]})}))];case 3:return i=te.apply(void 0,[te.apply(void 0,a.concat([e.sent()])),{name:s,$metadata:Ud(l)}]),[3,5];case 4:u=t.body,s=u.code||u.Code||s,i=te(te({},u),{name:""+s,message:u.message||u.Message||s,$fault:"client",$metadata:Ud(l)}),e.label=5;case 5:return c=i.message||i.Message||s,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}var n})})}(n,r)]:(t={$metadata:Ud(n),__type:"AbortMultipartUploadOutput",RequestCharged:void 0},void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,kd(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})})}function Id(r,o){return ie(this,void 0,void 0,function(){var t,n;return se(this,function(e){return 200!==r.statusCode&&400<=r.statusCode?[2,function(l,p){return ie(this,void 0,void 0,function(){var t,r,o,i,s,a,u,c;return se(this,function(e){switch(e.label){case 0:return r=[te({},l)],o={},[4,Td(l.body,p)];case 1:switch(t=te.apply(void 0,r.concat([(o.body=e.sent(),o)])),s="UnknownError",s=xd(l,t.body)){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return a=[{}],[4,(n=t,ie(void 0,void 0,void 0,function(){var t;return se(this,function(e){return t={name:"NoSuchKey",$fault:"client",$metadata:Ud(n)},n.body,[2,t]})}))];case 3:return i=te.apply(void 0,[te.apply(void 0,a.concat([e.sent()])),{name:s,$metadata:Ud(l)}]),[3,5];case 4:u=t.body,s=u.code||u.Code||s,i=te(te({},u),{name:""+s,message:u.message||u.Message||s,$fault:"client",$metadata:Ud(l)}),e.label=5;case 5:return c=i.message||i.Message||s,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}var n})})}(r,o)]:(t={$metadata:Ud(r),__type:"GetObjectOutput",AcceptRanges:void 0,Body:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==r.headers["accept-ranges"]&&(t.AcceptRanges=r.headers["accept-ranges"]),void 0!==r.headers["cache-control"]&&(t.CacheControl=r.headers["cache-control"]),void 0!==r.headers["content-disposition"]&&(t.ContentDisposition=r.headers["content-disposition"]),void 0!==r.headers["content-encoding"]&&(t.ContentEncoding=r.headers["content-encoding"]),void 0!==r.headers["content-language"]&&(t.ContentLanguage=r.headers["content-language"]),void 0!==r.headers["content-length"]&&(t.ContentLength=parseInt(r.headers["content-length"],10)),void 0!==r.headers["content-range"]&&(t.ContentRange=r.headers["content-range"]),void 0!==r.headers["content-type"]&&(t.ContentType=r.headers["content-type"]),void 0!==r.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===r.headers["x-amz-delete-marker"]),void 0!==r.headers.etag&&(t.ETag=r.headers.etag),void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers.expires&&(t.Expires=new Date(r.headers.expires)),void 0!==r.headers["last-modified"]&&(t.LastModified=new Date(r.headers["last-modified"])),void 0!==r.headers["x-amz-missing-meta"]&&(t.MissingMeta=parseInt(r.headers["x-amz-missing-meta"],10)),void 0!==r.headers["x-amz-object-lock-legal-hold"]&&(t.ObjectLockLegalHoldStatus=r.headers["x-amz-object-lock-legal-hold"]),void 0!==r.headers["x-amz-object-lock-mode"]&&(t.ObjectLockMode=r.headers["x-amz-object-lock-mode"]),void 0!==r.headers["x-amz-object-lock-retain-until-date"]&&(t.ObjectLockRetainUntilDate=new Date(r.headers["x-amz-object-lock-retain-until-date"])),void 0!==r.headers["x-amz-mp-parts-count"]&&(t.PartsCount=parseInt(r.headers["x-amz-mp-parts-count"],10)),void 0!==r.headers["x-amz-replication-status"]&&(t.ReplicationStatus=r.headers["x-amz-replication-status"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-restore"]&&(t.Restore=r.headers["x-amz-restore"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-storage-class"]&&(t.StorageClass=r.headers["x-amz-storage-class"]),void 0!==r.headers["x-amz-tagging-count"]&&(t.TagCount=parseInt(r.headers["x-amz-tagging-count"],10)),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["x-amz-website-redirect-location"]&&(t.WebsiteRedirectLocation=r.headers["x-amz-website-redirect-location"]),Object.keys(r.headers).forEach(function(e){void 0===t.Metadata&&(t.Metadata={}),e.startsWith("x-amz-meta-")&&(t.Metadata[e.substring(11)]=r.headers[e])}),n=r.body,t.Body=n,[2,Promise.resolve(t)])})})}function Ad(s,a){return ie(this,void 0,void 0,function(){var t,o,i;return se(this,function(e){switch(e.label){case 0:return 200!==s.statusCode&&400<=s.statusCode?[2,function(l,p){return ie(this,void 0,void 0,function(){var t,r,o,i,s,a,u,c;return se(this,function(e){switch(e.label){case 0:return r=[te({},l)],o={},[4,Td(l.body,p)];case 1:switch(t=te.apply(void 0,r.concat([(o.body=e.sent(),o)])),s="UnknownError",s=xd(l,t.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return a=[{}],[4,(n=t,ie(void 0,void 0,void 0,function(){var t;return se(this,function(e){return t={name:"NoSuchBucket",$fault:"client",$metadata:Ud(n)},n.body,[2,t]})}))];case 3:return i=te.apply(void 0,[te.apply(void 0,a.concat([e.sent()])),{name:s,$metadata:Ud(l)}]),[3,5];case 4:u=t.body,s=u.code||u.Code||s,i=te(te({},u),{name:""+s,message:u.message||u.Message||s,$fault:"client",$metadata:Ud(l)}),e.label=5;case 5:return c=i.message||i.Message||s,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}var n})})}(s,a)]:(t={$metadata:Ud(s),__type:"ListObjectsOutput",CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,Td(s.body,a)]);case 1:return""===(o=e.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==o.CommonPrefixes&&(i=o.CommonPrefixes instanceof Array?o.CommonPrefixes:[o.CommonPrefixes],t.CommonPrefixes=(n=[],(i||[]).map(function(e){var t;n.push((t={__type:"CommonPrefix",Prefix:void 0},void 0!==e.Prefix&&(t.Prefix=e.Prefix),t))}),n)),""===o.Contents&&(t.Contents=[]),void 0!==o.Contents&&(i=o.Contents instanceof Array?o.Contents:[o.Contents],t.Contents=(r=[],(i||[]).map(function(e){var t,n;r.push((n={__type:"Object",ETag:void 0,Key:void 0,LastModified:void 0,Owner:void 0,Size:void 0,StorageClass:void 0},void 0!==(t=e).ETag&&(n.ETag=t.ETag),void 0!==t.Key&&(n.Key=t.Key),void 0!==t.LastModified&&(n.LastModified=new Date(t.LastModified)),void 0!==t.Owner&&(n.Owner=Od(t.Owner)),void 0!==t.Size&&(n.Size=parseInt(t.Size)),void 0!==t.StorageClass&&(n.StorageClass=t.StorageClass),n))}),r)),void 0!==o.Delimiter&&(t.Delimiter=o.Delimiter),void 0!==o.EncodingType&&(t.EncodingType=o.EncodingType),void 0!==o.IsTruncated&&(t.IsTruncated="true"==o.IsTruncated),void 0!==o.Marker&&(t.Marker=o.Marker),void 0!==o.MaxKeys&&(t.MaxKeys=parseInt(o.MaxKeys)),void 0!==o.Name&&(t.Name=o.Name),void 0!==o.NextMarker&&(t.NextMarker=o.NextMarker),void 0!==o.Prefix&&(t.Prefix=o.Prefix),[2,Promise.resolve(t)]}var r,n})})}function Pd(a,u){return ie(this,void 0,void 0,function(){var o,i,s;return se(this,function(e){switch(e.label){case 0:return 200!==a.statusCode&&400<=a.statusCode?[2,function(u,c){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return se(this,function(e){switch(e.label){case 0:return n=[te({},u)],r={},[4,Td(u.body,c)];case 1:return t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=xd(u,t.body),s=t.body,i=s.code||s.Code||i,o=te(te({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:Ud(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})}(a,u)]:(o={$metadata:Ud(a),__type:"ListPartsOutput",AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==a.headers["x-amz-abort-date"]&&(o.AbortDate=new Date(a.headers["x-amz-abort-date"])),void 0!==a.headers["x-amz-abort-rule-id"]&&(o.AbortRuleId=a.headers["x-amz-abort-rule-id"]),void 0!==a.headers["x-amz-request-charged"]&&(o.RequestCharged=a.headers["x-amz-request-charged"]),[4,Td(a.body,u)]);case 1:return void 0!==(i=e.sent()).Bucket&&(o.Bucket=i.Bucket),void 0!==i.Initiator&&(o.Initiator=(t=i.Initiator,n={__type:"Initiator",DisplayName:void 0,ID:void 0},void 0!==t.DisplayName&&(n.DisplayName=t.DisplayName),void 0!==t.ID&&(n.ID=t.ID),n)),void 0!==i.IsTruncated&&(o.IsTruncated="true"==i.IsTruncated),void 0!==i.Key&&(o.Key=i.Key),void 0!==i.MaxParts&&(o.MaxParts=parseInt(i.MaxParts)),void 0!==i.NextPartNumberMarker&&(o.NextPartNumberMarker=parseInt(i.NextPartNumberMarker)),void 0!==i.Owner&&(o.Owner=Od(i.Owner)),void 0!==i.PartNumberMarker&&(o.PartNumberMarker=parseInt(i.PartNumberMarker)),""===i.Part&&(o.Parts=[]),void 0!==i.Part&&(s=i.Part instanceof Array?i.Part:[i.Part],o.Parts=(r=[],(s||[]).map(function(e){var t,n;r.push((n={__type:"Part",ETag:void 0,LastModified:void 0,PartNumber:void 0,Size:void 0},void 0!==(t=e).ETag&&(n.ETag=t.ETag),void 0!==t.LastModified&&(n.LastModified=new Date(t.LastModified)),void 0!==t.PartNumber&&(n.PartNumber=parseInt(t.PartNumber)),void 0!==t.Size&&(n.Size=parseInt(t.Size)),n))}),r)),void 0!==i.StorageClass&&(o.StorageClass=i.StorageClass),void 0!==i.UploadId&&(o.UploadId=i.UploadId),[2,Promise.resolve(o)]}var t,n,r})})}function kd(e,t){return e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}function Od(e,t){var n={__type:"Owner",DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n}function Td(e,t){return kd(e,n=t).then(function(e){return n.utf8Encoder(e)}).then(function(e){if(e.length){var t=j.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}}),n=Object.keys(t)[0],r=t[n];return r["#text"]&&(r[n]=r["#text"],delete r["#text"]),r}return{}});var n}function xd(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""}var Nd,Ud=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},Rd=(ee(Md,Nd=w.Command),Md.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(M.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Md.prototype.serialize=function(e,t){return function(i,s){return ie(this,void 0,void 0,function(){var t,n,r,o;return se(this,function(e){if(t={"Content-Type":""},void 0!==i.RequestPayer&&(t["x-amz-request-payer"]=i.RequestPayer),n="/{Bucket}/{Key+}",void 0===i.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=i.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",w.extendedEncodeURIComponent(r)),void 0===i.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=i.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return w.extendedEncodeURIComponent(e)}).join("/")),o={"x-id":"AbortMultipartUpload"},void 0!==i.UploadId&&(o.uploadId=i.UploadId),[2,new _.HttpRequest(te(te({},s.endpoint),{protocol:"https",method:"DELETE",headers:t,path:n,query:o,body:void 0}))]})})}(e,t)},Md.prototype.deserialize=function(e,t){return Ed(e,t)},Md);function Md(e){var t=Nd.call(this)||this;return t.input=e,t}var Dd,Fd=(ee(Ld,Dd=w.Command),Ld.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(M.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Ld.prototype.serialize=function(e,t){return Cd(e,t)},Ld.prototype.deserialize=function(e,t){return function(r,o){return ie(this,void 0,void 0,function(){var t,n;return se(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,function(u,c){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return se(this,function(e){switch(e.label){case 0:return n=[te({},u)],r={},[4,Td(u.body,c)];case 1:return t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=xd(u,t.body),s=t.body,i=s.code||s.Code||i,o=te(te({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:Ud(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})}(r,o)]:(t={$metadata:Ud(r),__type:"CompleteMultipartUploadOutput",Bucket:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),[4,Td(r.body,o)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.ETag&&(t.ETag=n.ETag),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.Location&&(t.Location=n.Location),[2,Promise.resolve(t)]}})})}(e,t)},Ld);function Ld(e){var t=Dd.call(this)||this;return t.input=e,t}var jd,Bd=(ee(Vd,jd=w.Command),Vd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(B.getSsecPlugin(t)),this.middlewareStack.use(M.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Vd.prototype.serialize=function(e,t){return function(i,s){return ie(this,void 0,void 0,function(){var t,n,r,o;return se(this,function(e){if(t={"Content-Type":""},void 0!==i.ACL&&(t["x-amz-acl"]=i.ACL),void 0!==i.CacheControl&&(t["Cache-Control"]=i.CacheControl),void 0!==i.ContentDisposition&&(t["Content-Disposition"]=i.ContentDisposition),void 0!==i.ContentEncoding&&(t["Content-Encoding"]=i.ContentEncoding),void 0!==i.ContentLanguage&&(t["Content-Language"]=i.ContentLanguage),void 0!==i.ContentType&&(t["Content-Type"]=i.ContentType),void 0!==i.Expires&&(t.Expires=w.dateToUtcString(i.Expires).toString()),void 0!==i.GrantFullControl&&(t["x-amz-grant-full-control"]=i.GrantFullControl),void 0!==i.GrantRead&&(t["x-amz-grant-read"]=i.GrantRead),void 0!==i.GrantReadACP&&(t["x-amz-grant-read-acp"]=i.GrantReadACP),void 0!==i.GrantWriteACP&&(t["x-amz-grant-write-acp"]=i.GrantWriteACP),void 0!==i.ObjectLockLegalHoldStatus&&(t["x-amz-object-lock-legal-hold"]=i.ObjectLockLegalHoldStatus),void 0!==i.ObjectLockMode&&(t["x-amz-object-lock-mode"]=i.ObjectLockMode),void 0!==i.ObjectLockRetainUntilDate&&(t["x-amz-object-lock-retain-until-date"]=(i.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()),void 0!==i.RequestPayer&&(t["x-amz-request-payer"]=i.RequestPayer),void 0!==i.SSECustomerAlgorithm&&(t["x-amz-server-side-encryption-customer-algorithm"]=i.SSECustomerAlgorithm),void 0!==i.SSECustomerKey&&(t["x-amz-server-side-encryption-customer-key"]=i.SSECustomerKey),void 0!==i.SSECustomerKeyMD5&&(t["x-amz-server-side-encryption-customer-key-MD5"]=i.SSECustomerKeyMD5),void 0!==i.SSEKMSEncryptionContext&&(t["x-amz-server-side-encryption-context"]=i.SSEKMSEncryptionContext),void 0!==i.SSEKMSKeyId&&(t["x-amz-server-side-encryption-aws-kms-key-id"]=i.SSEKMSKeyId),void 0!==i.ServerSideEncryption&&(t["x-amz-server-side-encryption"]=i.ServerSideEncryption),void 0!==i.StorageClass&&(t["x-amz-storage-class"]=i.StorageClass),void 0!==i.Tagging&&(t["x-amz-tagging"]=i.Tagging),void 0!==i.WebsiteRedirectLocation&&(t["x-amz-website-redirect-location"]=i.WebsiteRedirectLocation),void 0!==i.Metadata&&Object.keys(i.Metadata).forEach(function(e){t["x-amz-meta-"+e]=i.Metadata[e]}),n="/{Bucket}/{Key+}",void 0===i.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=i.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",w.extendedEncodeURIComponent(r)),void 0===i.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=i.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return w.extendedEncodeURIComponent(e)}).join("/")),o={uploads:""},[2,new _.HttpRequest(te(te({},s.endpoint),{protocol:"https",method:"POST",headers:t,path:n,query:o,body:void 0}))]})})}(e,t)},Vd.prototype.deserialize=function(e,t){return function(r,o){return ie(this,void 0,void 0,function(){var t,n;return se(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,function(u,c){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return se(this,function(e){switch(e.label){case 0:return n=[te({},u)],r={},[4,Td(u.body,c)];case 1:return t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=xd(u,t.body),s=t.body,i=s.code||s.Code||i,o=te(te({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:Ud(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})}(r,o)]:(t={$metadata:Ud(r),__type:"CreateMultipartUploadOutput",AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==r.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(r.headers["x-amz-abort-date"])),void 0!==r.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=r.headers["x-amz-abort-rule-id"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=r.headers["x-amz-server-side-encryption-context"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),[4,Td(r.body,o)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}})})}(e,t)},Vd);function Vd(e){var t=jd.call(this)||this;return t.input=e,t}var qd,zd=(ee(Hd,qd=w.Command),Hd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(M.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Hd.prototype.serialize=function(e,t){return function(i,s){return ie(this,void 0,void 0,function(){var t,n,r,o;return se(this,function(e){if(t={"Content-Type":""},void 0!==i.BypassGovernanceRetention&&(t["x-amz-bypass-governance-retention"]=i.BypassGovernanceRetention.toString()),void 0!==i.MFA&&(t["x-amz-mfa"]=i.MFA),void 0!==i.RequestPayer&&(t["x-amz-request-payer"]=i.RequestPayer),n="/{Bucket}/{Key+}",void 0===i.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=i.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",w.extendedEncodeURIComponent(r)),void 0===i.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=i.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return w.extendedEncodeURIComponent(e)}).join("/")),o={"x-id":"DeleteObject"},void 0!==i.VersionId&&(o.versionId=i.VersionId),[2,new _.HttpRequest(te(te({},s.endpoint),{protocol:"https",method:"DELETE",headers:t,path:n,query:o,body:void 0}))]})})}(e,t)},Hd.prototype.deserialize=function(e,t){return function(n,r){return ie(this,void 0,void 0,function(){var t;return se(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&400<=n.statusCode?[2,function(u,c){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return se(this,function(e){switch(e.label){case 0:return n=[te({},u)],r={},[4,Td(u.body,c)];case 1:return t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=xd(u,t.body),s=t.body,i=s.code||s.Code||i,o=te(te({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:Ud(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})}(n,r)]:(t={$metadata:Ud(n),__type:"DeleteObjectOutput",DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==n.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===n.headers["x-amz-delete-marker"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),[4,kd(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})})}(e,t)},Hd);function Hd(e){var t=qd.call(this)||this;return t.input=e,t}var Kd,Gd=(ee(Wd,Kd=w.Command),Wd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(B.getSsecPlugin(t)),this.middlewareStack.use(M.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Wd.prototype.serialize=function(e,t){return function(i,s){return ie(this,void 0,void 0,function(){var t,n,r,o;return se(this,function(e){if(t={"Content-Type":""},void 0!==i.IfMatch&&(t["If-Match"]=i.IfMatch),void 0!==i.IfModifiedSince&&(t["If-Modified-Since"]=w.dateToUtcString(i.IfModifiedSince).toString()),void 0!==i.IfNoneMatch&&(t["If-None-Match"]=i.IfNoneMatch),void 0!==i.IfUnmodifiedSince&&(t["If-Unmodified-Since"]=w.dateToUtcString(i.IfUnmodifiedSince).toString()),void 0!==i.Range&&(t.Range=i.Range),void 0!==i.RequestPayer&&(t["x-amz-request-payer"]=i.RequestPayer),void 0!==i.SSECustomerAlgorithm&&(t["x-amz-server-side-encryption-customer-algorithm"]=i.SSECustomerAlgorithm),void 0!==i.SSECustomerKey&&(t["x-amz-server-side-encryption-customer-key"]=i.SSECustomerKey),void 0!==i.SSECustomerKeyMD5&&(t["x-amz-server-side-encryption-customer-key-MD5"]=i.SSECustomerKeyMD5),n="/{Bucket}/{Key+}",void 0===i.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=i.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",w.extendedEncodeURIComponent(r)),void 0===i.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=i.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return w.extendedEncodeURIComponent(e)}).join("/")),o={"x-id":"GetObject"},void 0!==i.PartNumber&&(o.partNumber=i.PartNumber.toString()),void 0!==i.ResponseCacheControl&&(o["response-cache-control"]=i.ResponseCacheControl),void 0!==i.ResponseContentDisposition&&(o["response-content-disposition"]=i.ResponseContentDisposition),void 0!==i.ResponseContentEncoding&&(o["response-content-encoding"]=i.ResponseContentEncoding),void 0!==i.ResponseContentLanguage&&(o["response-content-language"]=i.ResponseContentLanguage),void 0!==i.ResponseContentType&&(o["response-content-type"]=i.ResponseContentType),void 0!==i.ResponseExpires&&(o["response-expires"]=(i.ResponseExpires.toISOString().split(".")[0]+"Z").toString()),void 0!==i.VersionId&&(o.versionId=i.VersionId),[2,new _.HttpRequest(te(te({},s.endpoint),{protocol:"https",method:"GET",headers:t,path:n,query:o,body:void 0}))]})})}(e,t)},Wd.prototype.deserialize=function(e,t){return Id(e,t)},Wd);function Wd(e){var t=Kd.call(this)||this;return t.input=e,t}var $d,Yd=(ee(Jd,$d=w.Command),Jd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(M.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Jd.prototype.serialize=function(e,t){return function(i,s){return ie(this,void 0,void 0,function(){var t,n,r,o;return se(this,function(e){if(t={"Content-Type":""},void 0!==i.RequestPayer&&(t["x-amz-request-payer"]=i.RequestPayer),n="/{Bucket}",void 0===i.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=i.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",w.extendedEncodeURIComponent(r)),o={},void 0!==i.Delimiter&&(o.delimiter=i.Delimiter),void 0!==i.EncodingType&&(o["encoding-type"]=i.EncodingType),void 0!==i.Marker&&(o.marker=i.Marker),void 0!==i.MaxKeys&&(o["max-keys"]=i.MaxKeys.toString()),void 0!==i.Prefix&&(o.prefix=i.Prefix),[2,new _.HttpRequest(te(te({},s.endpoint),{protocol:"https",method:"GET",headers:t,path:n,query:o,body:void 0}))]})})}(e,t)},Jd.prototype.deserialize=function(e,t){return Ad(e,t)},Jd);function Jd(e){var t=$d.call(this)||this;return t.input=e,t}var Zd,Qd=(ee(Xd,Zd=w.Command),Xd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(M.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Xd.prototype.serialize=function(e,t){return function(i,s){return ie(this,void 0,void 0,function(){var t,n,r,o;return se(this,function(e){if(t={"Content-Type":""},void 0!==i.RequestPayer&&(t["x-amz-request-payer"]=i.RequestPayer),n="/{Bucket}/{Key+}",void 0===i.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=i.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",w.extendedEncodeURIComponent(r)),void 0===i.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=i.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return w.extendedEncodeURIComponent(e)}).join("/")),o={"x-id":"ListParts"},void 0!==i.MaxParts&&(o["max-parts"]=i.MaxParts.toString()),void 0!==i.PartNumberMarker&&(o["part-number-marker"]=i.PartNumberMarker.toString()),void 0!==i.UploadId&&(o.uploadId=i.UploadId),[2,new _.HttpRequest(te(te({},s.endpoint),{protocol:"https",method:"GET",headers:t,path:n,query:o,body:void 0}))]})})}(e,t)},Xd.prototype.deserialize=function(e,t){return Pd(e,t)},Xd);function Xd(e){var t=Zd.call(this)||this;return t.input=e,t}var eh,th=(ee(nh,eh=w.Command),nh.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(B.getSsecPlugin(t)),this.middlewareStack.use(M.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},nh.prototype.serialize=function(e,t){return function(a,u){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s;return se(this,function(e){if(t={"Content-Type":"application/octet-stream"},void 0!==a.ACL&&(t["x-amz-acl"]=a.ACL),void 0!==a.CacheControl&&(t["Cache-Control"]=a.CacheControl),void 0!==a.ContentDisposition&&(t["Content-Disposition"]=a.ContentDisposition),void 0!==a.ContentEncoding&&(t["Content-Encoding"]=a.ContentEncoding),void 0!==a.ContentLanguage&&(t["Content-Language"]=a.ContentLanguage),void 0!==a.ContentLength&&(t["Content-Length"]=a.ContentLength.toString()),void 0!==a.ContentMD5&&(t["Content-MD5"]=a.ContentMD5),void 0!==a.ContentType&&(t["Content-Type"]=a.ContentType),void 0!==a.Expires&&(t.Expires=w.dateToUtcString(a.Expires).toString()),void 0!==a.GrantFullControl&&(t["x-amz-grant-full-control"]=a.GrantFullControl),void 0!==a.GrantRead&&(t["x-amz-grant-read"]=a.GrantRead),void 0!==a.GrantReadACP&&(t["x-amz-grant-read-acp"]=a.GrantReadACP),void 0!==a.GrantWriteACP&&(t["x-amz-grant-write-acp"]=a.GrantWriteACP),void 0!==a.ObjectLockLegalHoldStatus&&(t["x-amz-object-lock-legal-hold"]=a.ObjectLockLegalHoldStatus),void 0!==a.ObjectLockMode&&(t["x-amz-object-lock-mode"]=a.ObjectLockMode),void 0!==a.ObjectLockRetainUntilDate&&(t["x-amz-object-lock-retain-until-date"]=(a.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()),void 0!==a.RequestPayer&&(t["x-amz-request-payer"]=a.RequestPayer),void 0!==a.SSECustomerAlgorithm&&(t["x-amz-server-side-encryption-customer-algorithm"]=a.SSECustomerAlgorithm),void 0!==a.SSECustomerKey&&(t["x-amz-server-side-encryption-customer-key"]=a.SSECustomerKey),void 0!==a.SSECustomerKeyMD5&&(t["x-amz-server-side-encryption-customer-key-MD5"]=a.SSECustomerKeyMD5),void 0!==a.SSEKMSEncryptionContext&&(t["x-amz-server-side-encryption-context"]=a.SSEKMSEncryptionContext),void 0!==a.SSEKMSKeyId&&(t["x-amz-server-side-encryption-aws-kms-key-id"]=a.SSEKMSKeyId),void 0!==a.ServerSideEncryption&&(t["x-amz-server-side-encryption"]=a.ServerSideEncryption),void 0!==a.StorageClass&&(t["x-amz-storage-class"]=a.StorageClass),void 0!==a.Tagging&&(t["x-amz-tagging"]=a.Tagging),void 0!==a.WebsiteRedirectLocation&&(t["x-amz-website-redirect-location"]=a.WebsiteRedirectLocation),void 0!==a.Metadata&&Object.keys(a.Metadata).forEach(function(e){t["x-amz-meta-"+e]=a.Metadata[e]}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",w.extendedEncodeURIComponent(r)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return w.extendedEncodeURIComponent(e)}).join("/")),o={"x-id":"PutObject"},void 0!==a.Body&&(s=a.Body,i=s),[2,new _.HttpRequest(te(te({},u.endpoint),{protocol:"https",method:"PUT",headers:t,path:n,query:o,body:i}))]})})}(e,t)},nh.prototype.deserialize=function(e,t){return function(n,r){return ie(this,void 0,void 0,function(){var t;return se(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&400<=n.statusCode?[2,function(u,c){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return se(this,function(e){switch(e.label){case 0:return n=[te({},u)],r={},[4,Td(u.body,c)];case 1:return t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=xd(u,t.body),s=t.body,i=s.code||s.Code||i,o=te(te({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:Ud(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})}(n,r)]:(t={$metadata:Ud(n),__type:"PutObjectOutput",ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-expiration"]&&(t.Expiration=n.headers["x-amz-expiration"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=n.headers["x-amz-server-side-encryption-context"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),[4,kd(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})})}(e,t)},nh);function nh(e){var t=eh.call(this)||this;return t.input=e,t}var rh,oh=(ee(ih,rh=w.Command),ih.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(B.getSsecPlugin(t)),this.middlewareStack.use(M.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},ih.prototype.serialize=function(e,t){return function(a,u){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s;return se(this,function(e){if(t={"Content-Type":"application/octet-stream"},void 0!==a.ContentLength&&(t["Content-Length"]=a.ContentLength.toString()),void 0!==a.ContentMD5&&(t["Content-MD5"]=a.ContentMD5),void 0!==a.RequestPayer&&(t["x-amz-request-payer"]=a.RequestPayer),void 0!==a.SSECustomerAlgorithm&&(t["x-amz-server-side-encryption-customer-algorithm"]=a.SSECustomerAlgorithm),void 0!==a.SSECustomerKey&&(t["x-amz-server-side-encryption-customer-key"]=a.SSECustomerKey),void 0!==a.SSECustomerKeyMD5&&(t["x-amz-server-side-encryption-customer-key-MD5"]=a.SSECustomerKeyMD5),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",w.extendedEncodeURIComponent(r)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return w.extendedEncodeURIComponent(e)}).join("/")),o={"x-id":"UploadPart"},void 0!==a.PartNumber&&(o.partNumber=a.PartNumber.toString()),void 0!==a.UploadId&&(o.uploadId=a.UploadId),void 0!==a.Body&&(s=a.Body,i=s),[2,new _.HttpRequest(te(te({},u.endpoint),{protocol:"https",method:"PUT",headers:t,path:n,query:o,body:i}))]})})}(e,t)},ih.prototype.deserialize=function(e,t){return function(n,r){return ie(this,void 0,void 0,function(){var t;return se(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&400<=n.statusCode?[2,function(u,c){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return se(this,function(e){switch(e.label){case 0:return n=[te({},u)],r={},[4,Td(u.body,c)];case 1:return t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=xd(u,t.body),s=t.body,i=s.code||s.Code||i,o=te(te({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:Ud(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})}(n,r)]:(t={$metadata:Ud(n),__type:"UploadPartOutput",ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),[4,kd(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})})}(e,t)},ih);function ih(e){var t=rh.call(this)||this;return t.input=e,t}var sh=new x.ConsoleLogger("axios-http-handler"),ah="sendProgress",uh=(ch.prototype.destroy=function(){},ch.prototype.handle=function(e,t){var n,r=this.httpOptions.requestTimeout,o=this.emitter,i=e.path;!e.query||(n=G.buildQueryString(e.query))&&(i+="?"+n);var s=e.port,a=e.protocol+"//"+e.hostname+(s?":"+s:"")+i,u={};u.url=a,u.method=e.method,u.headers=e.headers,delete u.headers.host,e.body?u.data=e.body:u.headers["Content-Type"]&&(u.data=null),o&&(u.onUploadProgress=function(e){o.emit(ah,e),sh.debug(e)}),this.httpOptions.bufferBody&&(u.responseType="blob");var c,l=[W.request(u).then(function(e){return{response:new _.HttpResponse({headers:e.headers,statusCode:e.status,body:e.data})}}).catch(function(e){throw sh.error(e),e}),(void 0===(c=r)&&(c=0),new Promise(function(e,t){c&&setTimeout(function(){var e=new Error("Request did not complete within "+c+" ms");e.name="TimeoutError",t(e)},c)}))];return Promise.race(l)},ch);function ch(e,t){void 0===e&&(e={}),this.httpOptions=e,this.emitter=t}function lh(){}function ph(){ph.init.call(this)}function dh(e){return void 0===e._maxListeners?ph.defaultMaxListeners:e._maxListeners}function hh(e,t,n,r){var o,i,s,a,u;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),i=o[t]):(o=e._events=new lh,e._eventsCount=0),i?("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),i.warned||(a=dh(e))&&0<a&&i.length>a&&(i.warned=!0,(s=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=i.length,u=s,"function"==typeof console.warn?console.warn(u):console.log(u))):(i=o[t]=n,++e._eventsCount),e}function fh(e,t,n){var r=!1;function o(){e.removeListener(t,o),r||(r=!0,n.apply(e,arguments))}return o.listener=n,o}function mh(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function gh(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}lh.prototype=Object.create(null),(ph.EventEmitter=ph).usingDomains=!1,ph.prototype.domain=void 0,ph.prototype._events=void 0,ph.prototype._maxListeners=void 0,ph.defaultMaxListeners=10,ph.init=function(){this.domain=null,ph.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new lh,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ph.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},ph.prototype.getMaxListeners=function(){return dh(this)},ph.prototype.emit=function(e,t,n,r){var o,i,s,a,u,c="error"===e,l=this._events;if(l)c=c&&null==l.error;else if(!c)return!1;if(u=this.domain,c){if(o=t,u)return(o=o||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,o.domain=u,o.domainThrown=!1,u.emit("error",o),!1;if(o instanceof Error)throw o;var p=new Error('Uncaught, unspecified "error" event. ('+o+")");throw p.context=o,p}if(!(i=l[e]))return!1;var d,h="function"==typeof i;switch(d=arguments.length){case 1:!function(e,t){if(h)e.call(t);else for(var n=e.length,r=gh(e,n),o=0;o<n;++o)r[o].call(t)}(i,this);break;case 2:!function(e,t,n){if(h)e.call(t,n);else for(var r=e.length,o=gh(e,r),i=0;i<r;++i)o[i].call(t,n)}(i,this,t);break;case 3:!function(e,t,n,r){if(h)e.call(t,n,r);else for(var o=e.length,i=gh(e,o),s=0;s<o;++s)i[s].call(t,n,r)}(i,this,t,n);break;case 4:!function(e,t,n,r,o){if(h)e.call(t,n,r,o);else for(var i=e.length,s=gh(e,i),a=0;a<i;++a)s[a].call(t,n,r,o)}(i,this,t,n,r);break;default:for(s=new Array(d-1),a=1;a<d;a++)s[a-1]=arguments[a];!function(e,t,n){if(h)e.apply(t,n);else for(var r=e.length,o=gh(e,r),i=0;i<r;++i)o[i].apply(t,n)}(i,this,s)}return!0},ph.prototype.addListener=function(e,t){return hh(this,e,t,!1)},ph.prototype.on=ph.prototype.addListener,ph.prototype.prependListener=function(e,t){return hh(this,e,t,!0)},ph.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,fh(this,e,t)),this},ph.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,fh(this,e,t)),this},ph.prototype.removeListener=function(e,t){var n,r,o,i,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new lh:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length;0<i--;)if(n[i]===t||n[i].listener&&n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new lh,this;delete r[e]}else!function(e){for(var t=o,n=t+1,r=e.length;n<r;t+=1,n+=1)e[t]=e[n];e.pop()}(n);r.removeListener&&this.emit("removeListener",e,s||t)}return this},ph.prototype.removeAllListeners=function(e){var t,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=new lh,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new lh:delete n[e]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new lh,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(;this.removeListener(e,t[t.length-1]),t[0];);return this},ph.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},ph.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):mh.call(e,t)},ph.prototype.listenerCount=mh;function yh(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function vh(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var bh={bufferBody:!(ph.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]})},wh=function(){return(wh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_h=new x.ConsoleLogger("AWSS3ProviderManagedUpload"),Sh=(Ch.prototype.upload=function(){return yh(this,void 0,void 0,function(){var t,n,r,o,i,s;return vh(this,function(e){switch(e.label){case 0:return[4,(t=this).validateAndSanitizeBody(this.params.Body)];case 1:return t.body=e.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,n=new th(this.params),[2,this._createNewS3Client(this.opts,this.emitter).send(n)]):[3,2];case 2:return[4,this.createMultiPartUpload()];case 3:r=e.sent(),o=Math.ceil(this.totalBytesToUpload/this.minPartSize),i=0,e.label=4;case 4:return i<o?[4,this.checkIfUploadCancelled(r)]:[3,9];case 5:return e.sent(),s=this.createParts(i),[4,this.uploadParts(r,s)];case 6:return e.sent(),[4,this.checkIfUploadCancelled(r)];case 7:e.sent(),e.label=8;case 8:return i+=this.queueSize,[3,4];case 9:return[4,this.finishMultiPartUpload(r)];case 10:return[2,e.sent()]}})})},Ch.prototype.createParts=function(e){for(var t=[],n=e,r=e*this.minPartSize;r<this.totalBytesToUpload&&t.length<this.queueSize;){var o=Math.min(r+this.minPartSize,this.totalBytesToUpload);t.push({bodyPart:this.body.slice(r,o),partNumber:++n,emitter:new ph,_lastUploadedBytes:0}),r+=this.minPartSize}return t},Ch.prototype.createMultiPartUpload=function(){return yh(this,void 0,void 0,function(){var t,n;return vh(this,function(e){switch(e.label){case 0:return t=new Bd(this.params),[4,this._createNewS3Client(this.opts).send(t)];case 1:return n=e.sent(),_h.debug(n.UploadId),[2,n.UploadId]}})})},Ch.prototype.uploadParts=function(h,f){return yh(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d;return vh(this,function(e){switch(e.label){case 0:t=[];try{for(n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(f),r=n.next();!r.done;r=n.next())o=r.value,this.setupEventListener(o),i={PartNumber:o.partNumber,Body:o.bodyPart,UploadId:h,Key:this.params.Key,Bucket:this.params.Bucket},s=new oh(i),a=this._createNewS3Client(this.opts,o.emitter),t.push(a.send(s))}catch(e){p={error:e}}finally{try{r&&!r.done&&(d=n.return)&&d.call(n)}finally{if(p)throw p.error}}e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.all(t)];case 2:for(u=e.sent(),c=0;c<u.length;c++)this.multiPartMap.push({PartNumber:f[c].partNumber,ETag:u[c].ETag});return[3,4];case 3:return l=e.sent(),_h.error("error happened while uploading a part. Cancelling the multipart upload",l),this.cancelUpload(),[2];case 4:return[2]}})})},Ch.prototype.finishMultiPartUpload=function(i){return yh(this,void 0,void 0,function(){var t,n,r,o;return vh(this,function(e){switch(e.label){case 0:t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:i,MultipartUpload:{Parts:this.multiPartMap}},n=new Fd(t),r=this._createNewS3Client(this.opts),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,r.send(n)];case 2:return[2,e.sent().Key];case 3:return o=e.sent(),_h.error("error happened while finishing the upload. Cancelling the multipart upload",o),this.cancelUpload(),[2];case 4:return[2]}})})},Ch.prototype.checkIfUploadCancelled=function(r){return yh(this,void 0,void 0,function(){var t,n;return vh(this,function(e){switch(e.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.cleanup(r)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),t+=n.errorMessage,[3,4];case 4:throw new Error(t);case 5:return[2]}})})},Ch.prototype.cancelUpload=function(){this.cancel=!0},Ch.prototype.cleanup=function(o){return yh(this,void 0,void 0,function(){var t,n,r;return vh(this,function(e){switch(e.label){case 0:return this.body=null,this.multiPartMap=[],this.bytesUploaded=0,this.totalBytesToUpload=0,t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:o},[4,(n=this._createNewS3Client(this.opts)).send(new Rd(t))];case 1:return e.sent(),[4,n.send(new Qd(t))];case 2:if((r=e.sent())&&r.Parts&&0<r.Parts.length)throw new Error("Multi Part upload clean up failed");return[2]}})})},Ch.prototype.setupEventListener=function(t){var n=this;t.emitter.on(ah,function(e){n.progressChanged(t.partNumber,e.loaded-t._lastUploadedBytes),t._lastUploadedBytes=e.loaded})},Ch.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit(ah,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},Ch.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},Ch.prototype.validateAndSanitizeBody=function(t){return yh(this,void 0,void 0,function(){return vh(this,function(e){switch(e.label){case 0:return this.isGenericObject(t)?[2,JSON.stringify(t)]:[3,1];case 1:return this.isBlob(t)?bh.bufferBody?[4,$.streamCollector(t)]:[3,3]:[3,4];case 2:return[2,e.sent()];case 3:case 4:return[2,t]}})})},Ch.prototype.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob},Ch.prototype.isGenericObject=function(e){if(null!==e&&"object"==typeof e)try{return!(0<=this.byteLength(e))}catch(e){return!0}return!1},Ch.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,o={};e.dangerouslyConnectToHttpEndpointForTesting&&(o={endpoint:"http://localhost:20005",s3BucketEndpoint:!0,s3ForcePathStyle:!0});var i=new _d(wh(wh({region:n,credentials:r},o),{requestHandler:new uh(bh,t),customUserAgent:x.getAmplifyUserAgent(),urlParser:s.parseUrl}));return i.middlewareStack.remove("contentLengthMiddleware"),i},Ch);function Ch(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.multiPartMap=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n}function Eh(e,t,n,r,o){e&&x.Hub.dispatch("storage",{event:t,data:{attrs:n,metrics:r},message:o},"Storage",Oh)}function Ih(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Ah(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Ph=function(){return(Ph=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},kh=new x.ConsoleLogger("AWSS3Provider"),Oh="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Th=(xh.prototype.getCategory=function(){return xh.CATEGORY},xh.prototype.getProviderName=function(){return xh.PROVIDER_NAME},xh.prototype.configure=function(e){if(kh.debug("configure Storage",e),!e)return this._config;var t=x.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Storage),this._config.bucket||kh.debug("Do not have bucket yet"),this._config},xh.prototype.get=function(C,E){return Ih(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,_,S;return Ah(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];if(t=Object.assign({},this._config,E),n=t.bucket,r=t.download,o=t.cacheControl,i=t.contentDisposition,s=t.contentEncoding,a=t.contentLanguage,u=t.contentType,c=t.expires,l=t.track,p=this._prefix(t),d=p+C,h=this._createNewS3Client(t),kh.debug("get "+C+" from "+d),f={Bucket:n,Key:d},o&&(f.ResponseCacheControl=o),i&&(f.ResponseContentDisposition=i),s&&(f.ResponseContentEncoding=s),a&&(f.ResponseContentLanguage=a),u&&(f.ResponseContentType=u),!0!==r)return[3,5];m=new Gd(f),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,h.send(m)];case 3:return g=e.sent(),Eh(l,"download",{method:"get",result:"success"},{fileSize:Number(g.Body.length)},"Download success for "+C),[2,g];case 4:throw y=e.sent(),Eh(l,"download",{method:"get",result:"failed"},null,"Download failed with "+y.message),y;case 5:f.Expires=c||900,e.label=6;case 6:return e.trys.push([6,9,,10]),v=new K.S3RequestPresigner(Ph({},h.config)),[4,H.createRequest(h,new Gd(f))];case 7:return b=e.sent(),_=z.formatUrl,[4,v.presign(b,{expiresIn:f.Expires})];case 8:return w=_.apply(void 0,[e.sent()]),Eh(l,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+w),[2,w];case 9:throw S=e.sent(),kh.warn("get signed url error",S),Eh(l,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+C),S;case 10:return[2]}})})},xh.prototype.put=function(I,A,P){return Ih(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,_,S,C,E;return Ah(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];t=Object.assign({},this._config,P),n=t.bucket,r=t.track,o=t.progressCallback,i=t.contentType,s=t.contentDisposition,a=t.cacheControl,u=t.expires,c=t.metadata,l=t.tagging,p=t.acl,d=t.serverSideEncryption,h=t.SSECustomerAlgorithm,f=t.SSECustomerKey,m=t.SSECustomerKeyMD5,g=t.SSEKMSKeyId,y=i||"binary/octet-stream",v=this._prefix(t),b=v+I,kh.debug("put "+I+" to "+b),w={Bucket:n,Key:b,Body:A,ContentType:y},a&&(w.CacheControl=a),s&&(w.ContentDisposition=s),u&&(w.Expires=u),c&&(w.Metadata=c),l&&(w.Tagging=l),d&&(w.ServerSideEncryption=d,h&&(w.SSECustomerAlgorithm=h),f&&(w.SSECustomerKey=f),m&&(w.SSECustomerKeyMD5=m),g&&(w.SSEKMSKeyId=g)),_=new ph,S=new Sh(w,t,_),p&&(w.ACL=p),e.label=2;case 2:return e.trys.push([2,4,,5]),_.on("sendProgress",function(e){o&&("function"==typeof o?o(e):kh.warn("progressCallback should be a function, not a "+typeof o))}),[4,S.upload()];case 3:return C=e.sent(),kh.debug("upload result",C),Eh(r,"upload",{method:"put",result:"success"},null,"Upload success for "+I),[2,{key:I}];case 4:throw E=e.sent(),kh.warn("error uploading",E),Eh(r,"upload",{method:"put",result:"failed"},null,"Error uploading "+I),E;case 5:return[2]}})})},xh.prototype.remove=function(l,p){return Ih(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return Ah(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];t=Object.assign({},this._config,p),n=t.bucket,r=t.track,o=this._prefix(t),i=o+l,s=this._createNewS3Client(t),kh.debug("remove "+l+" from "+i),a=new zd({Bucket:n,Key:i}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,s.send(a)];case 3:return u=e.sent(),Eh(r,"delete",{method:"remove",result:"success"},null,"Deleted "+l+" successfully"),[2,u];case 4:throw c=e.sent(),Eh(r,"delete",{method:"remove",result:"failed"},null,"Deletion of "+l+" failed with "+c),c;case 5:return[2]}})})},xh.prototype.list=function(d,h){return Ih(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p;return Ah(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];t=Object.assign({},this._config,h),n=t.bucket,r=t.track,o=t.maxKeys,i=this._prefix(t),s=i+d,a=this._createNewS3Client(t),kh.debug("list "+d+" from "+s),u=new Yd({Bucket:n,Prefix:s,MaxKeys:o}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,a.send(u)];case 3:return c=e.sent(),l=[],c&&c.Contents&&(l=c.Contents.map(function(e){return{key:e.Key.substr(i.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}})),Eh(r,"list",{method:"list",result:"success"},null,l.length+" items returned from list operation"),kh.debug("list",l),[2,l];case 4:throw p=e.sent(),kh.warn("list error",p),Eh(r,"list",{method:"list",result:"failed"},null,"Listing items failed: "+p.message),p;case 5:return[2]}})})},xh.prototype._ensureCredentials=function(){var n=this;return x.Credentials.get().then(function(e){if(!e)return!1;var t=x.Credentials.shear(e);return kh.debug("set credentials for storage",t),n._config.credentials=t,!0}).catch(function(e){return kh.warn("ensure credentials error",e),!1})},xh.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},o=e.identityId||t.identityId,i=(void 0!==r.private?r.private:"private/")+o+"/",s=(void 0!==r.protected?r.protected:"protected/")+o+"/",a=void 0!==r.public?r.public:"public/";switch(n){case"private":return i;case"protected":return s;default:return a}},xh.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,o={};return e.dangerouslyConnectToHttpEndpointForTesting&&(o={endpoint:"http://localhost:20005",s3BucketEndpoint:!0,s3ForcePathStyle:!0}),new _d(Ph(Ph({region:n,credentials:r,customUserAgent:x.getAmplifyUserAgent()},o),{requestHandler:new uh(bh,t)}))},xh.CATEGORY="Storage",xh.PROVIDER_NAME="AWSS3",xh);function xh(e){this._config=e||{},kh.debug("Storage Options",this._config)}function Nh(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Uh(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Rh=function(){return(Rh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Mh=new x.ConsoleLogger("StorageClass"),Dh="AWSS3",Fh=(Lh.prototype.getModuleName=function(){return"Storage"},Lh.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory())return this._pluggables.push(e),e.configure(this._config[e.getProviderName()])},Lh.prototype.getPluggable=function(t){var e=this._pluggables.find(function(e){return e.getProviderName()===t});return void 0===e?(Mh.debug("No plugin found with providerName",t),null):e},Lh.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},Lh.prototype.configure=function(e){var t=this;if(Mh.debug("configure Storage"),!e)return this._config;function o(t){return r.some(function(e){return e===t})}var i=x.Parser.parseMobilehubConfig(e),n=Object.keys(i.Storage),r=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"];return n&&n.find(o)&&!i.Storage[Dh]&&(i.Storage[Dh]={}),Object.entries(i.Storage).map(function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2),n=t[0],r=t[1];n&&o(n)&&void 0!==r&&(i.Storage[Dh][n]=r,delete i.Storage[n])}),Object.keys(i.Storage).forEach(function(e){"string"!=typeof i.Storage[e]&&(t._config[e]=Rh(Rh({},t._config[e]),i.Storage[e]))}),this._pluggables.forEach(function(e){e.configure(t._config[e.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new Th),this._config},Lh.prototype.get=function(o,i){return Nh(this,void 0,void 0,function(){var t,n,r;return Uh(this,function(e){return n=void 0===(t=(i||{}).provider)?Dh:t,void 0===(r=this._pluggables.find(function(e){return e.getProviderName()===n}))&&(Mh.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")),[2,r.get(o,i)]})})},Lh.prototype.put=function(o,i,s){return Nh(this,void 0,void 0,function(){var t,n,r;return Uh(this,function(e){return n=void 0===(t=(s||{}).provider)?Dh:t,void 0===(r=this._pluggables.find(function(e){return e.getProviderName()===n}))&&(Mh.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")),[2,r.put(o,i,s)]})})},Lh.prototype.remove=function(o,i){return Nh(this,void 0,void 0,function(){var t,n,r;return Uh(this,function(e){return n=void 0===(t=(i||{}).provider)?Dh:t,void 0===(r=this._pluggables.find(function(e){return e.getProviderName()===n}))&&(Mh.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")),[2,r.remove(o,i)]})})},Lh.prototype.list=function(o,i){return Nh(this,void 0,void 0,function(){var t,n,r;return Uh(this,function(e){return n=void 0===(t=(i||{}).provider)?Dh:t,void 0===(r=this._pluggables.find(function(e){return e.getProviderName()===n}))&&(Mh.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")),[2,r.list(o,i)]})})},Lh);function Lh(){this._config={},this._pluggables=[],Mh.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this),x.Amplify.register(this)}function jh(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}var Bh=function(){return(Bh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Vh=new x.ConsoleLogger("Storage"),qh=null,zh=function(){if(qh)return qh;Vh.debug("Create Storage Instance, debug"),(qh=new Fh).vault=new Fh;var n=qh.configure;return qh.configure=function(e){Vh.debug("storage configure called");var t=Bh({},n.call(qh,e));Object.keys(t).forEach(function(e){"string"!=typeof t[e]&&(t[e]=Bh(Bh({},t[e]),{level:"private"}))}),Vh.debug("storage vault configure called"),qh.vault.configure(t)},qh}(),Hh=function(){return(Hh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Kh=new x.ConsoleLogger("RestClient"),Gh=(Wh.prototype.ajax=function(b,w,_){return e=this,u=function(){var n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,e,v=this;return d=this,h=function(e){switch(e.label){case 0:return Kh.debug(w+" "+b),n=this._parseUrl(b),r={method:w,url:b,host:n.host,path:n.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},o={},x.Platform.isReactNative&&(i=x.Platform.userAgent||"aws-amplify/0.1.x",o={"User-Agent":i}),s=Object.assign({},_),a=s.response,s.body&&(o["Content-Type"]="application/json; charset=UTF-8",r.data=JSON.stringify(s.body)),s.responseType&&(r.responseType=s.responseType),s.withCredentials&&(r.withCredentials=s.withCredentials),s.timeout&&(r.timeout=s.timeout),s.cancellableToken&&(r.cancelToken=s.cancellableToken.token),r.signerServiceInfo=s.signerServiceInfo,this._custom_header?[4,this._custom_header()]:[3,2];case 1:return c=e.sent(),[3,3];case 2:c=void 0,e.label=3;case 3:return u=c,r.headers=Hh(Hh(Hh({},o),u),s.headers),(l=xp(b,!0,!0)).search,p=jh(l,["search"]),r.url=(lp(t=Hh(Hh({},p),{query:Hh(Hh({},p.query),s.queryStringParameters||{})}))&&(t=Np({},t)),Up(t)),void 0!==r.headers.Authorization?(r.headers=Object.keys(r.headers).reduce(function(e,t){return r.headers[t]&&(e[t]=r.headers[t]),e},{}),[2,this._request(r,a)]):[2,x.Credentials.get().then(function(e){return v._signed(Hh({},r),e,a)},function(e){return Kh.debug("No credentials available, the request will be unsigned"),v._request(r,a)})]}var t},y={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(f)throw new TypeError("Generator is already executing.");for(;y;)try{if(f=1,m&&(g=2&t[0]?m.return:t[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,t[1])).done)return g;switch(m=0,g&&(t=[2&t[0],g.value]),t[0]){case 0:case 1:g=t;break;case 4:return y.label++,{value:t[1],done:!1};case 5:y.label++,m=t[1],t=[0];continue;case 7:t=y.ops.pop(),y.trys.pop();continue;default:if(!(g=0<(g=y.trys).length&&g[g.length-1])&&(6===t[0]||2===t[0])){y=0;continue}if(3===t[0]&&(!g||t[1]>g[0]&&t[1]<g[3])){y.label=t[1];break}if(6===t[0]&&y.label<g[1]){y.label=g[1],g=t;break}if(g&&y.label<g[2]){y.label=g[2],y.ops.push(t);break}g[2]&&y.ops.pop(),y.trys.pop();continue}t=h.call(d,y)}catch(e){t=[6,e],m=0}finally{f=g=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},Wh.prototype.get=function(e,t){return this.ajax(e,"GET",t)},Wh.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},Wh.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},Wh.prototype.post=function(e,t){return this.ajax(e,"POST",t)},Wh.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},Wh.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},Wh.prototype.cancel=function(e,t){var n=this._cancelTokenMap.get(e);return n&&n.cancel(t),!0},Wh.prototype.isCancel=function(e){return W.isCancel(e)},Wh.prototype.getCancellableToken=function(){return W.CancelToken.source()},Wh.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},Wh.prototype.endpoint=function(t){var n=this,e=this._options.endpoints,r="";return Array.isArray(e)&&e.forEach(function(e){e.name===t&&(r=e.endpoint,"string"==typeof e.region?n._region=e.region:"string"==typeof n._options.region&&(n._region=n._options.region),"string"==typeof e.service?n._service=e.service||"execute-api":n._service="execute-api","function"==typeof e.custom_header?n._custom_header=e.custom_header:n._custom_header=void 0)}),r},Wh.prototype._signed=function(e,t,n){var r=e.signerServiceInfo,o=jh(e,["signerServiceInfo"]),i=this._region||this._options.region,s=this._service||this._options.service,a={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},u={region:i,service:s},c=Object.assign(u,r),l=x.Signer.sign(o,a,c);return l.data&&(l.body=l.data),Kh.debug("Signed Request: ",l),delete l.headers.host,W(l).then(function(e){return n?e:e.data}).catch(function(e){throw Kh.debug(e),e})},Wh.prototype._request=function(e,t){return void 0===t&&(t=!1),W(e).then(function(e){return t?e:e.data}).catch(function(e){throw Kh.debug(e),e})},Wh.prototype._parseUrl=function(e){var t=e.split("/");return{host:t[2],path:"/"+t.slice(3).join("/")}},Wh);function Wh(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this._options=e,Kh.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}var $h=function(){return($h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Yh=new x.ConsoleLogger("RestAPI"),Jh=(Zh.prototype.getModuleName=function(){return"RestAPI"},Zh.prototype.configure=function(e){var t,n=e||{},r=n.API,o=void 0===r?{}:r,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}(n,["API"]),s=$h($h({},i),o);return Yh.debug("configure Rest API",{opt:s}),s.aws_project_region&&(s.aws_cloud_logic_custom&&(t=s.aws_cloud_logic_custom,s.endpoints="string"==typeof t?JSON.parse(t):t),s=Object.assign({},s,{region:s.aws_project_region,header:{}})),Array.isArray(s.endpoints)||(s.endpoints=[]),s.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(Yh.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}),this._options=Object.assign({},this._options,s),this.createInstance(),this._options},Zh.prototype.createInstance=function(){return Yh.debug("create Rest API instance"),this._api=new Gh(this._options),!0},Zh.prototype.get=function(e,t,n){var r=this._api.endpoint(e);if(0===r.length)return Promise.reject("API "+e+" does not exist");var o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.get(r+t,i);return this._api.updateRequestToBeCancellable(s,o),s},Zh.prototype.post=function(e,t,n){var r=this._api.endpoint(e);if(0===r.length)return Promise.reject("API "+e+" does not exist");var o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.post(r+t,i);return this._api.updateRequestToBeCancellable(s,o),s},Zh.prototype.put=function(e,t,n){var r=this._api.endpoint(e);if(0===r.length)return Promise.reject("API "+e+" does not exist");var o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.put(r+t,i);return this._api.updateRequestToBeCancellable(s,o),s},Zh.prototype.patch=function(e,t,n){var r=this._api.endpoint(e);if(0===r.length)return Promise.reject("API "+e+" does not exist");var o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.patch(r+t,i);return this._api.updateRequestToBeCancellable(s,o),s},Zh.prototype.del=function(e,t,n){var r=this._api.endpoint(e);if(0===r.length)return Promise.reject("API "+e+" does not exist");var o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.del(r+t,i);return this._api.updateRequestToBeCancellable(s,o),s},Zh.prototype.head=function(e,t,n){var r=this._api.endpoint(e);if(0===r.length)return Promise.reject("API "+e+" does not exist");var o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.head(r+t,i);return this._api.updateRequestToBeCancellable(s,o),s},Zh.prototype.isCancel=function(e){return this._api.isCancel(e)},Zh.prototype.cancel=function(e,t){return this._api.cancel(e,t)},Zh.prototype.endpoint=function(u){return e=this,c=function(){return n=this,r=function(e){return[2,this._api.endpoint(u)]},a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}var n,r,o,i,s,a,t},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((c=c.apply(e,s||[])).next())});var e,s,a,c},Zh);function Zh(e){this._api=null,this._options=e,Q.register(this),Yh.debug("API Options",this._options)}function Qh(e,t){for(var n,r=/\r\n|[\n\r]/g,o=1,i=t+1;(n=r.exec(e.body))&&n.index<t;)o+=1,i=t+1-(n.index+n[0].length);return{line:o,column:i}}function Xh(e,t){var n=e.locationOffset.column-1,r=ef(n)+e.body,u=t.line-1,o=e.locationOffset.line-1,c=t.line+o,i=1===t.line?n:0,l=t.column+i,p=r.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(c,":").concat(l,")\n")+function(){var e=[["".concat(c-1,": "),p[u-1]],["".concat(c,": "),p[u]],["",ef(l-1)+"^"],["".concat(c+1,": "),p[1+u]]].filter(function(e){return e[0],void 0!==e[1]}),o=0,t=!0,n=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(t=(i=s.next()).done);t=!0)var a=i.value[0],o=Math.max(o,a.length)}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return e.map(function(e){var t,n=e[0],r=e[1];return ef(o-(t=n).length)+t+r}).join("\n")}()}function ef(e){return Array(e+1).join(" ")}function tf(e,t,n,r,o,i,s){var a,u=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,c=n;!c&&u&&(c=(a=u[0])&&a.loc&&a.loc.source);var l,p=r;!p&&u&&(p=u.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e},[])),p&&0===p.length&&(p=void 0),r&&n?l=r.map(function(e){return Qh(n,e)}):u&&(l=u.reduce(function(e,t){return t.loc&&e.push(Qh(t.loc.source,t.loc.start)),e},[]));var d=s||i&&i.extensions;Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:l||void 0,enumerable:Boolean(l)},path:{value:o||void 0,enumerable:Boolean(o)},nodes:{value:u||void 0},source:{value:c||void 0},positions:{value:p||void 0},originalError:{value:i},extensions:{value:d||void 0,enumerable:Boolean(d)}}),i&&i.stack?Object.defineProperty(this,"stack",{value:i.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,tf):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}new Jh(null),tf.prototype=Object.create(Error.prototype,{constructor:{value:tf},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,o=void 0;try{for(var i,s=e.nodes[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;a.loc&&t.push(Xh(a.loc.source,Qh(a.loc.source,a.loc.start)))}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}}else if(e.source&&e.locations){var u=e.source,c=!0,l=!1,p=void 0;try{for(var d,h=e.locations[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var f=d.value;t.push(Xh(u,f))}}catch(e){l=!0,p=e}finally{try{c||null==h.return||h.return()}finally{if(l)throw p}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var nf={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},rf={};function of(e){return Boolean(e&&"string"==typeof e.kind)}function sf(e){return function(e,i,t){var n=2<arguments.length&&void 0!==t?t:nf,r=void 0,o=Array.isArray(e),s=[e],a=-1,u=[],c=void 0,l=void 0,p=void 0,d=[],h=[],f=e;do{var m=++a===s.length,g=m&&0!==u.length;if(m){if(l=0===h.length?void 0:d[d.length-1],c=p,p=h.pop(),g){if(o)c=c.slice();else{var y={};for(var v in c)c.hasOwnProperty(v)&&(y[v]=c[v]);c=y}for(var b=0,w=0;w<u.length;w++){var _=u[w][0],S=u[w][1];o&&(_-=b),o&&null===S?(c.splice(_,1),b++):c[_]=S}}a=r.index,s=r.keys,u=r.edits,o=r.inArray,r=r.prev}else{if(l=p?o?a:s[a]:void 0,null==(c=p?p[l]:f))continue;p&&d.push(l)}var C=void 0;if(!Array.isArray(c)){if(!of(c))throw new Error("Invalid AST Node: "+JSON.stringify(c));var E=function(e){var t=i[e];if(t){if(!m&&"function"==typeof t)return t;var n=m?t.leave:t.enter;if("function"==typeof n)return n}else{var r=m?i.leave:i.enter;if(r){if("function"==typeof r)return r;var o=r[e];if("function"==typeof o)return o}}}(c.kind);if(E){if((C=E.call(i,c,l,p,d,h))===rf)break;if(!1===C){if(!m){d.pop();continue}}else if(void 0!==C&&(u.push([l,C]),!m)){if(!of(C)){d.pop();continue}c=C}}}void 0===C&&g&&u.push([l,c]),m?d.pop():(r={inArray:o,index:a,keys:s,edits:u,prev:r},s=(o=Array.isArray(c))?c:n[c.kind]||[],a=-1,u=[],p&&h.push(p),p=c)}while(void 0!==r);return 0!==u.length&&(f=u[u.length-1][1]),f}(e,{leave:af})}var af={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return cf(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=pf("(",cf(e.variableDefinitions,", "),")"),o=cf(e.directives," "),i=e.selectionSet;return n||o||r||"query"!==t?cf([t,cf([n,r]),o,i]," "):i},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,o=e.directives;return t+": "+n+pf(" = ",r)+pf(" ",cf(o," "))},SelectionSet:function(e){return lf(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,o=e.directives,i=e.selectionSet;return cf([pf("",t,": ")+n+pf("(",cf(r,", "),")"),cf(o," "),i]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+pf(" ",cf(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return cf(["...",pf("on ",t),cf(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,o=e.directives,i=e.selectionSet;return"fragment ".concat(t).concat(pf("(",cf(r,", "),")")," ")+"on ".concat(n," ").concat(pf("",cf(o," ")," "))+i},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n,r,o,i=e.value;return e.block?(r="description"===t,o=(n=i).replace(/"""/g,'\\"""')," "!==n[0]&&"\t"!==n[0]||-1!==n.indexOf("\n")?'"""\n'.concat(r?o:df(o),'\n"""'):'"""'.concat(o.replace(/"$/,'"\n'),'"""')):JSON.stringify(i)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+cf(e.values,", ")+"]"},ObjectValue:function(e){return"{"+cf(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+pf("(",cf(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,n=e.operationTypes;return cf(["schema",cf(t," "),lf(n)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:uf(function(e){return cf(["scalar",e.name,cf(e.directives," ")]," ")}),ObjectTypeDefinition:uf(function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return cf(["type",t,pf("implements ",cf(n," & ")),cf(r," "),lf(o)]," ")}),FieldDefinition:uf(function(e){var t=e.name,n=e.arguments,r=e.type,o=e.directives;return t+(n.every(function(e){return-1===e.indexOf("\n")})?pf("(",cf(n,", "),")"):pf("(\n",df(cf(n,"\n")),"\n)"))+": "+r+pf(" ",cf(o," "))}),InputValueDefinition:uf(function(e){var t=e.name,n=e.type,r=e.defaultValue,o=e.directives;return cf([t+": "+n,pf("= ",r),cf(o," ")]," ")}),InterfaceTypeDefinition:uf(function(e){var t=e.name,n=e.directives,r=e.fields;return cf(["interface",t,cf(n," "),lf(r)]," ")}),UnionTypeDefinition:uf(function(e){var t=e.name,n=e.directives,r=e.types;return cf(["union",t,cf(n," "),r&&0!==r.length?"= "+cf(r," | "):""]," ")}),EnumTypeDefinition:uf(function(e){var t=e.name,n=e.directives,r=e.values;return cf(["enum",t,cf(n," "),lf(r)]," ")}),EnumValueDefinition:uf(function(e){return cf([e.name,cf(e.directives," ")]," ")}),InputObjectTypeDefinition:uf(function(e){var t=e.name,n=e.directives,r=e.fields;return cf(["input",t,cf(n," "),lf(r)]," ")}),DirectiveDefinition:uf(function(e){var t=e.name,n=e.arguments,r=e.locations;return"directive @"+t+(n.every(function(e){return-1===e.indexOf("\n")})?pf("(",cf(n,", "),")"):pf("(\n",df(cf(n,"\n")),"\n)"))+" on "+cf(r," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return cf(["extend schema",cf(t," "),lf(n)]," ")},ScalarTypeExtension:function(e){return cf(["extend scalar",e.name,cf(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return cf(["extend type",t,pf("implements ",cf(n," & ")),cf(r," "),lf(o)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return cf(["extend interface",t,cf(n," "),lf(r)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return cf(["extend union",t,cf(n," "),r&&0!==r.length?"= "+cf(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return cf(["extend enum",t,cf(n," "),lf(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return cf(["extend input",t,cf(n," "),lf(r)]," ")}};function uf(t){return function(e){return cf([e.description,t(e)],"\n")}}function cf(e,t){return e?e.filter(function(e){return e}).join(t||""):""}function lf(e){return e&&0!==e.length?"{\n"+df(cf(e,"\n"))+"\n}":""}function pf(e,t,n){return t?e+t+(n||""):""}function df(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function hf(e){return(hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ff(t){return t&&"object"===hf(t)?"function"==typeof t.inspect?t.inspect():Array.isArray(t)?"["+t.map(ff).join(", ")+"]":"{"+Object.keys(t).map(function(e){return"".concat(e,": ").concat(ff(t[e]))}).join(", ")+"}":"string"==typeof t?'"'+t+'"':"function"==typeof t?"[function ".concat(t.name,"]"):String(t)}function mf(e,t){if(!e)throw new Error(t)}function gf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yf(e,t,n){gf(this,"body",void 0),gf(this,"name",void 0),gf(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},0<this.locationOffset.line||mf(0,"line in locationOffset is 1-indexed and must be positive"),0<this.locationOffset.column||mf(0,"column in locationOffset is 1-indexed and must be positive")}function vf(e,t,n){return new tf("Syntax Error: ".concat(n),void 0,e,[t])}function bf(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function wf(e){return bf(e)===e.length}function _f(){return this.lastToken=this.token,this.token=this.lookahead()}function Sf(){var e=this.token;if(e.kind!==Cf.EOF)for(;(e=e.next||(e.next=function(e,t){var u=e.source,n=u.body,r=n.length,o=function(e,t,n){for(var r=e.length,o=t;o<r;){var i=If.call(e,o);if(9===i||32===i||44===i||65279===i)++o;else if(10===i)++o,++n.line,n.lineStart=o;else{if(13!==i)break;10===If.call(e,o+1)?o+=2:++o,++n.line,n.lineStart=o}}return o}(n,t.end,e),i=e.line,s=1+o-e.lineStart;if(r<=o)return new Pf(Cf.EOF,r,r,i,s,t);var a,c=If.call(n,o);switch(c){case 33:return new Pf(Cf.BANG,o,o+1,i,s,t);case 35:return function(e,t,n,r){for(var o,i=u.body,s=e;null!==(o=If.call(i,++s))&&(31<o||9===o););return new Pf(Cf.COMMENT,e,s,t,n,r,Af.call(i,e+1,s))}(o,i,s,t);case 36:return new Pf(Cf.DOLLAR,o,o+1,i,s,t);case 38:return new Pf(Cf.AMP,o,o+1,i,s,t);case 40:return new Pf(Cf.PAREN_L,o,o+1,i,s,t);case 41:return new Pf(Cf.PAREN_R,o,o+1,i,s,t);case 46:if(46===If.call(n,o+1)&&46===If.call(n,o+2))return new Pf(Cf.SPREAD,o,o+3,i,s,t);break;case 58:return new Pf(Cf.COLON,o,o+1,i,s,t);case 61:return new Pf(Cf.EQUALS,o,o+1,i,s,t);case 64:return new Pf(Cf.AT,o,o+1,i,s,t);case 91:return new Pf(Cf.BRACKET_L,o,o+1,i,s,t);case 93:return new Pf(Cf.BRACKET_R,o,o+1,i,s,t);case 123:return new Pf(Cf.BRACE_L,o,o+1,i,s,t);case 124:return new Pf(Cf.PIPE,o,o+1,i,s,t);case 125:return new Pf(Cf.BRACE_R,o,o+1,i,s,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r){for(var o=u.body,i=o.length,s=e+1,a=0;s!==i&&null!==(a=If.call(o,s))&&(95===a||48<=a&&a<=57||65<=a&&a<=90||97<=a&&a<=122);)++s;return new Pf(Cf.NAME,e,s,t,n,r,Af.call(o,e,s))}(o,i,s,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,o){var i=e.body,s=c,a=t,u=!1;if(45===s&&(s=If.call(i,++a)),48===s){if(48<=(s=If.call(i,++a))&&s<=57)throw vf(e,a,"Invalid number, unexpected digit after 0: ".concat(kf(s),"."))}else a=Of(e,a,s),s=If.call(i,a);return 46===s&&(u=!0,s=If.call(i,++a),a=Of(e,a,s),s=If.call(i,a)),69!==s&&101!==s||(u=!0,43!==(s=If.call(i,++a))&&45!==s||(s=If.call(i,++a)),a=Of(e,a,s)),new Pf(u?Cf.FLOAT:Cf.INT,t,a,n,r,o,Af.call(i,t,a))}(u,o,i,s,t);case 34:return(34===If.call(n,o+1)&&34===If.call(n,o+2)?function(e,t,n,r,o){for(var i=e.body,s=t+3,a=s,u=0,c="";s<i.length&&null!==(u=If.call(i,s));){if(34===u&&34===If.call(i,s+1)&&34===If.call(i,s+2))return c+=Af.call(i,a,s),new Pf(Cf.BLOCK_STRING,t,s+3,n,r,o,function(){for(var e=c.split(/\r\n|[\n\r]/g),t=null,n=1;n<e.length;n++){var r=e[n],o=bf(r);if(o<r.length&&(null===t||o<t)&&0===(t=o))break}if(t)for(var i=1;i<e.length;i++)e[i]=e[i].slice(t);for(;0<e.length&&wf(e[0]);)e.shift();for(;0<e.length&&wf(e[e.length-1]);)e.pop();return e.join("\n")}());if(u<32&&9!==u&&10!==u&&13!==u)throw vf(e,s,"Invalid character within String: ".concat(kf(u),"."));92===u&&34===If.call(i,s+1)&&34===If.call(i,s+2)&&34===If.call(i,s+3)?(c+=Af.call(i,a,s)+'"""',a=s+=4):++s}throw vf(e,s,"Unterminated string.")}:function(e,t,n,r,o){for(var i,s,a,u,c=e.body,l=t+1,p=l,d=0,h="";l<c.length&&null!==(d=If.call(c,l))&&10!==d&&13!==d;){if(34===d)return h+=Af.call(c,p,l),new Pf(Cf.STRING,t,l+1,n,r,o,h);if(d<32&&9!==d)throw vf(e,l,"Invalid character within String: ".concat(kf(d),"."));if(++l,92===d){switch(h+=Af.call(c,p,l-1),d=If.call(c,l)){case 34:h+='"';break;case 47:h+="/";break;case 92:h+="\\";break;case 98:h+="\b";break;case 102:h+="\f";break;case 110:h+="\n";break;case 114:h+="\r";break;case 116:h+="\t";break;case 117:var f=(i=If.call(c,l+1),s=If.call(c,l+2),a=If.call(c,l+3),u=If.call(c,l+4),Tf(i)<<12|Tf(s)<<8|Tf(a)<<4|Tf(u));if(f<0)throw vf(e,l,"Invalid character escape sequence: "+"\\u".concat(c.slice(l+1,l+5),"."));h+=String.fromCharCode(f),l+=4;break;default:throw vf(e,l,"Invalid character escape sequence: \\".concat(String.fromCharCode(d),"."))}p=++l}}throw vf(e,l,"Unterminated string.")})(u,o,i,s,t)}throw vf(u,o,(a=c)<32&&9!==a&&10!==a&&13!==a?"Cannot contain the invalid character ".concat(kf(a),"."):39!==a?"Cannot parse the unexpected character ".concat(kf(a),"."):"Unexpected single quote character ('), did you mean to use a double quote (\")?")}(this,e))).kind===Cf.COMMENT;);return e}"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(yf.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var Cf=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function Ef(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var If=String.prototype.charCodeAt,Af=String.prototype.slice;function Pf(e,t,n,r,o,i,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=o,this.value=s,this.prev=i,this.next=null}function kf(e){return isNaN(e)?Cf.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function Of(e,t,n){var r=e.body,o=t,i=n;if(48<=i&&i<=57){for(;48<=(i=If.call(r,++o))&&i<=57;);return o}throw vf(e,o,"Invalid number, expected digit but got: ".concat(kf(i),"."))}function Tf(e){return 48<=e&&e<=57?e-48:65<=e&&e<=70?e-55:97<=e&&e<=102?e-87:-1}Pf.prototype.toJSON=Pf.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var xf=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),Nf=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Uf(e,t){var n="string"==typeof e?new yf(e):e;if(!(n instanceof yf))throw new TypeError("Must provide Source. Received: ".concat(ff(n)));var r,o,i=(o={source:n,options:t||{},lastToken:r=new Pf(Cf.SOF,0,0,0,0,null),token:r,line:1,lineStart:0,advance:_f,lookahead:Sf}).token;return{kind:xf.DOCUMENT,definitions:_m(o,Cf.SOF,Mf,Cf.EOF),loc:fm(o,i)}}function Rf(e){var t=vm(e,Cf.NAME);return{kind:xf.NAME,value:t.value,loc:fm(e,t)}}function Mf(e){if(gm(e,Cf.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return Df(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return tm(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===Cf.NAME)switch(t.value){case"schema":return function(e){var t=e.token;bm(e,"extend"),bm(e,"schema");var n=Qf(e,!0),r=gm(e,Cf.BRACE_L)?_m(e,Cf.BRACE_L,om,Cf.BRACE_R):[];if(0!==n.length||0!==r.length)return{kind:xf.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:fm(e,t)};throw wm(e)}(e);case"scalar":return function(e){var t=e.token;bm(e,"extend"),bm(e,"scalar");var n=Rf(e),r=Qf(e,!0);if(0!==r.length)return{kind:xf.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:fm(e,t)};throw wm(e)}(e);case"type":return function(e){var t=e.token;bm(e,"extend"),bm(e,"type");var n=Rf(e),r=im(e),o=Qf(e,!0),i=sm(e);if(0!==r.length||0!==o.length||0!==i.length)return{kind:xf.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:o,fields:i,loc:fm(e,t)};throw wm(e)}(e);case"interface":return function(e){var t=e.token;bm(e,"extend"),bm(e,"interface");var n=Rf(e),r=Qf(e,!0),o=sm(e);if(0!==r.length||0!==o.length)return{kind:xf.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:o,loc:fm(e,t)};throw wm(e)}(e);case"union":return function(e){var t=e.token;bm(e,"extend"),bm(e,"union");var n=Rf(e),r=Qf(e,!0),o=lm(e);if(0!==r.length||0!==o.length)return{kind:xf.UNION_TYPE_EXTENSION,name:n,directives:r,types:o,loc:fm(e,t)};throw wm(e)}(e);case"enum":return function(e){var t=e.token;bm(e,"extend"),bm(e,"enum");var n=Rf(e),r=Qf(e,!0),o=pm(e);if(0!==r.length||0!==o.length)return{kind:xf.ENUM_TYPE_EXTENSION,name:n,directives:r,values:o,loc:fm(e,t)};throw wm(e)}(e);case"input":return function(e){var t=e.token;bm(e,"extend"),bm(e,"input");var n=Rf(e),r=Qf(e,!0),o=hm(e);if(0!==r.length||0!==o.length)return{kind:xf.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:o,loc:fm(e,t)};throw wm(e)}(e)}throw wm(e,t)}(e)}else{if(gm(e,Cf.BRACE_L))return Df(e);if(nm(e))return tm(e)}throw wm(e)}function Df(e){if(gm(e,Cf.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return Ff(e);case"fragment":return n=(t=e).token,bm(t,"fragment"),t.options.experimentalFragmentVariables?{kind:xf.FRAGMENT_DEFINITION,name:Wf(t),variableDefinitions:jf(t),typeCondition:(bm(t,"on"),em(t)),directives:Qf(t,!1),selectionSet:qf(t),loc:fm(t,n)}:{kind:xf.FRAGMENT_DEFINITION,name:Wf(t),typeCondition:(bm(t,"on"),em(t)),directives:Qf(t,!1),selectionSet:qf(t),loc:fm(t,n)}}else if(gm(e,Cf.BRACE_L))return Ff(e);var t,n;throw wm(e)}function Ff(e){var t=e.token;if(gm(e,Cf.BRACE_L))return{kind:xf.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:qf(e),loc:fm(e,t)};var n,r=Lf(e);return gm(e,Cf.NAME)&&(n=Rf(e)),{kind:xf.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:jf(e),directives:Qf(e,!1),selectionSet:qf(e),loc:fm(e,t)}}function Lf(e){var t=vm(e,Cf.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw wm(e,t)}function jf(e){return gm(e,Cf.PAREN_L)?_m(e,Cf.PAREN_L,Bf,Cf.PAREN_R):[]}function Bf(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:xf.VARIABLE_DEFINITION,variable:Vf(e),type:(vm(e,Cf.COLON),Xf(e)),defaultValue:ym(e,Cf.EQUALS)?$f(e,!0):void 0,directives:Qf(e,!0),loc:fm(e,t)}:{kind:xf.VARIABLE_DEFINITION,variable:Vf(e),type:(vm(e,Cf.COLON),Xf(e)),defaultValue:ym(e,Cf.EQUALS)?$f(e,!0):void 0,loc:fm(e,t)}}function Vf(e){var t=e.token;return vm(e,Cf.DOLLAR),{kind:xf.VARIABLE,name:Rf(e),loc:fm(e,t)}}function qf(e){var t=e.token;return{kind:xf.SELECTION_SET,selections:_m(e,Cf.BRACE_L,zf,Cf.BRACE_R),loc:fm(e,t)}}function zf(e){return(gm(e,Cf.SPREAD)?function(e){var t,n=e.token;return vm(e,Cf.SPREAD),gm(e,Cf.NAME)&&"on"!==e.token.value?{kind:xf.FRAGMENT_SPREAD,name:Wf(e),directives:Qf(e,!1),loc:fm(e,n)}:("on"===e.token.value&&(e.advance(),t=em(e)),{kind:xf.INLINE_FRAGMENT,typeCondition:t,directives:Qf(e,!1),selectionSet:qf(e),loc:fm(e,n)})}:function(e){var t,n=e.token,r=Rf(e),o=ym(e,Cf.COLON)?(t=r,Rf(e)):r;return{kind:xf.FIELD,alias:t,name:o,arguments:Hf(e,!1),directives:Qf(e,!1),selectionSet:gm(e,Cf.BRACE_L)?qf(e):void 0,loc:fm(e,n)}})(e)}function Hf(e,t){var n=t?Gf:Kf;return gm(e,Cf.PAREN_L)?_m(e,Cf.PAREN_L,n,Cf.PAREN_R):[]}function Kf(e){var t=e.token;return{kind:xf.ARGUMENT,name:Rf(e),value:(vm(e,Cf.COLON),$f(e,!1)),loc:fm(e,t)}}function Gf(e){var t=e.token;return{kind:xf.ARGUMENT,name:Rf(e),value:(vm(e,Cf.COLON),Jf(e)),loc:fm(e,t)}}function Wf(e){if("on"===e.token.value)throw wm(e);return Rf(e)}function $f(e,t){var n,r,o,i=e.token;switch(i.kind){case Cf.BRACKET_L:return r=(n=e).token,o=t?Jf:Zf,{kind:xf.LIST,values:function(e,t,n,r){vm(e,t);for(var o=[];!ym(e,r);)o.push(n(e));return o}(n,Cf.BRACKET_L,o,Cf.BRACKET_R),loc:fm(n,r)};case Cf.BRACE_L:return function(e,t){var n=e.token;vm(e,Cf.BRACE_L);for(var r,o,i,s=[];!ym(e,Cf.BRACE_R);)s.push((o=t,i=(r=e).token,{kind:xf.OBJECT_FIELD,name:Rf(r),value:(vm(r,Cf.COLON),$f(r,o)),loc:fm(r,i)}));return{kind:xf.OBJECT,fields:s,loc:fm(e,n)}}(e,t);case Cf.INT:return e.advance(),{kind:xf.INT,value:i.value,loc:fm(e,i)};case Cf.FLOAT:return e.advance(),{kind:xf.FLOAT,value:i.value,loc:fm(e,i)};case Cf.STRING:case Cf.BLOCK_STRING:return Yf(e);case Cf.NAME:return"true"===i.value||"false"===i.value?(e.advance(),{kind:xf.BOOLEAN,value:"true"===i.value,loc:fm(e,i)}):"null"===i.value?(e.advance(),{kind:xf.NULL,loc:fm(e,i)}):(e.advance(),{kind:xf.ENUM,value:i.value,loc:fm(e,i)});case Cf.DOLLAR:if(!t)return Vf(e)}throw wm(e)}function Yf(e){var t=e.token;return e.advance(),{kind:xf.STRING,value:t.value,block:t.kind===Cf.BLOCK_STRING,loc:fm(e,t)}}function Jf(e){return $f(e,!0)}function Zf(e){return $f(e,!1)}function Qf(e,t){for(var n,r,o,i=[];gm(e,Cf.AT);)i.push((r=t,o=(n=e).token,vm(n,Cf.AT),{kind:xf.DIRECTIVE,name:Rf(n),arguments:Hf(n,r),loc:fm(n,o)}));return i}function Xf(e){var t=e.token,n=ym(e,Cf.BRACKET_L)?(n=Xf(e),vm(e,Cf.BRACKET_R),{kind:xf.LIST_TYPE,type:n,loc:fm(e,t)}):em(e);return ym(e,Cf.BANG)?{kind:xf.NON_NULL_TYPE,type:n,loc:fm(e,t)}:n}function em(e){var t=e.token;return{kind:xf.NAMED_TYPE,name:Rf(e),loc:fm(e,t)}}function tm(e){var t=nm(e)?e.lookahead():e.token;if(t.kind===Cf.NAME)switch(t.value){case"schema":return function(e){var t=e.token;bm(e,"schema");var n=Qf(e,!0),r=_m(e,Cf.BRACE_L,om,Cf.BRACE_R);return{kind:xf.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:fm(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=rm(e);bm(e,"scalar");var r=Rf(e),o=Qf(e,!0);return{kind:xf.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:o,loc:fm(e,t)}}(e);case"type":return function(e){var t=e.token,n=rm(e);bm(e,"type");var r=Rf(e),o=im(e),i=Qf(e,!0),s=sm(e);return{kind:xf.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:o,directives:i,fields:s,loc:fm(e,t)}}(e);case"interface":return function(e){var t=e.token,n=rm(e);bm(e,"interface");var r=Rf(e),o=Qf(e,!0),i=sm(e);return{kind:xf.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:o,fields:i,loc:fm(e,t)}}(e);case"union":return function(e){var t=e.token,n=rm(e);bm(e,"union");var r=Rf(e),o=Qf(e,!0),i=lm(e);return{kind:xf.UNION_TYPE_DEFINITION,description:n,name:r,directives:o,types:i,loc:fm(e,t)}}(e);case"enum":return function(e){var t=e.token,n=rm(e);bm(e,"enum");var r=Rf(e),o=Qf(e,!0),i=pm(e);return{kind:xf.ENUM_TYPE_DEFINITION,description:n,name:r,directives:o,values:i,loc:fm(e,t)}}(e);case"input":return function(e){var t=e.token,n=rm(e);bm(e,"input");var r=Rf(e),o=Qf(e,!0),i=hm(e);return{kind:xf.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:o,fields:i,loc:fm(e,t)}}(e);case"directive":return function(e){var t=e.token,n=rm(e);bm(e,"directive"),vm(e,Cf.AT);var r=Rf(e),o=um(e);bm(e,"on");var i=function(e){ym(e,Cf.PIPE);for(var t=[];t.push(function(e){var t=e.token,n=Rf(e);if(Nf.hasOwnProperty(n.value))return n;throw wm(e,t)}(e)),ym(e,Cf.PIPE););return t}(e);return{kind:xf.DIRECTIVE_DEFINITION,description:n,name:r,arguments:o,locations:i,loc:fm(e,t)}}(e)}throw wm(e,t)}function nm(e){return gm(e,Cf.STRING)||gm(e,Cf.BLOCK_STRING)}function rm(e){if(nm(e))return Yf(e)}function om(e){var t=e.token,n=Lf(e);vm(e,Cf.COLON);var r=em(e);return{kind:xf.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:fm(e,t)}}function im(e){var t=[];if("implements"===e.token.value)for(e.advance(),ym(e,Cf.AMP);t.push(em(e)),ym(e,Cf.AMP)||e.options.allowLegacySDLImplementsInterfaces&&gm(e,Cf.NAME););return t}function sm(e){return e.options.allowLegacySDLEmptyFields&&gm(e,Cf.BRACE_L)&&e.lookahead().kind===Cf.BRACE_R?(e.advance(),e.advance(),[]):gm(e,Cf.BRACE_L)?_m(e,Cf.BRACE_L,am,Cf.BRACE_R):[]}function am(e){var t=e.token,n=rm(e),r=Rf(e),o=um(e);vm(e,Cf.COLON);var i=Xf(e),s=Qf(e,!0);return{kind:xf.FIELD_DEFINITION,description:n,name:r,arguments:o,type:i,directives:s,loc:fm(e,t)}}function um(e){return gm(e,Cf.PAREN_L)?_m(e,Cf.PAREN_L,cm,Cf.PAREN_R):[]}function cm(e){var t=e.token,n=rm(e),r=Rf(e);vm(e,Cf.COLON);var o,i=Xf(e);ym(e,Cf.EQUALS)&&(o=Jf(e));var s=Qf(e,!0);return{kind:xf.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:o,directives:s,loc:fm(e,t)}}function lm(e){var t=[];if(ym(e,Cf.EQUALS))for(ym(e,Cf.PIPE);t.push(em(e)),ym(e,Cf.PIPE););return t}function pm(e){return gm(e,Cf.BRACE_L)?_m(e,Cf.BRACE_L,dm,Cf.BRACE_R):[]}function dm(e){var t=e.token,n=rm(e),r=Rf(e),o=Qf(e,!0);return{kind:xf.ENUM_VALUE_DEFINITION,description:n,name:r,directives:o,loc:fm(e,t)}}function hm(e){return gm(e,Cf.BRACE_L)?_m(e,Cf.BRACE_L,cm,Cf.BRACE_R):[]}function fm(e,t){if(!e.options.noLocation)return new mm(t,e.lastToken,e.source)}function mm(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function gm(e,t){return e.token.kind===t}function ym(e,t){var n=e.token.kind===t;return n&&e.advance(),n}function vm(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw vf(e.source,n.start,"Expected ".concat(t,", found ").concat(Ef(n)))}function bm(e,t){var n=e.token;if(n.kind===Cf.NAME&&n.value===t)return e.advance(),n;throw vf(e.source,n.start,'Expected "'.concat(t,'", found ').concat(Ef(n)))}function wm(e,t){var n=t||e.token;return vf(e.source,n.start,"Unexpected ".concat(Ef(n)))}function _m(e,t,n,r){vm(e,t);for(var o=[n(e)];!ym(e,r);)o.push(n(e));return o}mm.prototype.toJSON=mm.prototype.inspect=function(){return{start:this.start,end:this.end}};var Sm=Y,Cm=function(){return(Cm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Em=new x.ConsoleLogger("AbstractPubSubProvider"),Im=(Am.prototype.configure=function(e){return void 0===e&&(e={}),this._config=Cm(Cm({},e),this._config),Em.debug("configure "+this.getProviderName(),this._config),this.options},Am.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(Am.prototype,"options",{get:function(){return Cm({},this._config)},enumerable:!0,configurable:!0}),Am);function Am(e){void 0===e&&(e={}),this._config=e}function Pm(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function km(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Om(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}var Tm,xm=(Tm=function(e,t){return(Tm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Tm(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Nm=function(){return(Nm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Um=new x.ConsoleLogger("MqttOverWSProvider"),Rm=(Mm.prototype.get=function(n,r){return Pm(this,void 0,void 0,function(){var t;return km(this,function(e){return(t=this.promises.get(n))||(t=r(n),this.promises.set(n,t)),[2,t]})})},Object.defineProperty(Mm.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),Mm.prototype.remove=function(e){this.promises.delete(e)},Mm);function Mm(){this.promises=new Map}var Dm,Fm="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",Lm=(xm(jm,Dm=Im),Object.defineProperty(jm.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(jm.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(jm.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(jm.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),jm.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[Fm]},jm.prototype.getProviderName=function(){return"MqttOverWSProvider"},jm.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,o=Om(e,["clientId","errorCode"]);if(0!==r){Um.warn(n,JSON.stringify(Nm({errorCode:r},o),null,2));var i=[],s=this._clientIdObservers.get(n);if(!s)return;s.forEach(function(n){n.error("Disconnected, error code: "+r),t._topicObservers.forEach(function(e,t){e.delete(n),0===e.size&&i.push(t)})}),this._clientIdObservers.delete(n),i.forEach(function(e){t._topicObservers.delete(e)})}},jm.prototype.newClient=function(e){var t=e.url,o=e.clientId;return Pm(this,void 0,void 0,function(){var n,r=this;return km(this,function(e){switch(e.label){case 0:return Um.debug("Creating new MQTT client",o),(n=new J.Client(t,o)).onMessageArrived=function(e){var t=e.destinationName,n=e.payloadString;r._onMessage(t,n)},n.onConnectionLost=function(e){var t=e.errorCode,n=Om(e,["errorCode"]);r.onDisconnect(Nm({clientId:o,errorCode:t},n))},[4,new Promise(function(e,t){n.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return e(n)},onFailure:t})})];case 1:return e.sent(),[2,n]}})})},jm.prototype.connect=function(n,r){return void 0===r&&(r={}),Pm(this,void 0,void 0,function(){var t=this;return km(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(e){return t.newClient(Nm(Nm({},r),{clientId:e}))})];case 1:return[2,e.sent()]}})})},jm.prototype.disconnect=function(n){return Pm(this,void 0,void 0,function(){var t;return km(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(){return null})];case 1:return(t=e.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(n),[2]}})})},jm.prototype.publish=function(i,s){return Pm(this,void 0,void 0,function(){var t,n,r,o;return km(this,function(e){switch(e.label){case 0:return t=[].concat(i),n=JSON.stringify(s),[4,this.endpoint];case 1:return r=e.sent(),[4,this.connect(this.clientId,{url:r})];case 2:return o=e.sent(),Um.debug("Publishing to topic(s)",t.join(","),n),t.forEach(function(e){return o.send(e,n)}),[2]}})})},jm.prototype._onMessage=function(t,n){try{var r=[];this._topicObservers.forEach(function(e,a){!function(e){for(var t=a.split("/"),n=t.length,r=e.split("/"),o=0;o<n;++o){var i=t[o],s=r[o];if("#"===i)return r.length>=n;if("+"!==i&&i!==s)return}return n===r.length}(t)||r.push(e)});var o=JSON.parse(n);"object"==typeof o&&(o[Fm]=t),r.forEach(function(e){e.forEach(function(e){return e.next(o)})})}catch(e){Um.warn("Error handling message",e,n)}},jm.prototype.subscribe=function(e,u){var n=this;void 0===u&&(u={});var c=[].concat(e);return Um.debug("Subscribing to topic(s)",c.join(",")),new Sm(function(i){var s;c.forEach(function(e){var t=n._topicObservers.get(e);t||(t=new Set,n._topicObservers.set(e,t)),t.add(i)});var e=u.clientId,a=void 0===e?n.clientId:e,t=n._clientIdObservers.get(a);return(t=t||new Set).add(i),n._clientIdObservers.set(a,t),Pm(n,void 0,void 0,function(){var t,n,r,o;return km(this,function(e){switch(e.label){case 0:return void 0!==(t=u.url)?[3,2]:[4,this.endpoint];case 1:return r=e.sent(),[3,3];case 2:r=t,e.label=3;case 3:n=r,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.connect(a,{url:n})];case 5:return s=e.sent(),c.forEach(function(e){s.subscribe(e)}),[3,7];case 6:return o=e.sent(),i.error(o),[3,7];case 7:return[2]}})}),function(){return Um.debug("Unsubscribing from topic(s)",c.join(",")),s&&(n._clientIdObservers.get(a).delete(i),0===n._clientIdObservers.get(a).size&&(n.disconnect(a),n._clientIdObservers.delete(a)),c.forEach(function(e){var t=n._topicObservers.get(e)||new Set;t.delete(i),0===t.size&&(n._topicObservers.delete(e),s.isConnected()&&s.unsubscribe(e))})),null}})},jm);function jm(e){void 0===e&&(e={});var t=Dm.call(this,Nm(Nm({},e),{clientId:e.clientId||C.v4()}))||this;return t._clientsQueue=new Rm,t._topicObservers=new Map,t._clientIdObservers=new Map,t}function Bm(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Vm(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function qm(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var zm,Hm,Km=(zm=function(e,t){return(zm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}zm(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Gm=new x.ConsoleLogger("AWSAppSyncProvider"),Wm=(Km($m,Hm=Lm),Object.defineProperty($m.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),$m.prototype.getProviderName=function(){return"AWSAppSyncProvider"},$m.prototype.publish=function(e,t,n){return Bm(this,void 0,void 0,function(){return Vm(this,function(e){throw new Error("Operation not supported")})})},$m.prototype._cleanUp=function(t){var n=this;Array.from(this._topicClient.entries()).filter(function(e){return qm(e,2)[1].clientId===t}).map(function(e){return qm(e,1)[0]}).forEach(function(e){return n._cleanUpForTopic(e)})},$m.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},$m.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(e){return qm(e,2)[1].clientId===n}).map(function(e){return qm(e,1)[0]}).forEach(function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach(function(e){e.closed||e.error(o)}),t._topicObservers.delete(e))}),this._cleanUp(n))},$m.prototype.disconnect=function(t){return Bm(this,void 0,void 0,function(){return Vm(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return e.sent(),[4,Hm.prototype.disconnect.call(this,t)];case 2:return e.sent(),this._cleanUp(t),[2]}})})},$m.prototype.subscribe=function(e,c){var n=this;void 0===c&&(c={});var t=new Sm(function(u){var s=[].concat(e);return Gm.debug("Subscribing to topic(s)",s.join(",")),Bm(n,void 0,void 0,function(){var t,i,n,r,o,a=this;return Vm(this,function(e){switch(e.label){case 0:return s.forEach(function(e){a._topicObservers.has(e)||a._topicObservers.set(e,new Set),a._topicObservers.get(e).add(u)}),t=c.mqttConnections,i=void 0===t?[]:t,n=c.newSubscriptions,r=Object.entries(n).map(function(e){var t=qm(e,2),n=t[0];return[t[1].topic,n]}),this._topicAlias=new Map(function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(qm(arguments[t]));return e}(Array.from(this._topicAlias.entries()),r)),o=Object.entries(s.reduce(function(e,t){var n,r,o=i.find(function(e){return-1<e.topics.indexOf(t)});return o&&(n=o.client,r=o.url,e[n]||(e[n]={url:r,topics:new Set}),e[n].topics.add(t)),e},{})),[4,Promise.all(o.map(function(e){var t=qm(e,2),o=t[0],n=t[1],i=n.url,s=n.topics;return Bm(a,void 0,void 0,function(){var t,n,r=this;return Vm(this,function(e){switch(e.label){case 0:t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.connect(o,{clientId:o,url:i})];case 2:return t=e.sent(),[3,4];case 3:return n=e.sent(),u.error({message:"Failed to connect",error:n}),u.complete(),[2,void 0];case 4:return s.forEach(function(e){t.isConnected()&&(t.subscribe(e),r._topicClient.set(e,t))}),[2,t]}})})}))];case 1:return e.sent(),[2]}})}),function(){Gm.debug("Unsubscribing from topic(s)",s.join(",")),s.forEach(function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some(function(e){return e===t})||n.disconnect(t.clientId)),n._topicObservers.delete(e)})}});return Sm.from(t).map(function(e){var t=n.getTopicForValue(e),i=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce(function(e,t){var n=qm(t,2),r=n[0],o=n[1];return e[i||r]=o,e},{}),e})},$m);function $m(){var e=null!==Hm&&Hm.apply(this,arguments)||this;return e._topicClient=new Map,e._topicAlias=new Map,e}function Ym(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Jm(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Zm,Qm,Xm,eg,tg,ng,rg,og=(Zm=function(e,t){return(Zm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Zm(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ig=function(){return(ig=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},sg=new x.Logger("AWSAppSyncRealTimeProvider"),ag="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",ug=[400,401,403];(Xm=Qm=Qm||{}).GQL_CONNECTION_INIT="connection_init",Xm.GQL_CONNECTION_ERROR="connection_error",Xm.GQL_CONNECTION_ACK="connection_ack",Xm.GQL_START="start",Xm.GQL_START_ACK="start_ack",Xm.GQL_DATA="data",Xm.GQL_CONNECTION_KEEP_ALIVE="ka",Xm.GQL_STOP="stop",Xm.GQL_COMPLETE="complete",Xm.GQL_ERROR="error",(tg=eg=eg||{})[tg.PENDING=0]="PENDING",tg[tg.CONNECTED=1]="CONNECTED",tg[tg.FAILED=2]="FAILED",(rg=ng=ng||{})[rg.CLOSED=0]="CLOSED",rg[rg.READY=1]="READY",rg[rg.CONNECTING=2]="CONNECTING";var cg,lg={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},pg=(og(dg,cg=Im),dg.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},dg.prototype.newClient=function(){throw new Error("Not used here")},dg.prototype.publish=function(e,t,n){return Ym(this,void 0,void 0,function(){return Jm(this,function(e){throw new Error("Operation not supported")})})},dg.prototype.subscribe=function(e,t){var n=this,o=t.appSyncGraphqlEndpoint;return new Sm(function(e){if(o){var r=C.v4();return n._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:r}),function(){return Ym(n,void 0,void 0,function(){var t,n;return Jm(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(r)];case 1:if(e.sent(),!(t=(this.subscriptionObserverMap.get(r)||{}).subscriptionState))return[2];if(t!==eg.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(r),[3,4];case 2:return n=e.sent(),sg.debug("Error while unsubscribing "+n),[3,4];case 3:return this._removeSubscriptionObserver(r),[7];case 4:return[2]}})})}}e.error({errors:[ig({},new tf("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()})},Object.defineProperty(dg.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),dg.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var k=e.options,O=e.observer,T=e.subscriptionId;return Ym(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,_,S,C,E,I,A,P=this;return Jm(this,function(e){switch(e.label){case 0:return t=k.appSyncGraphqlEndpoint,n=k.authenticationType,r=k.query,o=k.variables,i=k.apiKey,s=k.region,a=k.graphql_headers,u=void 0===a?function(){return{}}:a,c=k.additionalHeaders,l=void 0===c?{}:c,p=eg.PENDING,d={query:r,variables:o},this.subscriptionObserverMap.set(T,{observer:O,query:r,variables:o,subscriptionState:p,startAckTimeoutId:null}),h=JSON.stringify(d),m=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:i,appSyncGraphqlEndpoint:t,authenticationType:n,payload:h,canonicalUri:"",region:s})];case 1:return g=[ig.apply(void 0,m.concat([e.sent()]))],[4,u()];case 2:f=ig.apply(void 0,[ig.apply(void 0,[ig.apply(void 0,g.concat([e.sent()])),l]),((A={})[x.USER_AGENT_HEADER]=x.Constants.userAgent,A)]),y={id:T,payload:{data:h,extensions:{authorization:ig({},f)}},type:Qm.GQL_START},v=JSON.stringify(y),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:i,appSyncGraphqlEndpoint:t,authenticationType:n,region:s})];case 4:return e.sent(),[3,6];case 5:return b=e.sent(),sg.debug({err:b}),w=b.message,_=void 0===w?"":w,O.error({errors:[ig({},new tf("Connection failed: "+_))]}),O.complete(),"function"==typeof(S=(this.subscriptionObserverMap.get(T)||{}).subscriptionFailedCallback)&&S(),[2];case 6:return C=this.subscriptionObserverMap.get(T),E=C.subscriptionFailedCallback,I=C.subscriptionReadyCallback,this.subscriptionObserverMap.set(T,{observer:O,subscriptionState:p,variables:o,query:r,subscriptionReadyCallback:I,subscriptionFailedCallback:E,startAckTimeoutId:setTimeout(function(){P._timeoutStartSubscriptionAck.call(P,T)},15e3)}),this.awsRealTimeSocket.send(v),[2]}})})},dg.prototype._waitForSubscriptionToBeConnected=function(u){return Ym(this,void 0,void 0,function(){var a=this;return Jm(this,function(e){return this.subscriptionObserverMap.get(u).subscriptionState===eg.PENDING?[2,new Promise(function(e,t){var n=a.subscriptionObserverMap.get(u),r=n.observer,o=n.subscriptionState,i=n.variables,s=n.query;a.subscriptionObserverMap.set(u,{observer:r,subscriptionState:o,variables:i,query:s,subscriptionReadyCallback:e,subscriptionFailedCallback:t})})]:[2]})})},dg.prototype._sendUnsubscriptionMessage=function(e){try{var t,n;this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===ng.READY&&(t={id:e,type:Qm.GQL_STOP},n=JSON.stringify(t),this.awsRealTimeSocket.send(n))}catch(e){sg.debug({err:e})}},dg.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},dg.prototype._closeSocketIfRequired=function(){var e;0<this.subscriptionObserverMap.size||(this.awsRealTimeSocket?0<this.awsRealTimeSocket.bufferedAmount?setTimeout(this._closeSocketIfRequired.bind(this),1e3):(sg.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId),(e=this.awsRealTimeSocket).onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=ng.CLOSED):this.socketStatus=ng.CLOSED)},dg.prototype._handleIncomingSubscriptionMessage=function(e){sg.debug("subscription message from AWS AppSync RealTime: "+e.data);var t,n=JSON.parse(e.data),r=n.id,o=void 0===r?"":r,i=n.payload,s=n.type,a=this.subscriptionObserverMap.get(o)||{},u=a.observer,c=void 0===u?null:u,l=a.query,p=void 0===l?"":l,d=a.variables,h=void 0===d?{}:d,f=a.startAckTimeoutId,m=a.subscriptionReadyCallback,g=a.subscriptionFailedCallback;if(sg.debug({id:o,observer:c,query:p,variables:h}),s===Qm.GQL_DATA&&i&&i.data)c?c.next(i):sg.debug("observer not found for id: "+o);else if(s!==Qm.GQL_START_ACK){if(s===Qm.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,yg.TIMEOUT_DISCONNECT),this.keepAliveTimeout));s===Qm.GQL_ERROR&&(y=eg.FAILED,this.subscriptionObserverMap.set(o,{observer:c,query:p,variables:h,startAckTimeoutId:f,subscriptionReadyCallback:m,subscriptionFailedCallback:g,subscriptionState:y}),c.error({errors:[ig({},new tf("Connection failed: "+JSON.stringify(i)))]}),clearTimeout(f),c.complete(),"function"==typeof g&&g())}else{sg.debug("subscription ready for "+JSON.stringify({query:p,variables:h})),"function"==typeof m&&m(),clearTimeout(f),t={query:p,variables:h},x.Hub.dispatch("api",{event:"connected",data:t,message:"Connection established for subscription"},"PubSub",ag);var y=eg.CONNECTED;this.subscriptionObserverMap.set(o,{observer:c,query:p,variables:h,startAckTimeoutId:null,subscriptionState:y,subscriptionReadyCallback:m,subscriptionFailedCallback:g})}},dg.prototype._errorDisconnect=function(n){sg.debug("Disconnect error: "+n),this.subscriptionObserverMap.forEach(function(e){var t=e.observer;t.closed||t.error({errors:[ig({},new tf(n))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=ng.CLOSED},dg.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e)||{},n=t.observer,r=t.query,o=t.variables;n&&(this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:o,subscriptionState:eg.FAILED}),n&&!n.closed&&(n.error({errors:[ig({},new tf("Subscription timeout "+JSON.stringify({query:r,variables:o})))]}),n.complete()),sg.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:o})))},dg.prototype._initializeWebSocketConnection=function(e){var t=this,h=e.appSyncGraphqlEndpoint,f=e.authenticationType,m=e.apiKey,g=e.region;if(this.socketStatus!==ng.READY)return new Promise(function(p,d){return Ym(t,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l;return Jm(this,function(e){switch(e.label){case 0:if(this.promiseArray.push({res:p,rej:d}),this.socketStatus!==ng.CLOSED)return[3,5];e.label=1;case 1:return e.trys.push([1,4,,5]),this.socketStatus=ng.CONNECTING,t=this.isSSLEnabled?"wss://":"ws://",n=h.replace("https://",t).replace("http://",t).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),r="{}",s=(i=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:f,payload:r,canonicalUri:"/connect",apiKey:m,appSyncGraphqlEndpoint:h,region:g})];case 2:return o=s.apply(i,[e.sent()]),a=ic.from(o).toString("base64"),u=ic.from(r).toString("base64"),c=n+"?header="+a+"&payload="+u,[4,this._initializeRetryableHandshake({awsRealTimeUrl:c})];case 3:return e.sent(),this.promiseArray.forEach(function(e){var t=e.res;sg.debug("Notifying connection successful"),t()}),this.socketStatus=ng.READY,this.promiseArray=[],[3,5];case 4:return l=e.sent(),this.promiseArray.forEach(function(e){return(0,e.rej)(l)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=ng.CLOSED,[3,5];case 5:return[2]}})})})},dg.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return Ym(this,void 0,void 0,function(){return Jm(this,function(e){switch(e.label){case 0:return sg.debug("Initializaling retryable Handshake"),[4,x.jitteredExponentialRetry(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}})})},dg.prototype._initializeHandshake=function(e){var o=e.awsRealTimeUrl;return Ym(this,void 0,void 0,function(){var t,n,r,g=this;return Jm(this,function(e){switch(e.label){case 0:sg.debug("Initializing handshake "+o),e.label=1;case 1:return e.trys.push([1,4,,5]),[4,new Promise(function(e,t){var n=new WebSocket(o,"graphql-ws");n.onerror=function(){sg.debug("WebSocket connection error")},n.onclose=function(){t(new Error("Connection handshake error"))},n.onopen=function(){return g.awsRealTimeSocket=n,e()}})];case 2:return e.sent(),[4,new Promise(function(h,f){var m=!1;g.awsRealTimeSocket.onerror=function(e){sg.debug("WebSocket error "+JSON.stringify(e))},g.awsRealTimeSocket.onclose=function(e){sg.debug("WebSocket closed "+e.reason),f(new Error(JSON.stringify(e)))},g.awsRealTimeSocket.onmessage=function(e){sg.debug("subscription message from AWS AppSyncRealTime: "+e.data+" ");var t,n,r,o,i,s,a,u=JSON.parse(e.data),c=u.type,l=u.payload,p=(void 0===l?{}:l).connectionTimeoutMs,d=void 0===p?3e5:p;if(c===Qm.GQL_CONNECTION_ACK)return m=!0,g.keepAliveTimeout=d,g.awsRealTimeSocket.onmessage=g._handleIncomingSubscriptionMessage.bind(g),g.awsRealTimeSocket.onerror=function(e){sg.debug(e),g._errorDisconnect(yg.CONNECTION_CLOSED)},void h("Cool, connected to AWS AppSyncRealTime");c===Qm.GQL_CONNECTION_ERROR&&(s=void 0===(i=(o=void 0===(r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(void 0===(n=(void 0===(t=u.payload)?{}:t).errors)?[]:n,1)[0])?{}:r).errorType)?"":i,a=o.errorCode,f({errorType:s,errorCode:void 0===a?0:a}))};var e={type:Qm.GQL_CONNECTION_INIT};g.awsRealTimeSocket.send(JSON.stringify(e)),setTimeout(function(){m||f(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(g),15e3)})];case 3:return e.sent(),[3,5];case 4:throw t=e.sent(),n=t.errorType,r=t.errorCode,ug.includes(r)?new x.NonRetryableError(n):n?new Error(n):t;case 5:return[2]}})})},dg.prototype._awsRealTimeHeaderBasedAuth=function(e){var o=e.authenticationType,i=e.payload,s=e.canonicalUri,a=e.appSyncGraphqlEndpoint,u=e.apiKey,c=e.region;return Ym(this,void 0,void 0,function(){var t,n,r;return Jm(this,function(e){switch(e.label){case 0:return t={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!=typeof(n=t[o])?(sg.debug("Authentication type "+o+" not supported"),[2,""]):(r=xp(a).host,[4,n({payload:i,canonicalUri:s,appSyncGraphqlEndpoint:a,apiKey:u,region:c,host:r})]);case 1:return[2,e.sent()]}})})},dg.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return Ym(this,void 0,void 0,function(){return Jm(this,function(e){switch(e.label){case 0:return[4,hd.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},dg.prototype._awsRealTimeOPENIDHeader=function(e){var n=e.host;return Ym(this,void 0,void 0,function(){var t;return Jm(this,function(e){switch(e.label){case 0:return[4,Ea.getItem("federatedInfo")];case 1:if(!(t=e.sent())||!t.token)throw new Error("No federated jwt");return[2,{Authorization:t.token,host:n}]}})})},dg.prototype._awsRealTimeApiKeyHeader=function(e){var r=e.apiKey,o=e.host;return Ym(this,void 0,void 0,function(){var t,n;return Jm(this,function(e){return t=new Date,n=t.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:o,"x-amz-date":n,"x-api-key":r}]})})},dg.prototype._awsRealTimeIAMHeader=function(e){var o=e.payload,i=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.region;return Ym(this,void 0,void 0,function(){var t,n,r;return Jm(this,function(e){switch(e.label){case 0:return t={region:a,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!e.sent())throw new Error("No credentials");return[4,x.Credentials.get().then(function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}})];case 2:return n=e.sent(),r={url:""+s+i,data:o,method:"POST",headers:ig({},lg)},[2,x.Signer.sign(r,n,t).headers]}})})},dg.prototype._ensureCredentials=function(){return x.Credentials.get().then(function(e){if(!e)return!1;var t=x.Credentials.shear(e);return sg.debug("set credentials for AWSAppSyncRealTimeProvider",t),!0}).catch(function(e){return sg.warn("ensure credentials error",e),!1})},dg);function dg(){var e=null!==cg&&cg.apply(this,arguments)||this;return e.socketStatus=ng.CLOSED,e.keepAliveTimeout=3e5,e.subscriptionObserverMap=new Map,e.promiseArray=[],e}function hg(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function fg(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var mg=new x.ConsoleLogger("PubSub");function gg(e){this._options=e,mg.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this),x.Amplify.register(this)}var yg,vg,bg=(Object.defineProperty(gg.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new Wm(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(gg.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new pg(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),gg.prototype.getModuleName=function(){return"PubSub"},gg.prototype.configure=function(e){var t=this,n=e?e.PubSub||e:{};return mg.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},gg.prototype.addPluggable=function(t){return hg(this,void 0,void 0,function(){return fg(this,function(e){return t&&"PubSub"===t.getCategory()?(this._pluggables.push(t),[2,t.configure(this._options)]):[2]})})},gg.prototype.getProviderByName=function(t){return t===x.INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER?this.awsAppSyncProvider:t===x.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(e){return e.getProviderName()===t})},gg.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;var n=this.getProviderByName(t);if(!n)throw new Error("Could not find provider named "+t);return[n]},gg.prototype.publish=function(t,n,r){return hg(this,void 0,void 0,function(){return fg(this,function(e){return[2,Promise.all(this.getProviders(r).map(function(e){return e.publish(t,n,r)}))]})})},gg.prototype.subscribe=function(t,r){mg.debug("subscribe options",r);var o=this.getProviders(r);return new Sm(function(n){var e=o.map(function(e){return{provider:e,observable:e.subscribe(t,r)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return n.next({provider:t,value:e})},error:function(e){return n.error({provider:t,error:e})}})});return function(){return e.forEach(function(e){return e.unsubscribe()})}})},new gg(null));(vg=yg=yg||{}).CONNECTION_CLOSED="Connection closed",vg.TIMEOUT_DISCONNECT="Timeout disconnect";function wg(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function _g(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Sg(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var Cg=function(){return(Cg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Eg=new x.ConsoleLogger("GraphQLAPI"),Ig=(Ag.prototype.getModuleName=function(){return"GraphQLAPI"},Ag.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}(t,["API"]),i=Cg(Cg({},o),r);return Eg.debug("configure GraphQL API",{opt:i}),i.aws_project_region&&(i=Object.assign({},i,{region:i.aws_project_region,header:{}})),void 0!==i.graphql_headers&&"function"!=typeof i.graphql_headers&&(Eg.warn("graphql_headers should be a function"),i.graphql_headers=void 0),this._options=Object.assign({},this._options,i),this.createInstance(),this._options},Ag.prototype.createInstance=function(){return Eg.debug("create Rest instance"),this._options?(this._api=new Gh(this._options),!0):Promise.reject("API not configured")},Ag.prototype._headerBasedAuth=function(a){return wg(this,void 0,void 0,function(){var t,n,r,o,i,s;return _g(this,function(e){switch(e.label){case 0:switch(t=this._options,n=t.aws_appsync_authenticationType,r=t.aws_appsync_apiKey,o={},a||n||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,6]}return[3,8];case 1:if(!r)throw new Error("No api-key configured");return o={Authorization:null,"X-Api-Key":r},[3,9];case 2:return[4,this._ensureCredentials()];case 3:if(!e.sent())throw new Error("No credentials");return[3,9];case 4:return[4,Ea.getItem("federatedInfo")];case 5:if(!(i=e.sent())||!i.token)throw new Error("No federated jwt");return o={Authorization:i.token},[3,9];case 6:return[4,hd.currentSession()];case 7:return s=e.sent(),o={Authorization:s.getAccessToken().getJwtToken()},[3,9];case 8:return o={Authorization:null},[3,9];case 9:return[2,o]}})})},Ag.prototype.getGraphqlOperationType=function(e){var t=Uf(e);return Sg(t.definitions,1)[0].operation},Ag.prototype.graphql=function(e,t){var n=e.query,r=e.variables,o=void 0===r?{}:r,i=e.authMode,s=Uf("string"==typeof n?n:sf(n)),a=Sg(s.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0],u=(void 0===a?{}:a).operation;switch(u){case"query":case"mutation":var c=this._api.getCancellableToken(),l={cancellableToken:c},p=this._graphql({query:s,variables:o,authMode:i},t,l);return this._api.updateRequestToBeCancellable(p,c),p;case"subscription":return this._graphqlSubscribe({query:s,variables:o,authMode:i},t)}throw new Error("invalid operation type: "+u)},Ag.prototype._graphql=function(e,S,C){var E=e.query,I=e.variables,A=e.authMode;return void 0===S&&(S={}),void 0===C&&(C={}),wg(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,_;return _g(this,function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return t=this._options,n=t.aws_appsync_region,r=t.aws_appsync_graphqlEndpoint,o=t.graphql_headers,i=void 0===o?function(){return{}}:o,s=t.graphql_endpoint,a=t.graphql_endpoint_iam_region,c=[{}],(l=!s)?[4,this._headerBasedAuth(A)]:[3,4];case 3:l=e.sent(),e.label=4;case 4:return p=[Cg.apply(void 0,c.concat([l]))],(d=s)?a?[4,this._headerBasedAuth(A)]:[3,6]:[3,8];case 5:return h=e.sent(),[3,7];case 6:h={Authorization:null},e.label=7;case 7:d=h,e.label=8;case 8:return f=[Cg.apply(void 0,p.concat([d]))],[4,i({query:E,variables:I})];case 9:if(u=Cg.apply(void 0,[Cg.apply(void 0,[Cg.apply(void 0,f.concat([e.sent()])),S]),!s&&((_={})["x-amz-user-agent"]=x.Constants.userAgent,_)]),m={query:sf(E),variables:I},g=Object.assign({headers:u,body:m,signerServiceInfo:{service:s?"execute-api":"appsync",region:s?a:n}},C),!(y=s||r))throw{data:{},errors:[new tf("No graphql endpoint provided.")]};e.label=10;case 10:return e.trys.push([10,12,,13]),[4,this._api.post(y,g)];case 11:return v=e.sent(),[3,13];case 12:if(b=e.sent(),this._api.isCancel(b))throw b;return v={data:{},errors:[new tf(b.message)]},[3,13];case 13:if((w=v.errors)&&w.length)throw v;return[2,v]}})})},Ag.prototype.isCancel=function(e){return this._api.isCancel(e)},Ag.prototype.cancel=function(e,t){return this._api.cancel(e,t)},Ag.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,o=e.authMode;void 0===t&&(t={});var i=this._options,s=i.aws_appsync_region,a=i.aws_appsync_graphqlEndpoint,u=i.aws_appsync_authenticationType,c=i.aws_appsync_apiKey,l=i.graphql_headers,p=void 0===l?function(){return{}}:l,d=o||u||"AWS_IAM";if(bg&&"function"==typeof bg.subscribe)return bg.subscribe("",{provider:x.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER,appSyncGraphqlEndpoint:a,authenticationType:d,apiKey:c,query:sf(n),region:s,variables:r,graphql_headers:p,additionalHeaders:t});throw Eg.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},Ag.prototype._ensureCredentials=function(){return x.Credentials.get().then(function(e){if(!e)return!1;var t=x.Credentials.shear(e);return Eg.debug("set credentials for api",t),!0}).catch(function(e){return Eg.warn("ensure credentials error",e),!1})},Ag);function Ag(e){this._api=null,this._options=e,Q.register(this),Eg.debug("API Options",this._options)}new Ig(null);var Pg=function(){return(Pg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},kg=new x.ConsoleLogger("API");function Og(e){this._options=e,this._restApi=new Jh(e),this._graphqlApi=new Ig(e),x.Amplify.register(this),kg.debug("API Options",this._options)}var Tg=(Og.prototype.getModuleName=function(){return"API"},Og.prototype.configure=function(e){this._options=Object.assign({},this._options,e);var t=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return Pg(Pg({},t),n)},Og.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},Og.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},Og.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},Og.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},Og.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},Og.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},Og.prototype.isCancel=function(e){return this._restApi.isCancel(e)},Og.prototype.cancel=function(e,t){return this._restApi.cancel(e,t)},Og.prototype.endpoint=function(u){return e=this,c=function(){return n=this,r=function(e){return[2,this._restApi.endpoint(u)]},a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}var n,r,o,i,s,a,t},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((c=c.apply(e,s||[])).next())});var e,s,a,c},Og.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},Og.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},new Og(null)),xg=function(){return(xg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ng=new x.ConsoleLogger("AbstractInteractionsProvider"),Ug=(Rg.prototype.configure=function(e){return void 0===e&&(e={}),this._config=xg(xg({},this._config),e),Ng.debug("configure "+this.getProviderName(),this._config),this.options},Rg.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(Rg.prototype,"options",{get:function(){return xg({},this._config)},enumerable:!0,configurable:!0}),Rg);function Rg(e){void 0===e&&(e={}),this._config=e}var Mg,Dg="runtime.lex.{region}.amazonaws.com",Fg=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Lg=new Set(["cn-north-1","cn-northwest-1"]),jg=new Set(["us-iso-east-1"]),Bg=new Set(["us-isob-east-1"]),Vg=new Set(["us-gov-west-1","us-gov-east-1"]),qg=te(te({},{apiVersion:"2016-11-28",disableHostPrefix:!1,signingName:"lex",regionInfoProvider:function(e,t){var n=void 0;switch(e){case"eu-west-1":n={hostname:"runtime.lex.eu-west-1.amazonaws.com",signingService:"lex"};break;case"us-east-1":n={hostname:"runtime.lex.us-east-1.amazonaws.com",signingService:"lex"};break;case"us-west-2":n={hostname:"runtime.lex.us-west-2.amazonaws.com",signingService:"lex"};break;default:Fg.has(e)&&(n={hostname:Dg.replace("{region}",e),signingService:"lex"}),Lg.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com.cn".replace("{region}",e)}),jg.has(e)&&(n={hostname:"runtime.lex.{region}.c2s.ic.gov".replace("{region}",e)}),Bg.has(e)&&(n={hostname:"runtime.lex.{region}.sc2s.sgov.gov".replace("{region}",e)}),Vg.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:Dg.replace("{region}",e),signingService:"lex"})}return Promise.resolve(n)}}),{requestHandler:new i.NodeHttpHandler,sha256:o.Hash.bind(null,"sha256"),urlParser:s.parseUrl,bodyLengthChecker:a.calculateBodyLength,streamCollector:u.streamCollector,base64Decoder:l.fromBase64,base64Encoder:l.toBase64,utf8Decoder:c.fromUtf8,utf8Encoder:c.toUtf8,defaultUserAgent:p.defaultUserAgent("@aws-sdk/client-lex-runtime-service","1.0.0-beta.5"),runtime:"node",credentialDefaultProvider:n.defaultProvider,regionDefaultProvider:r.defaultProvider}),zg=(ee(Hg,Mg=w.Client),Hg.prototype.destroy=function(){},Hg);function Hg(e){var t=this,n=te(te({},qg),e),r=d.resolveRegionConfig(n),o=d.resolveEndpointsConfig(r),i=y.resolveAwsAuthConfig(o),s=g.resolveRetryConfig(i),a=v.resolveUserAgentConfig(s),u=m.resolveHostHeaderConfig(a);return(t=Mg.call(this,u)||this).config=u,t.middlewareStack.use(y.getAwsAuthPlugin(t.config)),t.middlewareStack.use(g.getRetryPlugin(t.config)),t.middlewareStack.use(v.getUserAgentPlugin(t.config)),t.middlewareStack.use(f.getContentLengthPlugin(t.config)),t.middlewareStack.use(m.getHostHeaderPlugin(t.config)),t}function Kg(r,o){return ie(this,void 0,void 0,function(){var t,n;return se(this,function(e){return 200!==r.statusCode&&400<=r.statusCode?[2,function(S,C){return ie(this,void 0,void 0,function(){var t,n,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,_;return se(this,function(e){switch(e.label){case 0:return n=[te({},S)],s={},[4,ry(S.body,C)];case 1:switch(t=te.apply(void 0,n.concat([(s.body=e.sent(),s)])),u="UnknownError",u=oy(S,t.body)){case"BadRequestException":case"com.amazonaws.commonapi.exceptions#BadRequestException":return[3,2];case"ConflictException":case"com.amazonaws.commonapi.exceptions#ConflictException":return[3,4];case"InternalFailureException":case"com.amazonaws.commonapi.exceptions#InternalFailureException":return[3,6];case"LimitExceededException":case"com.amazonaws.commonapi.exceptions#LimitExceededException":return[3,8];case"NotAcceptableException":case"com.amazonaws.commonapi.exceptions#NotAcceptableException":return[3,10];case"NotFoundException":case"com.amazonaws.commonapi.exceptions#NotFoundException":return[3,12];case"RequestTimeoutException":case"com.amazonaws.commonapi.exceptions#RequestTimeoutException":return[3,14];case"UnsupportedMediaTypeException":case"com.amazonaws.commonapi.exceptions#UnsupportedMediaTypeException":return[3,16];case"BadGatewayException":case"com.amazonaws.deepsense.runtimeservice#BadGatewayException":return[3,18];case"DependencyFailedException":case"com.amazonaws.deepsense.runtimeservice#DependencyFailedException":return[3,20];case"LoopDetectedException":case"com.amazonaws.deepsense.runtimeservice#LoopDetectedException":return[3,22]}return[3,24];case 2:return c=[{}],[4,Yg(t)];case 3:return a=te.apply(void 0,[te.apply(void 0,c.concat([e.sent()])),{name:u,$metadata:ay(S)}]),[3,25];case 4:return l=[{}],[4,Jg(t)];case 5:return a=te.apply(void 0,[te.apply(void 0,l.concat([e.sent()])),{name:u,$metadata:ay(S)}]),[3,25];case 6:return p=[{}],[4,Zg(t)];case 7:return a=te.apply(void 0,[te.apply(void 0,p.concat([e.sent()])),{name:u,$metadata:ay(S)}]),[3,25];case 8:return d=[{}],[4,Qg(t)];case 9:return a=te.apply(void 0,[te.apply(void 0,d.concat([e.sent()])),{name:u,$metadata:ay(S)}]),[3,25];case 10:return h=[{}],[4,(i=t,ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"NotAcceptableException",$fault:"client",$metadata:ay(i),message:void 0},void 0!==(n=i.body).message&&null!==n.message&&(t.message=n.message),[2,t]})}))];case 11:return a=te.apply(void 0,[te.apply(void 0,h.concat([e.sent()])),{name:u,$metadata:ay(S)}]),[3,25];case 12:return f=[{}],[4,Xg(t)];case 13:return a=te.apply(void 0,[te.apply(void 0,f.concat([e.sent()])),{name:u,$metadata:ay(S)}]),[3,25];case 14:return m=[{}],[4,(o=t,ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"RequestTimeoutException",$fault:"client",$metadata:ay(o),message:void 0},void 0!==(n=o.body).message&&null!==n.message&&(t.message=n.message),[2,t]})}))];case 15:return a=te.apply(void 0,[te.apply(void 0,m.concat([e.sent()])),{name:u,$metadata:ay(S)}]),[3,25];case 16:return g=[{}],[4,(r=t,ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:ay(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})}))];case 17:return a=te.apply(void 0,[te.apply(void 0,g.concat([e.sent()])),{name:u,$metadata:ay(S)}]),[3,25];case 18:return y=[{}],[4,ey(t)];case 19:return a=te.apply(void 0,[te.apply(void 0,y.concat([e.sent()])),{name:u,$metadata:ay(S)}]),[3,25];case 20:return v=[{}],[4,ty(t)];case 21:return a=te.apply(void 0,[te.apply(void 0,v.concat([e.sent()])),{name:u,$metadata:ay(S)}]),[3,25];case 22:return b=[{}],[4,ny(t)];case 23:return a=te.apply(void 0,[te.apply(void 0,b.concat([e.sent()])),{name:u,$metadata:ay(S)}]),[3,25];case 24:w=t.body,u=w.code||w.Code||u,a=te(te({},w),{name:""+u,message:w.message||w.Message||u,$fault:"client",$metadata:ay(S)}),e.label=25;case 25:return _=a.message||a.Message||u,a.message=_,delete a.Message,[2,Promise.reject(Object.assign(new Error(_),a))]}var r,o,i})})}(r,o)]:(t={$metadata:ay(r),__type:"PostContentResponse",audioStream:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==r.headers["content-type"]&&(t.contentType=r.headers["content-type"]),void 0!==r.headers["x-amz-lex-dialog-state"]&&(t.dialogState=r.headers["x-amz-lex-dialog-state"]),void 0!==r.headers["x-amz-lex-input-transcript"]&&(t.inputTranscript=r.headers["x-amz-lex-input-transcript"]),void 0!==r.headers["x-amz-lex-intent-name"]&&(t.intentName=r.headers["x-amz-lex-intent-name"]),void 0!==r.headers["x-amz-lex-message"]&&(t.message=r.headers["x-amz-lex-message"]),void 0!==r.headers["x-amz-lex-message-format"]&&(t.messageFormat=r.headers["x-amz-lex-message-format"]),void 0!==r.headers["x-amz-lex-sentiment"]&&(t.sentimentResponse=r.headers["x-amz-lex-sentiment"]),void 0!==r.headers["x-amz-lex-session-attributes"]&&(t.sessionAttributes=new w.LazyJsonString(r.headers["x-amz-lex-session-attributes"])),void 0!==r.headers["x-amz-lex-session-id"]&&(t.sessionId=r.headers["x-amz-lex-session-id"]),void 0!==r.headers["x-amz-lex-slot-to-elicit"]&&(t.slotToElicit=r.headers["x-amz-lex-slot-to-elicit"]),void 0!==r.headers["x-amz-lex-slots"]&&(t.slots=new w.LazyJsonString(r.headers["x-amz-lex-slots"])),n=r.body,t.audioStream=n,[2,Promise.resolve(t)])})})}function Gg(a,u){return ie(this,void 0,void 0,function(){var i,s;return se(this,function(e){switch(e.label){case 0:return 200!==a.statusCode&&400<=a.statusCode?[2,function(g,y){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m;return se(this,function(e){switch(e.label){case 0:return n=[te({},g)],r={},[4,ry(g.body,y)];case 1:switch(t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=oy(g,t.body)){case"BadRequestException":case"com.amazonaws.commonapi.exceptions#BadRequestException":return[3,2];case"ConflictException":case"com.amazonaws.commonapi.exceptions#ConflictException":return[3,4];case"InternalFailureException":case"com.amazonaws.commonapi.exceptions#InternalFailureException":return[3,6];case"LimitExceededException":case"com.amazonaws.commonapi.exceptions#LimitExceededException":return[3,8];case"NotFoundException":case"com.amazonaws.commonapi.exceptions#NotFoundException":return[3,10];case"BadGatewayException":case"com.amazonaws.deepsense.runtimeservice#BadGatewayException":return[3,12];case"DependencyFailedException":case"com.amazonaws.deepsense.runtimeservice#DependencyFailedException":return[3,14];case"LoopDetectedException":case"com.amazonaws.deepsense.runtimeservice#LoopDetectedException":return[3,16]}return[3,18];case 2:return s=[{}],[4,Yg(t)];case 3:return o=te.apply(void 0,[te.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:ay(g)}]),[3,19];case 4:return a=[{}],[4,Jg(t)];case 5:return o=te.apply(void 0,[te.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:ay(g)}]),[3,19];case 6:return u=[{}],[4,Zg(t)];case 7:return o=te.apply(void 0,[te.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:ay(g)}]),[3,19];case 8:return c=[{}],[4,Qg(t)];case 9:return o=te.apply(void 0,[te.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:ay(g)}]),[3,19];case 10:return l=[{}],[4,Xg(t)];case 11:return o=te.apply(void 0,[te.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:ay(g)}]),[3,19];case 12:return p=[{}],[4,ey(t)];case 13:return o=te.apply(void 0,[te.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:ay(g)}]),[3,19];case 14:return d=[{}],[4,ty(t)];case 15:return o=te.apply(void 0,[te.apply(void 0,d.concat([e.sent()])),{name:i,$metadata:ay(g)}]),[3,19];case 16:return h=[{}],[4,ny(t)];case 17:return o=te.apply(void 0,[te.apply(void 0,h.concat([e.sent()])),{name:i,$metadata:ay(g)}]),[3,19];case 18:f=t.body,i=f.code||f.Code||i,o=te(te({},f),{name:""+i,message:f.message||f.Message||i,$fault:"client",$metadata:ay(g)}),e.label=19;case 19:return m=o.message||o.Message||i,o.message=m,delete o.Message,[2,Promise.reject(Object.assign(new Error(m),o))]}})})}(a,u)]:(i={$metadata:ay(a),__type:"PostTextResponse",dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,ry(a.body,u)]);case 1:return void 0!==(s=e.sent()).dialogState&&null!==s.dialogState&&(i.dialogState=s.dialogState),void 0!==s.intentName&&null!==s.intentName&&(i.intentName=s.intentName),void 0!==s.message&&null!==s.message&&(i.message=s.message),void 0!==s.messageFormat&&null!==s.messageFormat&&(i.messageFormat=s.messageFormat),void 0!==s.responseCard&&null!==s.responseCard&&(i.responseCard=(r=s.responseCard,o={__type:"ResponseCard",contentType:void 0,genericAttachments:void 0,version:void 0},void 0!==r.contentType&&null!==r.contentType&&(o.contentType=r.contentType),void 0!==r.genericAttachments&&null!==r.genericAttachments&&(o.genericAttachments=(r.genericAttachments||[]).map(function(e){return n={__type:"GenericAttachment",attachmentLinkUrl:void 0,buttons:void 0,imageUrl:void 0,subTitle:void 0,title:void 0},void 0!==(t=e).attachmentLinkUrl&&null!==t.attachmentLinkUrl&&(n.attachmentLinkUrl=t.attachmentLinkUrl),void 0!==t.buttons&&null!==t.buttons&&(n.buttons=sy(t.buttons)),void 0!==t.imageUrl&&null!==t.imageUrl&&(n.imageUrl=t.imageUrl),void 0!==t.subTitle&&null!==t.subTitle&&(n.subTitle=t.subTitle),void 0!==t.title&&null!==t.title&&(n.title=t.title),n;var t,n})),void 0!==r.version&&null!==r.version&&(o.version=r.version),o)),void 0!==s.sentimentResponse&&null!==s.sentimentResponse&&(i.sentimentResponse=(t=s.sentimentResponse,n={__type:"SentimentResponse",sentimentLabel:void 0,sentimentScore:void 0},void 0!==t.sentimentLabel&&null!==t.sentimentLabel&&(n.sentimentLabel=t.sentimentLabel),void 0!==t.sentimentScore&&null!==t.sentimentScore&&(n.sentimentScore=t.sentimentScore),n)),void 0!==s.sessionAttributes&&null!==s.sessionAttributes&&(i.sessionAttributes=$g(s.sessionAttributes)),void 0!==s.sessionId&&null!==s.sessionId&&(i.sessionId=s.sessionId),void 0!==s.slotToElicit&&null!==s.slotToElicit&&(i.slotToElicit=s.slotToElicit),void 0!==s.slots&&null!==s.slots&&(i.slots=$g(s.slots)),[2,Promise.resolve(i)]}var t,n,r,o})})}function Wg(t){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function $g(t){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function Yg(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:ay(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})}function Jg(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"ConflictException",$fault:"client",$metadata:ay(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})}function Zg(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"InternalFailureException",$fault:"server",$metadata:ay(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})}function Qg(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"LimitExceededException",$fault:"client",$metadata:ay(r),message:void 0,retryAfterSeconds:void 0},void 0!==r.headers["retry-after"]&&(t.retryAfterSeconds=r.headers["retry-after"]),void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})}function Xg(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:ay(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})}function ey(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"BadGatewayException",$fault:"server",$metadata:ay(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})}function ty(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"DependencyFailedException",$fault:"client",$metadata:ay(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})}function ny(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"LoopDetectedException",$fault:"server",$metadata:ay(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})}function ry(e,t){return o=n=t,((r=e)instanceof Uint8Array?Promise.resolve(r):o.streamCollector(r)||Promise.resolve(new Uint8Array)).then(function(e){return n.utf8Encoder(e)}).then(function(e){return e.length?JSON.parse(e):{}});var n,r,o}function oy(e,t){function n(e){var t=e;return 0<=t.indexOf(":")&&(t=t.split(":")[0]),0<=t.indexOf("#")&&(t=t.split("#")[1]),t}var r,o=(r=e.headers,Object.keys(r).find(function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""}var iy,sy=function(e,t){return(e||[]).map(function(e){return n={__type:"Button",text:void 0,value:void 0},void 0!==(t=e).text&&null!==t.text&&(n.text=t.text),void 0!==t.value&&null!==t.value&&(n.value=t.value),n;var t,n})},ay=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},uy=(ee(cy,iy=w.Command),cy.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},cy.prototype.serialize=function(e,t){return function(i,s){return ie(this,void 0,void 0,function(){var t,n,r,o;return se(this,function(e){if(t={"Content-Type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED_PAYLOAD"},void 0!==i.accept&&(t.Accept=i.accept),void 0!==i.contentType&&(t["Content-Type"]=i.contentType),void 0!==i.requestAttributes&&(t["x-amz-lex-request-attributes"]=w.LazyJsonString.fromObject(i.requestAttributes)),void 0!==i.sessionAttributes&&(t["x-amz-lex-session-attributes"]=w.LazyJsonString.fromObject(i.sessionAttributes)),n="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===i.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((r=i.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",w.extendedEncodeURIComponent(r)),void 0===i.botName)throw new Error("No value provided for input HTTP label: botName.");if((r=i.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",w.extendedEncodeURIComponent(r)),void 0===i.userId)throw new Error("No value provided for input HTTP label: userId.");if((r=i.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",w.extendedEncodeURIComponent(r)),void 0!==i.inputStream&&(o=i.inputStream),[2,new _.HttpRequest(te(te({},s.endpoint),{protocol:"https",method:"POST",headers:t,path:n,body:o}))]})})}(e,t)},cy.prototype.deserialize=function(e,t){return Kg(e,t)},cy);function cy(e){var t=iy.call(this)||this;return t.input=e,t}var ly,py=(ee(dy,ly=w.Command),dy.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},dy.prototype.serialize=function(e,t){return function(s,a){return ie(this,void 0,void 0,function(){var t,n,r,o,i;return se(this,function(e){if(t={"Content-Type":"application/json"},n="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===s.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((r=s.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",w.extendedEncodeURIComponent(r)),void 0===s.botName)throw new Error("No value provided for input HTTP label: botName.");if((r=s.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",w.extendedEncodeURIComponent(r)),void 0===s.userId)throw new Error("No value provided for input HTTP label: userId.");if((r=s.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",w.extendedEncodeURIComponent(r)),i={},void 0!==s.inputText&&(i.inputText=s.inputText),void 0!==s.requestAttributes&&(i.requestAttributes=Wg(s.requestAttributes)),void 0!==s.sessionAttributes&&(i.sessionAttributes=Wg(s.sessionAttributes)),o=JSON.stringify(i),[2,new _.HttpRequest(te(te({},a.endpoint),{protocol:"https",method:"POST",headers:t,path:n,body:o}))]})})}(e,t)},dy.prototype.deserialize=function(e,t){return Gg(e,t)},dy);function dy(e){var t=ly.call(this)||this;return t.input=e,t}var hy,fy,my=(hy=function(e,t){return(hy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}hy(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),gy=new x.ConsoleLogger("AWSLexProvider"),yy=(my(vy,fy=Ug),vy.prototype.getProviderName=function(){return"AWSLexProvider"},vy.prototype.reportBotStatus=function(e,t){var n=this;gy.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t](null,{slots:e.slots})},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete(null,{slots:e.slots})},0)),"Failed"===e.dialogState&&("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t]("Bot conversation failed")},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete("Bot conversation failed")},0))},vy.prototype.sendMessage=function(m,g){return e=this,u=function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,e;return u=this,c=function(e){switch(e.label){case 0:return this._config[m]?[4,x.Credentials.get()]:[2,Promise.reject("Bot "+m+" does not exist")];case 1:if(!(t=e.sent()))return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new zg({region:this._config[m].region,credentials:t,customUserAgent:x.getAmplifyUserAgent()}),"string"!=typeof g)return[3,6];n={botAlias:this._config[m].alias,botName:m,inputText:g,userId:t.identityId},gy.debug("postText to lex",g),e.label=2;case 2:return e.trys.push([2,4,,5]),r=new py(n),[4,this.lexRuntimeServiceClient.send(r)];case 3:return s=e.sent(),this.reportBotStatus(s,m),[2,s];case 4:return o=e.sent(),[2,Promise.reject(o)];case 5:return[3,10];case 6:n="voice"===g.options.messageType?{botAlias:this._config[m].alias,botName:m,contentType:"audio/x-l16; sample-rate=16000",inputStream:g.content,userId:t.identityId,accept:"audio/mpeg"}:{botAlias:this._config[m].alias,botName:m,contentType:"text/plain; charset=utf-8",inputStream:g.content,userId:t.identityId,accept:"audio/mpeg"},gy.debug("postContent to lex",g),e.label=7;case 7:return e.trys.push([7,9,,10]),i=new uy(n),[4,this.lexRuntimeServiceClient.send(i)];case 8:return s=e.sent(),this.reportBotStatus(s,m),[2,s];case 9:return a=e.sent(),[2,Promise.reject(a)];case 10:return[2]}},h={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]},e={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function f(t){return function(e){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;h;)try{if(l=1,p&&(d=2&t[0]?p.return:t[0]?p.throw||((d=p.return)&&d.call(p),0):p.next)&&!(d=d.call(p,t[1])).done)return d;switch(p=0,d&&(t=[2&t[0],d.value]),t[0]){case 0:case 1:d=t;break;case 4:return h.label++,{value:t[1],done:!1};case 5:h.label++,p=t[1],t=[0];continue;case 7:t=h.ops.pop(),h.trys.pop();continue;default:if(!(d=0<(d=h.trys).length&&d[d.length-1])&&(6===t[0]||2===t[0])){h=0;continue}if(3===t[0]&&(!d||t[1]>d[0]&&t[1]<d[3])){h.label=t[1];break}if(6===t[0]&&h.label<d[1]){h.label=d[1],d=t;break}if(d&&h.label<d[2]){h.label=d[2],h.ops.push(t);break}d[2]&&h.ops.pop(),h.trys.pop();continue}t=c.call(u,h)}catch(e){t=[6,e],p=0}finally{l=d=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},vy.prototype.onComplete=function(e,t){if(!this._config[e])throw new ErrorEvent("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},vy);function vy(e){void 0===e&&(e={});var t=fy.call(this,e)||this;return t._botsCompleteCallback={},t}var by=function(){return(by=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},wy=new x.ConsoleLogger("Interactions");function _y(e){this._options=e,wy.debug("Interactions Options",this._options),this._pluggables={},x.Amplify.register(this)}var Sy=(_y.prototype.getModuleName=function(){return"Interactions"},_y.prototype.configure=function(e){var t=this,n=e?e.Interactions||e:{};wy.debug("configure Interactions",{opt:n}),this._options=by(by({bots:{}},n),n.Interactions);var r=this._options.aws_bots_config,o=this._options.bots;return!Object.keys(o).length&&r&&Array.isArray(r)&&r.forEach(function(e){t._options.bots[e.name]=e}),!this._pluggables.AWSLexProvider&&o&&Object.keys(o).map(function(e){return o[e]}).find(function(e){return!e.providerName||"AWSLexProvider"===e.providerName})&&(this._pluggables.AWSLexProvider=new yy),Object.keys(this._pluggables).map(function(e){t._pluggables[e].configure(t._options.bots)}),this._options},_y.prototype.addPluggable=function(e){if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Bot "+e.getProviderName()+" already plugged");return e.configure(this._options.bots),void(this._pluggables[e.getProviderName()]=e)}},_y.prototype.send=function(c,l){return e=this,u=function(){var t,n,r,o,i,s,a,e;return n=this,r=function(e){switch(e.label){case 0:if(!this._options.bots||!this._options.bots[c])throw new Error("Bot "+c+" does not exist");if(t=this._options.bots[c].providerName||"AWSLexProvider",!this._pluggables[t])throw new Error("Bot "+t+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[t].sendMessage(c,l)];case 1:return[2,e.sent()]}},a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function u(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},_y.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},new _y(null)),Cy=function(){return(Cy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ey=new x.ConsoleLogger("AbstractXRProvider"),Iy=(Ay.prototype.configure=function(e){return void 0===e&&(e={}),this._config=Cy(Cy({},e),this._config),Ey.debug("configure "+this.getProviderName(),this._config),this.options},Ay.prototype.getCategory=function(){return"XR"},Object.defineProperty(Ay.prototype,"options",{get:function(){return Cy({},this._config)},enumerable:!0,configurable:!0}),Ay);function Ay(e){void 0===e&&(e={}),this._config=e}var Py,ky,Oy=(Py=function(e,t){return(Py=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Py(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ty=(Oy(xy,ky=Error),xy);function xy(){return null!==ky&&ky.apply(this,arguments)||this}var Ny,Uy=(Oy(Ry,Ny=Ty),Ry);function Ry(){return null!==Ny&&Ny.apply(this,arguments)||this}var My,Dy=(Oy(Fy,My=Ty),Fy);function Fy(){return null!==My&&My.apply(this,arguments)||this}var Ly,jy=(Oy(By,Ly=Ty),By);function By(){return null!==Ly&&Ly.apply(this,arguments)||this}var Vy,qy=(Oy(zy,Vy=Ty),zy);function zy(){return null!==Vy&&Vy.apply(this,arguments)||this}var Hy,Ky=(Oy(Gy,Hy=Ty),Gy);function Gy(){return null!==Hy&&Hy.apply(this,arguments)||this}var Wy,$y=(Oy(Yy,Wy=Ty),Yy);function Yy(){return null!==Wy&&Wy.apply(this,arguments)||this}function Jy(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Zy(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Qy,Xy,ev=(Qy=function(e,t){return(Qy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Qy(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tv=function(){return(tv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},nv=new x.ConsoleLogger("SumerianProvider"),rv=(ev(ov,Xy=Iy),ov.prototype.getProviderName=function(){return"SumerianProvider"},ov.prototype.loadScript=function(r){return Jy(this,void 0,void 0,function(){return Zy(this,function(e){return[2,new Promise(function(t,n){var e=document.createElement("script");e.src=r,e.addEventListener("load",function(e){t()}),e.addEventListener("error",function(e){n(new Error("Failed to load script: "+r))}),document.head.appendChild(e)})]})})},ov.prototype.loadScene=function(k,O,T){return Jy(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,_,S,C,E,I,A,P;return Zy(this,function(e){switch(e.label){case 0:if(!k)throw s="No scene name passed into loadScene",nv.error(s),new Ky(s);if(!O)throw s="No dom element id passed into loadScene",nv.error(s),new qy(s);if(!(t=document.getElementById(O)))throw s="DOM element id, "+O+" not found",nv.error(s),new qy(s);if(!(n=this.getScene(k)).sceneConfig)throw s="No scene config configured for scene: "+k,nv.error(s),new Ky(s);if(r=n.sceneConfig.url,o=n.sceneConfig.sceneId,n.sceneConfig.hasOwnProperty("region"))i=n.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw s="No region configured for scene: "+k,nv.error(s),new Ky(s);i=this.options.region}a={region:i,customUserAgent:x.Constants.userAgent+"-SumerianScene"},u={headers:{"X-Amz-User-Agent":x.Constants.userAgent}},c=r,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,x.Credentials.get()];case 2:return l=e.sent(),a.credentials=l,p={secret_key:l.secretAccessKey,access_key:l.accessKeyId,session_token:l.sessionToken},d={region:i,service:"sumerian"},h=x.Signer.sign({method:"GET",url:r},p,d),u.headers=tv(tv({},u.headers),h.headers),c=h.url,[3,4];case 3:return e.sent(),nv.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(c,u)];case 5:return[4,(f=e.sent()).json()];case 6:if(m=e.sent(),403===f.status)throw m.message?(nv.error("Failure to authenticate user: "+m.message),new Ky("Failure to authenticate user: "+m.message)):(nv.error("Failure to authenticate user"),new Ky("Failure to authenticate user"));return g=m.bundleData[o],[4,fetch(g.url,{headers:g.headers})];case 7:return[4,e.sent().json()];case 8:y=e.sent(),e.label=9;case 9:return e.trys.push([9,11,,12]),[4,this.loadScript(y[o].bootstrapperUrl)];case 10:return e.sent(),[3,12];case 11:throw v=e.sent(),nv.error(v),new Ky(v);case 12:return b=T.progressCallback?T.progressCallback:void 0,w=n.publishParamOverrides?n.publishParamOverrides:void 0,_={element:t,sceneId:o,sceneBundle:y,apiResponse:m,progressCallback:b,publishParamOverrides:w,awsSDKConfigOverride:a},[4,window.SumerianBootstrapper.loadScene(_)];case 13:S=e.sent(),n.sceneController=S,n.isLoaded=!0;try{for(C=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(S.sceneLoadWarnings),E=C.next();!E.done;E=C.next())I=E.value,nv.warn("loadScene warning: "+I)}catch(e){A={error:e}}finally{try{E&&!E.done&&(P=C.return)&&P.call(C)}finally{if(A)throw A.error}}return[2]}})})},ov.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},ov.prototype.getScene=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw nv.error(t),new Uy(t)}if(!e)throw t="No scene name was passed",nv.error(t),new Dy(t);if(this.options.scenes[e])return this.options.scenes[e];throw t="Scene '"+e+"' is not configured",nv.error(t),new Dy(t)},ov.prototype.getSceneController=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw nv.error(t),new Uy(t)}var n=this.options.scenes[e];if(!n)throw t="Scene '"+e+"' is not configured",nv.error(t),new Dy(t);var r=n.sceneController;if(r)return r;throw t="Scene controller for '"+e+"' has not been loaded",nv.error(t),new jy(t)},ov.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},ov.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},ov.prototype.start=function(e){this.getSceneController(e).start()},ov.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},ov.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},ov.prototype.isMuted=function(e){return this.getSceneController(e).muted},ov.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},ov.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},ov.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},ov);function ov(e){return void 0===e&&(e={}),Xy.call(this,e)||this}function iv(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function sv(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var av=new x.ConsoleLogger("XR");function uv(e){this._options=e,av.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new rv),x.Amplify.register(this)}var cv=(uv.prototype.configure=function(e){var o=this,i=e?e.XR||e:{};return av.debug("configure XR",{opt:i}),this._options=Object.assign({},this._options,i),Object.entries(this._pluggables).map(function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2),n=t[0],r=t[1];n!==o._defaultProvider||i[o._defaultProvider]?r.configure(o._options[n]):r.configure(o._options)}),this._options},uv.prototype.addPluggable=function(t){return iv(this,void 0,void 0,function(){return sv(this,function(e){return t&&"XR"===t.getCategory()?[2,(this._pluggables[t.getProviderName()]=t).configure(this._options)]:[2]})})},uv.prototype.loadScene=function(t,n,r,o){return void 0===r&&(r={}),void 0===o&&(o=this._defaultProvider),iv(this,void 0,void 0,function(){return sv(this,function(e){switch(e.label){case 0:if(!this._pluggables[o])throw new $y("Provider '"+o+"' not configured");return[4,this._pluggables[o].loadScene(t,n,r)];case 1:return[2,e.sent()]}})})},uv.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new $y("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},uv.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new $y("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},uv.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new $y("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},uv.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new $y("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},uv.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new $y("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},uv.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new $y("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},uv.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new $y("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},uv.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new $y("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},uv.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new $y("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},uv.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new $y("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},uv.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new $y("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},new uv(null)),lv=(pv.prototype.auth=function(){return this._auth||hd},pv.prototype.analytics=function(){return this._analytics||Bu},pv.prototype.storage=function(){return this._storage||zh},pv.prototype.api=function(){return this._api||Tg},pv.prototype.interactions=function(){return this._interactions||Sy},pv.prototype.cache=function(){return this._cache},pv.prototype.pubsub=function(){return this._pubsub||bg},pv.prototype.logger=function(e,t){return new this._logger(e,t)},pv.prototype.xr=function(){return this._xr||cv},pv.prototype.i18n=function(){return this._i18n},pv.prototype.authState=function(){return this._authState},pv.prototype.setAuthState=function(e){this._authState.next(e)},pv.decorators=[{type:h.Injectable}],pv.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:["modules"]},{type:h.Optional}]}]},pv);function pv(e){void 0===e&&(e={}),this.modules=e,this._authState=new je,this.authStateChange$=this._authState.asObservable();var t,n,o,r,i,s,a,u,c,l,p,d,h,f,m,g,y,v=e||Q;t=this._authState,n=v.Auth,y=t,n.currentAuthenticatedUser().then(function(e){Ss.debug("has authenticated user",e),y.next({state:"signedIn",user:e})}).catch(function(e){Ss.debug("no authenticated user",e),y.next({state:"signedOut",user:null})}),o=t,r=x.Amplify.configure(null),b.has(r,"Auth.oauth")&&x.Hub.listen("auth",{onHubCapsule:function(e){var t,n=e.channel,r=e.payload;"auth"===n&&(t=r.data.username,Ss.debug("authentication oauth event",r),o.next({state:r.event,user:{username:t}}))}},"angularAuthListener"),i=t,a=(s=n).signIn,s.signIn=function(e,t){return a.call(s,e,t).then(function(e){return Ss.debug("signIn success"),e.challengeName?(Ss.debug("signIn challenge: "+e.challengeName),"NEW_PASSWORD_REQUIRED"===e.challengeName?i.next({state:"requireNewPassword",user:e}):"MFA_SETUP"===e.challengeName?i.next({state:"setupMFA",user:e}):"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?i.next({state:"confirmSignIn",user:e}):Ss.debug("warning: unhandled challengeName "+e.challengeName)):i.next({state:"signedIn",user:e}),e}).catch(function(e){throw Ss.debug("signIn error",e),e})},u=t,l=(c=n).signOut,c.signOut=function(e){return l.call(c,e).then(function(e){return Ss.debug("signOut success"),u.next({state:"signedOut",user:null}),e}).catch(function(e){throw Ss.debug("signOut error",e),e})},p=t,h=(d=n).signUp,d.signUp=function(t,e,n,r){return h.call(d,t,e,n,r).then(function(e){return Ss.debug("signUp success"),p.next({state:"confirmSignUp",user:{username:t}}),e}).catch(function(e){throw Ss.debug("signUp error",e),e})},f=t,g=(m=n).confirmSignUp,m.confirmSignUp=function(t,e){return g.call(m,t,e).then(function(e){return Ss.debug("confirmSignUp success"),f.next({state:"signIn",user:{username:t}}),e}).catch(function(e){throw Ss.debug("confirmSignUp error",e),e})},this._auth=v.Auth,this._analytics=v.Analytics,this._storage=v.Storage,this._api=v.API,this._cache=v.Cache,this._pubsub=v.PubSub,this._interactions=v.Interactions,this._xr=v.XR,this._i18n=x.I18n,this._logger=x.Logger}var dv=(hv.prototype.ngOnInit=function(){var t=this;if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider");this.amplifyService.auth().currentAuthenticatedUser().then(function(e){"loading"===t.authState.state&&e&&t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){"loading"===t.authState.state&&t.amplifyService.setAuthState({state:"signIn",user:null})})},Object.defineProperty(hv.prototype,"data",{set:function(e){e.signUpConfig&&(this._signUpConfig=e.signUpConfig),e.hide&&(this.hide=e.hide),this._usernameAttributes=e.usernameAttributes||this._usernameAttributes||"username"},enumerable:!0,configurable:!0}),Object.defineProperty(hv.prototype,"signUpConfig",{set:function(e){this._signUpConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(hv.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e||"username"},enumerable:!0,configurable:!0}),hv.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){t.authState=e},function(){t.authState={state:"signIn",user:null}})},hv.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},hv.decorators=[{type:h.Component,args:[{selector:"amplify-authenticator-core",template:'\n  <div class="amplify-authenticator">\n    <amplify-auth-sign-in-core\n      *ngIf="!shouldHide(\'SignIn\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-in-core>\n\n    <amplify-auth-sign-up-core\n      *ngIf="!shouldHide(\'SignUp\')"\n      [authState]="authState"\n      [signUpConfig]="_signUpConfig"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-up-core>\n\n    <amplify-auth-confirm-sign-up-core\n      *ngIf="!shouldHide(\'ConfirmSignUp\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-up-core>\n\n    <amplify-auth-confirm-sign-in-core\n      *ngIf="!shouldHide(\'ConfirmSignIn\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-in-core>\n\n    <amplify-auth-forgot-password-core\n      *ngIf="!shouldHide(\'ForgotPassword\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-forgot-password-core>\n\n    <amplify-auth-greetings-core\n    *ngIf="!shouldHide(\'Greetings\')"\n    [authState]="authState"\n    [usernameAttributes]="_usernameAttributes"\n    ></amplify-auth-greetings-core>\n\n     <amplify-auth-require-new-password-core\n      *ngIf="!shouldHide(\'RequireNewPassword\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-require-new-password-core>\n  </div>\n'}]}],hv.ctorParameters=function(){return[{type:lv}]},hv.propDecorators={hide:[{type:h.Input}],data:[{type:h.Input}],signUpConfig:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},hv);function hv(e){this.amplifyService=e,this.authState={state:"loading",user:null},this._signUpConfig={},this._usernameAttributes="username",this.hide=[],this.subscribe()}var fv,mv,gv=((fv=function(e,t){return(fv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}fv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(yv,mv=dv),yv.decorators=[{type:h.Component,args:[{selector:"amplify-authenticator-ionic",template:'\n<div class="amplify-authenticator amplify-authenticator-ionic ">\n\n<amplify-auth-sign-in-ionic\n  *ngIf="!shouldHide(\'SignIn\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-in-ionic>\n\n<amplify-auth-sign-up-ionic\n  *ngIf="!shouldHide(\'SignUp\')"\n  [authState]="authState"\n  [signUpConfig]="_signUpConfig"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-up-ionic>\n\n<amplify-auth-confirm-sign-up-ionic\n  *ngIf="!shouldHide(\'ConfirmSignUp\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-confirm-sign-up-ionic>\n\n<amplify-auth-confirm-sign-in-ionic\n  *ngIf="!shouldHide(\'ConfirmSignIn\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-confirm-sign-in-ionic>\n\n<amplify-auth-forgot-password-ionic\n  *ngIf="!shouldHide(\'ForgotPassword\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-forgot-password-ionic>\n\n<amplify-auth-greetings-ionic\n  *ngIf="!shouldHide(\'Greetings\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n></amplify-auth-greetings-ionic>\n\n<amplify-auth-require-new-password-ionic\n  *ngIf="!shouldHide(\'RequireNewPassword\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-require-new-password-ionic>\n</div>\n'}]}],yv.ctorParameters=function(){return[{type:lv}]},yv);function yv(e){var t=mv.call(this,e)||this;return t.amplifyService=e,t}var vv=(bv.prototype.ngOnInit=function(){this.loadComponent()},bv.prototype.ngOnDestroy=function(){},bv.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new _s(gv,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}):new _s(dv,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},bv.decorators=[{type:h.Component,args:[{selector:"amplify-authenticator",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],bv.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},bv.propDecorators={framework:[{type:h.Input}],hide:[{type:h.Input}],signUpConfig:[{type:h.Input}],usernameAttributes:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[bs]}]},bv);function bv(e){this.componentFactoryResolver=e,this.hide=[],this.usernameAttributes="username"}var wv="sign-in-section",_v="sign-in-header-section",Sv="sign-in-body-section",Cv="sign-in-password-input",Ev="sign-in-forgot-password-link",Iv="sign-in-sign-in-button",Av="sign-in-create-account-link",Pv="authenticator-error",kv="sign-up-section",Ov="sign-up-header-section",Tv="sign-up-body-section",xv="sign-up-non-phone-number-input",Nv="sign-up-create-account-button",Uv="sign-up-sign-in-link",Rv="sign-up-sign-in-button",Mv="sign-up-confirm-button",Dv="require-new-password-section",Fv="require-new-password-header-section",Lv="require-new-password-body-section",jv="require-new-password-new-password-input",Bv="require-new-password-back-to-sign-in-link",Vv="require-new-password-submit-button",qv="username-input",zv="email-input",Hv="phone-number-input",Kv="dial-code-select",Gv="sign-out-button",Wv="confirm-sign-up-section",$v="confirm-sign-up-header-section",Yv="confirm-sign-up-body-section",Jv="confirm-sign-up-username-input",Zv="confirm-sign-up-confirmation-code-input",Qv="confirm-sign-up-resend-code-link",Xv="confirm-sign-up-confirm-button",eb="confirm-sign-up-back-to-sign-in-link",tb="confirm-sign-in-section",nb="confirm-sign-in-header-section",rb="confirm-sign-in-body-section",ob="confirm-sign-in-code-input",ib="confirm-sign-in-confirm-button",sb="forgot-password-section",ab="forgot-password-header-section",ub="forgot-password-body-section",cb="forgot-password-submit-button",lb="forgot-password-send-code-button",pb="forgot-password-resend-code-link",db="forgot-password-back-to-sign-in-link",hb="forgot-password-code-input",fb="forgot-password-new-password-input",mb='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+tb+'">\n    <div class="amplify-form-body" data-test="'+rb+'">\n    <div class="amplify-form-header" data-test="'+nb+'">{{ this.amplifyService.i18n().get(\'Confirm Sign in\') }}</div>\n      <div class="amplify-form-row" *ngIf="!shouldHide(\'SignIn\')">\n        <label class="amplify-input-label" for="code">\n          {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n        </label>\n        <input #code\n          (change)="setCode(code.value)"\n          (keyup)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          class="amplify-form-input"\n          type="text"\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n          data-test="'+ob+'"\n        />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a \n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+"confirm-sign-in-back-to-sign-in-link"+'"\n              >\n                {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button\n            class="amplify-form-button"\n            data-test="'+ib+'"\n            (click)="onConfirm()"\n            >\n              {{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n        </div>\n      </div>\n      </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',gb=(Object.defineProperty(yb.prototype,"data",{set:function(e){this.hide=e.hide?e.hide:this.hide,this._authState=e.authState,this._show="confirmSignIn"===e.authState.state},enumerable:!0,configurable:!0}),Object.defineProperty(yb.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignIn"===e.state},enumerable:!0,configurable:!0}),yb.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},yb.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},yb.prototype.setCode=function(e){this.code=e},yb.prototype.onConfirm=function(){var t=this,e=this._authState.user,n=e.challengeName,r="SOFTWARE_TOKEN_MFA"===n?n:null;this.amplifyService.auth().confirmSignIn(e,this.code,r).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){return t._setError(e)})},yb.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},yb.prototype.onAlertClose=function(){this._setError(null)},yb.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},yb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-in-core",template:mb}]}],yb.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},yb.propDecorators={data:[{type:h.Input}],authState:[{type:h.Input}],hide:[{type:h.Input}]},yb);function yb(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("ConfiSignInComponent")}var vb,bb,wb='\n<div class="amplify-form-container" *ngIf="_show" data-test="'+tb+'">\n  <div class="amplify-form-body" data-test="'+rb+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+nb+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Confirm your sign in code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+ob+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button expand="block" color="primary"\n          (click)="onConfirm()"\n          data-test="'+ib+'"\n        >{{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',_b=((vb=function(e,t){return(vb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}vb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Sb,bb=gb),Sb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-in-ionic",template:wb}]}],Sb.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},Sb);function Sb(e){var t=bb.call(this,e)||this;return t.amplifyService=e,t}var Cb=(Eb.prototype.ngOnInit=function(){this.loadComponent()},Eb.prototype.ngOnDestroy=function(){},Eb.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new _s(_b,{authState:this.authState,hide:this.hide}):new _s(gb,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},Eb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],Eb.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},Eb.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[bs]}]},Eb);function Eb(e){this.componentFactoryResolver=e,this.hide=[]}function Ib(e,t){return 0<e.filter(function(e){return e===t}).length}function Ab(e,t){return"+"+e+t.replace(/[-()]/g,"")}var Pb={email:"Email",phone_number:"Phone Number",username:"Username"},kb='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+Wv+'">\n  <div class="amplify-form-body" data-test="'+Yv+'">\n    <div\n      class="amplify-form-header"\n      data-test="'+$v+'"\n    >\n      {{ this.amplifyService.i18n().get(\'Confirm Sign up\') }}</div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="amplifyUsername">\n        {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n      </label>\n      <input\n        #amplifyUsername\n        class="amplify-form-input"\n        type="text"\n        disabled\n        placeholder="{{ this.amplifyService.i18n().get(getUsernameLabel()) }}"\n        [value]="username"\n        data-test="'+Jv+'"\n      />\n    </div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (change)="setCode(code.value)"\n        (keyup)="setCode(code.value)"\n        (keyup.enter)="onConfirm()"\n        class="amplify-form-input"\n        type="text"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n        data-test="'+Zv+'"\n      />\n      <span class="amplify-form-action">{{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a class="amplify-form-link"\n            (click)="onResend()"\n            data-test="'+Qv+'"\n          >{{ this.amplifyService.i18n().get(\'Resend Code\') }}</a></span>\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <div class="amplify-form-actions-left">\n          <a\n            class="amplify-form-link"\n            (click)="onSignIn()"\n            data-test="'+eb+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n          </a>\n        </div>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button\n          class="amplify-form-button"\n          (click)="onConfirm()"\n          data-test="'+Xv+'"\n          >{{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n',Ob=(Object.defineProperty(Tb.prototype,"data",{set:function(e){this.hide=e.hide?e.hide:this.hide,this._authState=e.authState,this._show="confirmSignUp"===e.authState.state,this.username=e.authState.user&&e.authState.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(Tb.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignUp"===e.state,this.username=e.user&&e.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(Tb.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Tb.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Tb.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Tb.prototype.setUsername=function(e){this.username=e},Tb.prototype.setCode=function(e){this.code=e},Tb.prototype.onConfirm=function(){var t=this;this.amplifyService.auth().confirmSignUp(this.username,this.code).then(function(){return t.logger.info("confirm success")}).catch(function(e){return t._setError(e)})},Tb.prototype.onResend=function(){var t=this;this.amplifyService.auth().resendSignUp(this.username).then(function(){return t.logger.info("code resent")}).catch(function(e){return t._setError(e)})},Tb.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},Tb.prototype.onAlertClose=function(){this._setError(null)},Tb.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},Tb.prototype.getUsernameLabel=function(){return Pb[this._usernameAttributes]||this._usernameAttributes},Tb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-up-core",template:kb}]}],Tb.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},Tb.propDecorators={data:[{type:h.Input}],hide:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},Tb);function Tb(e){this.amplifyService=e,this._usernameAttributes="username",this.hide=[],this.logger=this.amplifyService.logger("ConfirmSignUpComponent")}var xb,Nb,Ub='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+Wv+'"\n  >\n  <div class="amplify-form-body" data-test="'+Yv+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+$v+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Confirm your sign up code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n        </ion-label>\n        <ion-input type="text"\n          class="amplify-form-input"\n          (input)="setUsername($event.target.value)"\n          [value]="username"\n          data-test="'+Jv+'"\n        ></ion-input>\n      </ion-item>\n\n      <ion-item lines="none">\n        <ion-label  class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+Zv+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button\n          expand="block"\n          color="primary"\n          (click)="onConfirm()"\n          data-test="'+Xv+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+eb+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onResend()"\n          data-test="'+Qv+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',Rb=((xb=function(e,t){return(xb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}xb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Mb,Nb=Ob),Mb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-up-ionic",template:Ub}]}],Mb.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},Mb);function Mb(e){var t=Nb.call(this,e)||this;return t.amplifyService=e,t}var Db,Fb,Lb=(jb.prototype.ngOnInit=function(){this.loadComponent()},jb.prototype.ngOnDestroy=function(){},jb.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new _s(Rb,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}):new _s(Ob,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},jb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],jb.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},jb.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[bs]}]},jb);function jb(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}(Fb=Db=Db||{}).EMAIL="email",Fb.PHONE_NUMBER="phone_number",Fb.USERNAME="username";var Bb='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+wv+'">\n    <div class="amplify-form-body" data-test="'+Sv+'">\n      <div class="amplify-form-header" data-test="'+_v+'">\n        {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n      </div>\n      <amplify-auth-username-field-core\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-core>\n      <div class="amplify-form-row amplify-signin-password">\n        <label class="amplify-input-label" for="passwordField">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </label>\n        <input #passwordField\n          (keyup)="setPassword(passwordField.value)"\n          (keyup.enter)="onSignIn()"\n          class="amplify-form-input"\n          type="password"\n          required\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your password\') }}"\n          data-test="'+Cv+'"\n        />\n        <span class="amplify-form-action" *ngIf="!shouldHide(\'ForgotPassword\')">\n          {{ this.amplifyService.i18n().get(\'Forgot Password?\') }}\n          <a class="amplify-form-link"\n            (click)="onForgotPassword()"\n            data-test="'+Ev+'"\n          >{{ this.amplifyService.i18n().get(\'Reset password\') }}</a>\n        </span>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            (click)="onSignIn()"\n            data-test="'+Iv+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignUp\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'No account?\') }}\n            <a\n              class="amplify-form-link"\n              (click)="onSignUp()"\n              data-test="'+Av+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Create account\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div\n        class="amplify-alert-message"\n        data-test="'+Pv+'"\n        >\n          {{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Vb=(Object.defineProperty(qb.prototype,"data",{set:function(e){this.hide=e.hide?e.hide:this.hide,this._usernameAttributes=e.usernameAttributes,this._authState=e.authState,this._show=Ib(["signIn","signedOut","signedUp"],e.authState.state)},enumerable:!0,configurable:!0}),Object.defineProperty(qb.prototype,"authState",{set:function(e){this._authState=e,this._show=Ib(["signIn","signedOut","signedUp"],e.state),this.username=e.user&&e.user.username||"",this.email=e.user&&e.user.email||"",this.country_code=e.user&&e.user.country_code?e.user.country_code:this.country_code,this.local_phone_number=e.user&&e.user.local_phone_number||""},enumerable:!0,configurable:!0}),Object.defineProperty(qb.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),qb.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},qb.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},qb.prototype.setUsername=function(e){this.username=e},qb.prototype.setPassword=function(e){this.password=e},qb.prototype.onSignIn=function(){var t=this;this.amplifyService.auth().signIn(this.getSignInUsername(),this.password).then(function(e){"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?t.amplifyService.setAuthState({state:"confirmSignIn",user:e}):"NEW_PASSWORD_REQUIRED"===e.challengeName?t.amplifyService.setAuthState({state:"requireNewPassword",user:e}):"CUSTOM_CHALLENGE"===e.challengeName&&e.challengeParam&&"true"===e.challengeParam.trigger&&t.amplifyService.setAuthState({state:"customConfirmSignIn",user:e})}).catch(function(e){t._setError(e)})},qb.prototype.onAlertClose=function(){this._setError(null)},qb.prototype.getUserObj=function(){return this.username||this.email||this.local_phone_number?{username:this.username,email:this.email,local_phone_number:this.local_phone_number,courtry_code:this.country_code}:null},qb.prototype.onForgotPassword=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"forgotPassword",user:e})},qb.prototype.onSignUp=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"signUp",user:e})},qb.prototype._setError=function(e){e?(this.errorMessage=e.message||e,this.logger.error(this.errorMessage)):this.errorMessage=null},qb.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},qb.prototype.getSignInUsername=function(){switch(this._usernameAttributes){case Db.EMAIL:return this.email;case Db.PHONE_NUMBER:return Ab(this.country_code,this.local_phone_number);default:return this.username}},qb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-in-core",template:Bb}]}],qb.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},qb.propDecorators={data:[{type:h.Input}],hide:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},qb);function qb(e){this.amplifyService=e,this._usernameAttributes="username",this.local_phone_number="",this.country_code="1",this.email="",this.signInUsername="",this.hide=[],this.logger=this.amplifyService.logger("SignInComponent"),this.onUsernameFieldChanged=this.onUsernameFieldChanged.bind(this)}var zb,Hb,Kb='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+wv+'"\n  >\n  <div class="amplify-form-body" data-test="'+Sv+'">\n    <div class="amplify-form-header" data-test="'+_v+'">\n      {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n    </div>\n    <ion-list lines="none">\n      <amplify-auth-username-field-ionic\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-ionic>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label" for="password" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSignIn()"\n          data-test="'+Cv+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignIn()"\n          data-test="'+Iv+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</ion-button>\n      </div>\n\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'No account?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onSignUp()"\n            data-test="'+Av+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Create account\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'ForgotPassword\')">\n          <a class="amplify-form-link" (click)="onForgotPassword()" data-test="'+Ev+'">\n            {{ this.amplifyService.i18n().get(\'Reset Password\') }}\n          </a>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Gb=((zb=function(e,t){return(zb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}zb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Wb,Hb=Vb),Wb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-in-ionic",template:Kb}]}],Wb.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},Wb);function Wb(e){var t=Hb.call(this,e)||this;return t.amplifyService=e,t}var $b=(Yb.prototype.ngOnInit=function(){this.loadComponent()},Yb.prototype.ngOnDestroy=function(){},Yb.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework?new _s(Gb,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new _s(Vb,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},Yb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],Yb.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},Yb.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[bs]}]},Yb);function Yb(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var Jb=[{label:"Username",key:"username",required:!1,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:4}],Zb=[{label:"Email",key:"email",required:!0,type:"email",displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:3}],Qb=[{label:"Phone Number",key:"phone_number",required:!0,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3}],Xb='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+kv+'">\n    <div class="amplify-form-body" data-test="'+Tv+'">\n      <div\n        class="amplify-form-header"\n        data-test="'+Ov+'"\n        >{{ this.amplifyService.i18n().get(this.header) }}</div>\n      <div class="amplify-form-row" *ngFor="let field of signUpFields">\n        <div *ngIf="field.key !== \'phone_number\'">\n          <label class="amplify-input-label">\n            {{ this.amplifyService.i18n().get(field.label) }}\n            <span *ngIf="field.required">*</span>\n          </label>\n          <input #{{field.key}}\n            class="amplify-form-input"\n            [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n            type={{field.type}}\n            [placeholder]="this.amplifyService.i18n().get(field.label)"\n            [(ngModel)]="user[field.key]"\n            name="field.key"\n            data-test="'+xv+'"\n            />\n            <div *ngIf="field.key === \'password\'" class="amplify-form-extra-details">\n              {{passwordPolicy}}\n            </div>\n        </div>\n        <div *ngIf="field.key === \'phone_number\'">\n          <amplify-auth-phone-field-core\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-core>\n        </div>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignIn\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n            <a class="amplify-form-link" (click)="onSignIn()" data-test="'+Uv+'">\n              {{ this.amplifyService.i18n().get(\'Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n          (click)="onSignUp()"\n          data-test="'+Nv+'"\n          >{{ this.amplifyService.i18n().get(\'Create Account\') }}</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',ew=(Object.defineProperty(tw.prototype,"data",{set:function(e){this._authState=e.authState,this._show="signUp"===e.authState.state,this._usernameAttributes=e.usernameAttributes,e.signUpConfig&&(this._signUpConfig=e.signUpConfig,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._usernameAttributes===Db.EMAIL?(this.signUpFields=Zb,this.defaultSignUpFields=Zb):this._usernameAttributes===Db.PHONE_NUMBER&&(this.signUpFields=Qb,this.defaultSignUpFields=Qb),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),Object.defineProperty(tw.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e,this._usernameAttributes===Db.EMAIL?(this.signUpFields=Zb,this.defaultSignUpFields=Zb):this._usernameAttributes===Db.PHONE_NUMBER&&(this.signUpFields=Qb,this.defaultSignUpFields=Qb)},enumerable:!0,configurable:!0}),Object.defineProperty(tw.prototype,"authState",{set:function(e){this._authState=e,this._show="signUp"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(tw.prototype,"signUpConfig",{set:function(e){e&&(this._signUpConfig=e,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),tw.prototype.ngOnInit=function(){this.amplifyService.auth()||this.logger.warn("Auth module not registered on AmplifyService provider"),this.sortFields()},tw.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},tw.prototype.onSignUp=function(){var r=this,e=this.validate();if(e&&0<e.length)return this._setError("The following fields need to be filled out: "+e.join(", "));this.user.attributes={},this.signUpFields.find(function(e){return"phone_number"===e.key})&&(this.user.phone_number=Ab(this.country_code,this.local_phone_number));var t=Object.keys(this.user),o=t.map(function(e){return r.user[e]});t.forEach(function(e,t){var n;"username"!==e&&"password"!==e&&"attributes"!==e&&(n=(r.needPrefix(e)?"custom:":"")+e,r.user.attributes[n]=o[t])});var n=!1;if(this.signUpFields.forEach(function(e){e.label===r.getUsernameLabel()&&(r.amplifyService.logger("Changing the username to the value of "+e.label,"DEBUG"),r.user.username=r.user.attributes[e.key]||r.user.username,n=!0)}),!n&&!this.user.username)throw new Error("Couldn't find the label: "+this.getUsernameLabel()+", in sign up fields according to usernameAttributes!");this.amplifyService.auth().signUp(this.user).then(function(e){var t=r.user.username;r.user={},r.onAlertClose(),r.amplifyService.setAuthState({state:"confirmSignUp",user:{username:t}})}).catch(function(e){return r._setError(e)})},tw.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},tw.prototype.needPrefix=function(t){var e=this.signUpFields.find(function(e){return e.key===t});return 0!==t.indexOf("custom:")?e.custom:(0===t.indexOf("custom:")&&!1===e.custom&&this.logger.warn("Custom prefix prepended to key but custom field flag is set to false"),null)},tw.prototype.onConfirmSignUp=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"confirmSignUp",user:{username:this.user.username}})},tw.prototype.sortFields=function(){var n=this;0<this.hiddenFields.length&&(this.defaultSignUpFields=this.defaultSignUpFields.filter(function(e){return!n.hiddenFields.includes(e.key)})),this._signUpConfig&&this._signUpConfig.signUpFields&&0<this._signUpConfig.signUpFields.length&&(this._signUpConfig.hideAllDefaults||this.defaultSignUpFields.forEach(function(t,e){-1===n.signUpFields.findIndex(function(e){return e.key===t.key})&&n.signUpFields.push(t)}),this.signUpFields.sort(function(e,t){return e.displayOrder&&t.displayOrder?e.displayOrder<t.displayOrder||!(e.displayOrder>t.displayOrder)&&e.key<t.key?-1:1:!e.displayOrder&&t.displayOrder?1:e.displayOrder&&!t.displayOrder?-1:e.displayOrder||t.displayOrder?void 0:e.key<t.key?-1:1}),this.signUpFields=this.removeHiddenFields())},tw.prototype.onAlertClose=function(){this._setError(null)},tw.prototype.removeHiddenFields=function(){return this.signUpFields.filter(function(e){return!e.displayOrder||-1!==e.displayOrder})},tw.prototype.validate=function(){var t=this,n=[];return this.signUpFields.map(function(e){"phone_number"!==e.key?e.required&&!t.user[e.key]?(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label))):e.invalid=!1:!e.required||t.country_code&&t.local_phone_number?e.invalid=!1:(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label)))}),n},tw.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},tw.prototype.getUsernameLabel=function(){return Pb[this._usernameAttributes]||this._usernameAttributes},tw.prototype.onPhoneFieldChanged=function(e){this.country_code=e.country_code,this.local_phone_number=e.local_phone_number},tw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-up-core",template:Xb}]}],tw.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},tw.propDecorators={data:[{type:h.Input}],hide:[{type:h.Input}],usernameAttributes:[{type:h.Input}],authState:[{type:h.Input}],signUpConfig:[{type:h.Input}]},tw);function tw(e){this.amplifyService=e,this._usernameAttributes="username",this.user={},this.country_code="1",this.header="Create a new account",this.defaultSignUpFields=Jb,this.signUpFields=this.defaultSignUpFields,this.hiddenFields=[],this.hide=[],this.logger=this.amplifyService.logger("SignUpComponent")}var nw,rw,ow='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+kv+'"\n  >\n  <div class="amplify-form-body" data-test="'+Tv+'">\n    <div class="amplify-form-header" data-test="'+Ov+'">\n      {{ this.amplifyService.i18n().get(this.header) }}</div>\n    <ion-list lines="none">\n      <ion-item lines="none" *ngFor="let field of signUpFields">\n        <ion-label class="amplify-input-label"\n        position="stacked"\n        *ngIf="field.key !== \'phone_number\'"\n        >\n          {{ this.amplifyService.i18n().get(field.label) }}\n          <span *ngIf="field.required">*</span>\n        </ion-label>\n        <ion-input\n          [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n          *ngIf="field.key !== \'phone_number\'"\n          #{{field.key}}\n          type="text"\n          class="amplify-form-input"\n          type={{field.type}}\n          [placeholder]="this.amplifyService.i18n().get(field.label)"\n          (keyup)="setProp($event.target)"\n          name={{field.key}}\n          data-test="'+xv+'"\n        ></ion-input>\n        <ion-content *ngIf="field.key === \'phone_number\'" class="amplify-phone-ion-content">\n          <amplify-auth-phone-field-ionic\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-ionic>\n        </ion-content>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignUp()"\n          data-test="'+Nv+'"\n        >{{ this.amplifyService.i18n().get(\'Create Account\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup">\n          {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n          <a class="amplify-form-link" (click)="onSignIn()" data-test="'+Rv+'">\n            {{ this.amplifyService.i18n().get(\'Sign In\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'Have a code?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onConfirmSignUp()"\n            data-test="'+Mv+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Confirm\') }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',iw=((nw=function(e,t){return(nw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}nw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(sw,rw=ew),sw.prototype.setProp=function(e){return this.user[e.name]=e.value},sw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-up-ionic",template:ow}]}],sw.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},sw);function sw(e){var t=rw.call(this,e)||this;return t.amplifyService=e,t}var aw=(uw.prototype.ngOnInit=function(){this.loadComponent()},uw.prototype.ngOnDestroy=function(){},uw.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new _s(iw,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}):new _s(ew,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},uw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],uw.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},uw.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],signUpConfig:[{type:h.Input}],usernameAttributes:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[bs]}]},uw);function uw(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var cw='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+Dv+'">\n  <div class="amplify-form-body" data-test="'+Lv+'">\n  <div class="amplify-form-header" data-test="'+Fv+'">\n    {{ this.amplifyService.i18n().get(\'You are required to update your password\') }}\n  </div>\n  <div class="amplify-form-row">\n    <label class="amplify-input-label" for="password">\n      {{ this.amplifyService.i18n().get(\'Password *\') }}\n    </label>\n    <input #password\n      (keyup)="setPassword(password.value)"\n      (keyup.enter)="onSubmit()"\n      class="amplify-form-input"\n      type="password"\n      placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n      data-test="'+jv+'"\n    />\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <a class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+Bv+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</a>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button class="amplify-form-button"\n          (click)="onSubmit()"\n          data-test="'+Vv+'"\n        >{{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n<div class="amplify-alert-body">\n  <span class="amplify-alert-icon">&#9888;</span>\n  <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n  <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n</div>\n</div>\n</div>\n',lw=(Object.defineProperty(pw.prototype,"authState",{set:function(e){this._authState=e,this._show="requireNewPassword"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(pw.prototype,"data",{set:function(e){this._authState=e.authState,this._show="requireNewPassword"===e.authState.state,this.hide=e.hide?e.hide:this.hide},enumerable:!0,configurable:!0}),pw.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},pw.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},pw.prototype.setPassword=function(e){this.password=e},pw.prototype.onSubmit=function(){var t=this,e=this._authState.user,n=e.challengeParam.requiredAttributes;this.amplifyService.auth().completeNewPassword(e,this.password,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},pw.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},pw.prototype.onAlertClose=function(){this._setError(null)},pw.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},pw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-require-new-password-core",template:cw}]}],pw.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},pw.propDecorators={authState:[{type:h.Input}],hide:[{type:h.Input}],data:[{type:h.Input}]},pw);function pw(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("RequireNewPasswordComponent")}var dw,hw,fw='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+Dv+'"\n  >\n  <div class="amplify-form-body" data-test="'+Lv+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+Fv+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSubmit()"\n          data-test="'+jv+'"\n        ></ion-input>\n      </ion-item>\n\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSignIn()"\n          data-test="'+Bv+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSubmit()"\n          data-test="'+Vv+'"\n        >Submit</ion-button>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ errorMessage }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',mw=((dw=function(e,t){return(dw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}dw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(gw,hw=lw),gw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-require-new-password-ionic",template:fw}]}],gw.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},gw);function gw(e){var t=hw.call(this,e)||this;return t.amplifyService=e,t}var yw=(vw.prototype.ngOnInit=function(){this.loadComponent()},vw.prototype.ngOnDestroy=function(){},vw.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new _s(mw,{authState:this.authState,hide:this.hide}):new _s(lw,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},vw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-require-new-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],vw.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},vw.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[bs]}]},vw);function vw(e){this.componentFactoryResolver=e,this.hide=[]}var bw='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <a class="amplify-form-link amplify-greeting-sign-out"\n      (click)="onSignOut()"\n      data-test="'+Gv+"\"\n    >{{ this.amplifyService.i18n().get('Sign Out') }}</a>\n</div>\n",ww=(Object.defineProperty(_w.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),_w.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},_w.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){return t.setAuthState(e)})},_w.prototype.setAuthState=function(e){this.authState=e,this.signedIn="signedIn"===e.state;var t="";e.user&&(t=this._usernameAttributes===Db.EMAIL?e.user.attributes?e.user.attributes.email:e.user.username:this._usernameAttributes===Db.PHONE_NUMBER&&e.user.attributes?e.user.attributes.phone_number:e.user.username),this.greeting=this.signedIn?this.amplifyService.i18n().get("Hello, {{username}}").replace("{{username}}",t):""},_w.prototype.onSignOut=function(){this.amplifyService.auth().signOut()},_w.decorators=[{type:h.Component,args:[{selector:"amplify-auth-greetings-core",template:bw}]}],_w.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},_w.propDecorators={authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},_w);function _w(e){this.amplifyService=e,this._usernameAttributes="username",this.logger=this.amplifyService.logger("GreetingComponent"),this.subscribe()}var Sw,Cw,Ew='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <ion-button\n        class="amplify-greeting-sign-out"\n        size="small"\n        *ngIf="signedIn"\n        (click)="onSignOut()"\n        data-test="'+Gv+"\"\n      >{{ this.amplifyService.i18n().get('Sign Out') }}</ion-button>\n</div>\n",Iw=((Sw=function(e,t){return(Sw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Sw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Aw,Cw=ww),Aw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-greetings-ionic",template:Ew}]}],Aw.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},Aw);function Aw(e){var t=Cw.call(this,e)||this;return t.amplifyService=e,t}var Pw=(kw.prototype.ngOnInit=function(){this.loadComponent()},kw.prototype.ngOnDestroy=function(){},kw.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new _s(Iw,{authState:this.authState,usernameAttributes:this.usernameAttributes}):new _s(ww,{authState:this.authState,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},kw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-greetings",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],kw.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},kw.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[bs]}]},kw);function kw(e){this.componentFactoryResolver=e,this.usernameAttributes="username"}var Ow='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+sb+'">\n    <div class="amplify-form-body" data-test="'+ub+'">\n    <div class="amplify-form-header" data-test="'+ab+'">\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="!code_sent">\n      {{ this.amplifyService.i18n().get(\'You will receive a verification code\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="code_sent">\n      {{ this.amplifyService.i18n().get(\'Enter the code you received and set a new password\') }}\n    </div>\n    <amplify-auth-username-field-core\n      *ngIf="!code_sent"\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-core>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (keyup)="setCode(code.value)"\n        class="amplify-form-input"\n        type="text"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter code\') }}"\n        data-test="'+hb+'"\n      />\n      </div>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="password">\n        {{ this.amplifyService.i18n().get(\'New Password *\') }}\n      </label>\n      <input #password\n        (keyup)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        class="amplify-form-input"\n        type="password"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n        data-test="'+fb+'"\n      />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            *ngIf="!code_sent"\n            (click)="onSend()"\n            data-test="'+lb+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n          <button class="amplify-form-button"\n            *ngIf="code_sent"\n            (click)="onSubmit()"\n            data-test="'+cb+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Verify\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a\n              *ngIf="code_sent"\n              class="amplify-form-link"\n              (click)="onSend()"\n              data-test="'+pb+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Resend Code\') }}\n            </a>\n            <a\n              *ngIf="!code_sent"\n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+db+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Tw=(Object.defineProperty(xw.prototype,"data",{set:function(e){this._authState=e.authState,this._show="forgotPassword"===e.authState.state,this._usernameAttributes=e.usernameAttributes,this.hide=e.hide?e.hide:this.hide,this.username=e.authState.user&&e.authState.user.username?e.authState.user.username:""},enumerable:!0,configurable:!0}),xw.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Object.defineProperty(xw.prototype,"authState",{set:function(e){this._authState=e,this._show="forgotPassword"===e.state,this.email=e.user&&e.user.email?e.user.email:"",this.country_code=e.user&&e.user.contry_code?e.user.country_code:"1",this.local_phone_number=e.user&&e.user.local_phone_number?e.user.local_phone_number:"",this.username=e.user&&e.user.username?e.user.username:""},enumerable:!0,configurable:!0}),xw.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Object.defineProperty(xw.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),xw.prototype.setCode=function(e){this.code=e},xw.prototype.setPassword=function(e){this.password=e},xw.prototype.getforgotPwUsername=function(){switch(this._usernameAttributes){case Db.EMAIL:return this.email;case Db.PHONE_NUMBER:return Ab(this.country_code,this.local_phone_number);default:return this.username}},xw.prototype.onSend=function(){var t=this,e=this.getforgotPwUsername();e?this.amplifyService.auth().forgotPassword(e).then(function(){t.code_sent=!0}).catch(function(e){t._setError(e),t.code_sent=!1}):this.errorMessage="Username cannot be empty"},xw.prototype.onSubmit=function(){var t=this;this.amplifyService.auth().forgotPasswordSubmit(this.getforgotPwUsername(),this.code,this.password).then(function(){var e={username:t.username};t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},xw.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},xw.prototype.onAlertClose=function(){this._setError(null)},xw.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},xw.prototype.getUsernameLabel=function(){return Pb[this._usernameAttributes]||this._usernameAttributes},xw.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},xw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-forgot-password-core",template:Ow}]}],xw.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},xw.propDecorators={data:[{type:h.Input}],hide:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},xw);function xw(e){this.amplifyService=e,this._usernameAttributes="username",this.code_sent=!1,this.country_code="1",this.hide=[],this.logger=this.amplifyService.logger("ForgotPasswordComponent")}var Nw,Uw,Rw='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+sb+'"\n  >\n  <div class="amplify-form-body" data-test="'+ub+'">\n  <div\n    class="amplify-form-header amplify-form-header-ionic"\n    data-test="'+ab+'"\n    >\n    {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n  </div>\n  <div class="amplify-form-text" *ngIf="!code_sent">\n    {{ this.amplifyService.i18n().get(\'You will receive a verification code to reset your password\') }}\n  </div>\n\n  <ion-list>\n    <amplify-auth-username-field-ionic\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-ionic>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Code *\') }}\n      </ion-label>\n      <ion-input\n        #code\n        type="text"\n        class="amplify-form-input"\n        (input)="setCode(code.value)"\n        data-test="'+hb+'"\n      ></ion-input>\n    </ion-item>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Password *\') }}\n      </ion-label>\n      <ion-input\n        #password\n        type="password"\n        class="amplify-form-input"\n        (input)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        data-test="'+fb+'"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n  <div class="amplify-form-actions">\n    <div>\n      <ion-button expand="block" color="primary"\n        (click)="onSend()"\n        *ngIf="!code_sent"\n        data-test="'+cb+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Submit\') }}</ion-button>\n      <ion-button expand="block" color="primary"\n      *ngIf="code_sent"\n      (click)="onSubmit()"\n      >{{ this.amplifyService.i18n().get(\'Verify\') }}</ion-button>\n    </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a class="amplify-form-link" (click)="onSignIn()">\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSend()"\n          data-test="'+pb+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',Mw=((Nw=function(e,t){return(Nw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Nw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Dw,Uw=Tw),Dw.prototype.onCodeChange=function(e){this.country_code=e},Dw.prototype.onNumberChange=function(e){this.local_phone_number=e},Dw.prototype.setUsername=function(e){this.username=e},Dw.prototype.setEmail=function(e){this.email=e},Dw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-forgot-password-ionic",template:Rw}]}],Dw.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},Dw);function Dw(e){var t=Uw.call(this,e)||this;return t.amplifyService=e,t}var Fw=(Lw.prototype.ngOnInit=function(){this.loadComponent()},Lw.prototype.ngOnDestroy=function(){},Lw.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new _s(Mw,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new _s(Tw,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},Lw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-forgot-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],Lw.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},Lw.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[bs]}]},Lw);function Lw(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var jw=function(){return(jw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Bw='\n<div class="amplify-amplify-form-row amplify-signin-username">\n    <div *ngIf="this._usernameAttributes === \'email\'">\n        <label class="amplify-input-label" for="emailField"> {{ this.amplifyService.i18n().get(\'Email\') }} *</label>\n        <input\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setEmail($event.target.value)"\n            data-test="'+zv+'"\n        />\n    </div>\n    <div *ngIf="this._usernameAttributes === \'phone_number\'">\n        <amplify-auth-phone-field-core\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-core>\n    </div>\n    <div *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <label class="amplify-input-label" for="usernameField"> {{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</label>\n        <input\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            value="{{this.username}}"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setUsername($event.target.value)"\n            data-test="'+qv+'"\n        />\n    </div>\n</div>\n',Vw=(Object.defineProperty(qw.prototype,"data",{set:function(e){this._usernameAttributes=e.usernameAttributes,this._placeholder=e.placeholder},enumerable:!0,configurable:!0}),Object.defineProperty(qw.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Object.defineProperty(qw.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),qw.prototype.ngOnInit=function(){var e,t;window&&window.location&&window.location.search&&"email"!==this._usernameAttributes&&"phone_number"!==this._usernameAttributes&&(t=(e=new URLSearchParams(window.location.search))?e.get("username"):void 0,this.setUsername(t),this.username=t)},qw.prototype.ngOnDestroy=function(){},qw.prototype.setUsername=function(e){this.usernameFieldChanged.emit({username:e})},qw.prototype.setEmail=function(e){this.usernameFieldChanged.emit({email:e})},qw.prototype.getUsernameLabel=function(){return Pb[this._usernameAttributes]||this._usernameAttributes},qw.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get(""+this.getUsernameLabel()||this._placeholder)},qw.prototype.onPhoneFieldChanged=function(e){this.usernameFieldChanged.emit(jw({},e))},qw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-username-field-core",template:Bw}]}],qw.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},qw.propDecorators={data:[{type:h.Input}],usernameAttributes:[{type:h.Input}],placeholder:[{type:h.Input}],usernameFieldChanged:[{type:h.Output}]},qw);function qw(e){this.amplifyService=e,this._usernameAttributes=Db.USERNAME,this._placeholder="",this.usernameFieldChanged=new h.EventEmitter,this.onPhoneFieldChanged=this.onPhoneFieldChanged.bind(this)}var zw=[{countryCode:"US",value:"1",label:"USA (+1)"},{countryCode:"GB",value:"44",label:"UK (+44)"},{countryCode:"DZ",value:"213",label:"Algeria (+213)"},{countryCode:"AD",value:"376",label:"Andorra (+376)"},{countryCode:"AO",value:"244",label:"Angola (+244)"},{countryCode:"AI",value:"1264",label:"Anguilla (+1264)"},{countryCode:"AG",value:"1268",label:"Antigua & Barbuda (+1268)"},{countryCode:"AR",value:"54",label:"Argentina (+54)"},{countryCode:"AM",value:"374",label:"Armenia (+374)"},{countryCode:"AW",value:"297",label:"Aruba (+297)"},{countryCode:"AU",value:"61",label:"Australia (+61)"},{countryCode:"AT",value:"43",label:"Austria (+43)"},{countryCode:"AZ",value:"994",label:"Azerbaijan (+994)"},{countryCode:"BS",value:"1242",label:"Bahamas (+1242)"},{countryCode:"BH",value:"973",label:"Bahrain (+973)"},{countryCode:"BD",value:"880",label:"Bangladesh (+880)"},{countryCode:"BB",value:"1246",label:"Barbados (+1246)"},{countryCode:"BY",value:"375",label:"Belarus (+375)"},{countryCode:"BE",value:"32",label:"Belgium (+32)"},{countryCode:"BZ",value:"501",label:"Belize (+501)"},{countryCode:"BJ",value:"229",label:"Benin (+229)"},{countryCode:"BM",value:"1441",label:"Bermuda (+1441)"},{countryCode:"BT",value:"975",label:"Bhutan (+975)"},{countryCode:"BO",value:"591",label:"Bolivia (+591)"},{countryCode:"BA",value:"387",label:"Bosnia Herzegovina (+387)"},{countryCode:"BW",value:"267",label:"Botswana (+267)"},{countryCode:"BR",value:"55",label:"Brazil (+55)"},{countryCode:"BN",value:"673",label:"Brunei (+673)"},{countryCode:"BG",value:"359",label:"Bulgaria (+359)"},{countryCode:"BF",value:"226",label:"Burkina Faso (+226)"},{countryCode:"BI",value:"257",label:"Burundi (+257)"},{countryCode:"KH",value:"855",label:"Cambodia (+855)"},{countryCode:"CM",value:"237",label:"Cameroon (+237)"},{countryCode:"CA",value:"1",label:"Canada (+1)"},{countryCode:"CV",value:"238",label:"Cape Verde Islands (+238)"},{countryCode:"KY",value:"1345",label:"Cayman Islands (+1345)"},{countryCode:"CF",value:"236",label:"Central African Republic (+236)"},{countryCode:"CL",value:"56",label:"Chile (+56)"},{countryCode:"CN",value:"86",label:"China (+86)"},{countryCode:"CO",value:"57",label:"Colombia (+57)"},{countryCode:"KM",value:"269",label:"Comoros (+269)"},{countryCode:"CG",value:"242",label:"Congo (+242)"},{countryCode:"CK",value:"682",label:"Cook Islands (+682)"},{countryCode:"CR",value:"506",label:"Costa Rica (+506)"},{countryCode:"HR",value:"385",label:"Croatia (+385)"},{countryCode:"CU",value:"53",label:"Cuba (+53)"},{countryCode:"CW",value:"599",label:"Curacao (+599)"},{countryCode:"CY",value:"90392",label:"Cyprus North (+90392)"},{countryCode:"CY",value:"357",label:"Cyprus South (+357)"},{countryCode:"CZ",value:"420",label:"Czech Republic (+420)"},{countryCode:"DK",value:"45",label:"Denmark (+45)"},{countryCode:"DJ",value:"253",label:"Djibouti (+253)"},{countryCode:"DM",value:"1809",label:"Dominica (+1809)"},{countryCode:"DO",value:"1809",label:"Dominican Republic (+1809)"},{countryCode:"EC",value:"593",label:"Ecuador (+593)"},{countryCode:"EG",value:"20",label:"Egypt (+20)"},{countryCode:"SV",value:"503",label:"El Salvador (+503)"},{countryCode:"GQ",value:"240",label:"Equatorial Guinea (+240)"},{countryCode:"ER",value:"291",label:"Eritrea (+291)"},{countryCode:"EE",value:"372",label:"Estonia (+372)"},{countryCode:"ET",value:"251",label:"Ethiopia (+251)"},{countryCode:"FK",value:"500",label:"Falkland Islands (+500)"},{countryCode:"FO",value:"298",label:"Faroe Islands (+298)"},{countryCode:"FJ",value:"679",label:"Fiji (+679)"},{countryCode:"FI",value:"358",label:"Finland (+358)"},{countryCode:"FR",value:"33",label:"France (+33)"},{countryCode:"GF",value:"594",label:"French Guiana (+594)"},{countryCode:"PF",value:"689",label:"French Polynesia (+689)"},{countryCode:"GA",value:"241",label:"Gabon (+241)"},{countryCode:"GM",value:"220",label:"Gambia (+220)"},{countryCode:"GE",value:"7880",label:"Georgia (+7880)"},{countryCode:"DE",value:"49",label:"Germany (+49)"},{countryCode:"GH",value:"233",label:"Ghana (+233)"},{countryCode:"GI",value:"350",label:"Gibraltar (+350)"},{countryCode:"GR",value:"30",label:"Greece (+30)"},{countryCode:"GL",value:"299",label:"Greenland (+299)"},{countryCode:"GD",value:"1473",label:"Grenada (+1473)"},{countryCode:"GP",value:"590",label:"Guadeloupe (+590)"},{countryCode:"GU",value:"671",label:"Guam (+671)"},{countryCode:"GT",value:"502",label:"Guatemala (+502)"},{countryCode:"GN",value:"224",label:"Guinea (+224)"},{countryCode:"GW",value:"245",label:"Guinea - Bissau (+245)"},{countryCode:"GY",value:"592",label:"Guyana (+592)"},{countryCode:"HT",value:"509",label:"Haiti (+509)"},{countryCode:"HN",value:"504",label:"Honduras (+504)"},{countryCode:"HK",value:"852",label:"Hong Kong (+852)"},{countryCode:"HU",value:"36",label:"Hungary (+36)"},{countryCode:"IS",value:"354",label:"Iceland (+354)"},{countryCode:"IN",value:"91",label:"India (+91)"},{countryCode:"ID",value:"62",label:"Indonesia (+62)"},{countryCode:"IR",value:"98",label:"Iran (+98)"},{countryCode:"IQ",value:"964",label:"Iraq (+964)"},{countryCode:"IE",value:"353",label:"Ireland (+353)"},{countryCode:"IL",value:"972",label:"Israel (+972)"},{countryCode:"IT",value:"39",label:"Italy (+39)"},{countryCode:"JM",value:"1876",label:"Jamaica (+1876)"},{countryCode:"JP",value:"81",label:"Japan (+81)"},{countryCode:"JO",value:"962",label:"Jordan (+962)"},{countryCode:"KZ",value:"7",label:"Kazakhstan (+7)"},{countryCode:"KE",value:"254",label:"Kenya (+254)"},{countryCode:"KI",value:"686",label:"Kiribati (+686)"},{countryCode:"KP",value:"850",label:"Korea North (+850)"},{countryCode:"KR",value:"82",label:"Korea South (+82)"},{countryCode:"KW",value:"965",label:"Kuwait (+965)"},{countryCode:"KG",value:"996",label:"Kyrgyzstan (+996)"},{countryCode:"LA",value:"856",label:"Laos (+856)"},{countryCode:"LV",value:"371",label:"Latvia (+371)"},{countryCode:"LB",value:"961",label:"Lebanon (+961)"},{countryCode:"LS",value:"266",label:"Lesotho (+266)"},{countryCode:"LR",value:"231",label:"Liberia (+231)"},{countryCode:"LY",value:"218",label:"Libya (+218)"},{countryCode:"LI",value:"417",label:"Liechtenstein (+417)"},{countryCode:"LT",value:"370",label:"Lithuania (+370)"},{countryCode:"LU",value:"352",label:"Luxembourg (+352)"},{countryCode:"MO",value:"853",label:"Macao (+853)"},{countryCode:"MK",value:"389",label:"Macedonia (+389)"},{countryCode:"MG",value:"261",label:"Madagascar (+261)"},{countryCode:"MW",value:"265",label:"Malawi (+265)"},{countryCode:"MY",value:"60",label:"Malaysia (+60)"},{countryCode:"MV",value:"960",label:"Maldives (+960)"},{countryCode:"ML",value:"223",label:"Mali (+223)"},{countryCode:"MT",value:"356",label:"Malta (+356)"},{countryCode:"MH",value:"692",label:"Marshall Islands (+692)"},{countryCode:"MQ",value:"596",label:"Martinique (+596)"},{countryCode:"MR",value:"222",label:"Mauritania (+222)"},{countryCode:"YT",value:"269",label:"Mayotte (+269)"},{countryCode:"MX",value:"52",label:"Mexico (+52)"},{countryCode:"FM",value:"691",label:"Micronesia (+691)"},{countryCode:"MD",value:"373",label:"Moldova (+373)"},{countryCode:"MC",value:"377",label:"Monaco (+377)"},{countryCode:"MN",value:"976",label:"Mongolia (+976)"},{countryCode:"MS",value:"1664",label:"Montserrat (+1664)"},{countryCode:"MA",value:"212",label:"Morocco (+212)"},{countryCode:"MZ",value:"258",label:"Mozambique (+258)"},{countryCode:"MN",value:"95",label:"Myanmar (+95)"},{countryCode:"NA",value:"264",label:"Namibia (+264)"},{countryCode:"NR",value:"674",label:"Nauru (+674)"},{countryCode:"NP",value:"977",label:"Nepal (+977)"},{countryCode:"NL",value:"31",label:"Netherlands (+31)"},{countryCode:"NC",value:"687",label:"New Caledonia (+687)"},{countryCode:"NZ",value:"64",label:"New Zealand (+64)"},{countryCode:"NI",value:"505",label:"Nicaragua (+505)"},{countryCode:"NE",value:"227",label:"Niger (+227)"},{countryCode:"NG",value:"234",label:"Nigeria (+234)"},{countryCode:"NU",value:"683",label:"Niue (+683)"},{countryCode:"NF",value:"672",label:"Norfolk Islands (+672)"},{countryCode:"NP",value:"670",label:"Northern Marianas (+670)"},{countryCode:"NO",value:"47",label:"Norway (+47)"},{countryCode:"OM",value:"968",label:"Oman (+968)"},{countryCode:"PW",value:"680",label:"Palau (+680)"},{countryCode:"PA",value:"507",label:"Panama (+507)"},{countryCode:"PG",value:"675",label:"Papua New Guinea (+675)"},{countryCode:"PY",value:"595",label:"Paraguay (+595)"},{countryCode:"PE",value:"51",label:"Peru (+51)"},{countryCode:"PH",value:"63",label:"Philippines (+63)"},{countryCode:"PL",value:"48",label:"Poland (+48)"},{countryCode:"PT",value:"351",label:"Portugal (+351)"},{countryCode:"PR",value:"1787",label:"Puerto Rico (+1787)"},{countryCode:"QA",value:"974",label:"Qatar (+974)"},{countryCode:"RE",value:"262",label:"Reunion (+262)"},{countryCode:"RO",value:"40",label:"Romania (+40)"},{countryCode:"RU",value:"7",label:"Russia (+7)"},{countryCode:"RW",value:"250",label:"Rwanda (+250)"},{countryCode:"SM",value:"378",label:"San Marino (+378)"},{countryCode:"ST",value:"239",label:"Sao Tome & Principe (+239)"},{countryCode:"SA",value:"966",label:"Saudi Arabia (+966)"},{countryCode:"SN",value:"221",label:"Senegal (+221)"},{countryCode:"CS",value:"381",label:"Serbia (+381)"},{countryCode:"SC",value:"248",label:"Seychelles (+248)"},{countryCode:"SL",value:"232",label:"Sierra Leone (+232)"},{countryCode:"SX",value:"1",label:"Sint Maarten (+1)"},{countryCode:"SG",value:"65",label:"Singapore (+65)"},{countryCode:"SK",value:"421",label:"Slovak Republic (+421)"},{countryCode:"SI",value:"386",label:"Slovenia (+386)"},{countryCode:"SB",value:"677",label:"Solomon Islands (+677)"},{countryCode:"SO",value:"252",label:"Somalia (+252)"},{countryCode:"ZA",value:"27",label:"South Africa (+27)"},{countryCode:"ES",value:"34",label:"Spain (+34)"},{countryCode:"LK",value:"94",label:"Sri Lanka (+94)"},{countryCode:"SH",value:"290",label:"St. Helena (+290)"},{countryCode:"KN",value:"1869",label:"St. Kitts (+1869)"},{countryCode:"SC",value:"1758",label:"St. Lucia (+1758)"},{countryCode:"SD",value:"249",label:"Sudan (+249)"},{countryCode:"SR",value:"597",label:"Suriname (+597)"},{countryCode:"SZ",value:"268",label:"Swaziland (+268)"},{countryCode:"SE",value:"46",label:"Sweden (+46)"},{countryCode:"CH",value:"41",label:"Switzerland (+41)"},{countryCode:"SI",value:"963",label:"Syria (+963)"},{countryCode:"TW",value:"886",label:"Taiwan (+886)"},{countryCode:"TJ",value:"7",label:"Tajikstan (+7)"},{countryCode:"TH",value:"66",label:"Thailand (+66)"},{countryCode:"TG",value:"228",label:"Togo (+228)"},{countryCode:"TO",value:"676",label:"Tonga (+676)"},{countryCode:"TT",value:"1868",label:"Trinidad & Tobago (+1868)"},{countryCode:"TN",value:"216",label:"Tunisia (+216)"},{countryCode:"TR",value:"90",label:"Turkey (+90)"},{countryCode:"TM",value:"7",label:"Turkmenistan (+7)"},{countryCode:"TM",value:"993",label:"Turkmenistan (+993)"},{countryCode:"TC",value:"1649",label:"Turks & Caicos Islands (+1649)"},{countryCode:"TV",value:"688",label:"Tuvalu (+688)"},{countryCode:"UG",value:"256",label:"Uganda (+256)"},{countryCode:"UA",value:"380",label:"Ukraine (+380)"},{countryCode:"AE",value:"971",label:"United Arab Emirates (+971)"},{countryCode:"UY",value:"598",label:"Uruguay (+598)"},{countryCode:"UZ",value:"7",label:"Uzbekistan (+7)"},{countryCode:"VU",value:"678",label:"Vanuatu (+678)"},{countryCode:"VA",value:"379",label:"Vatican City (+379)"},{countryCode:"VE",value:"58",label:"Venezuela (+58)"},{countryCode:"VN",value:"84",label:"Vietnam (+84)"},{countryCode:"VG",value:"84",label:"Virgin Islands - British (+1284)"},{countryCode:"VI",value:"84",label:"Virgin Islands - US (+1340)"},{countryCode:"WF",value:"681",label:"Wallis and Futuna (+681)"},{countryCode:"YE",value:"969",label:"Yemen (North) (+969)"},{countryCode:"YE",value:"967",label:"Yemen (South) (+967)"},{countryCode:"ZM",value:"260",label:"Zambia (+260)"},{countryCode:"ZW",value:"263",label:"Zimbabwe (+263)"}],Hw='\n<div>\n    <label class="amplify-input-label" for="localPhoneNumberField">\n        {{ this.amplifyService.i18n().get(this._label) }}\n        <span *ngIf="_required">*</span>\n    </label>\n    <div class="amplify-input-group">\n        <div class="amplify-input-group-item">\n            <select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [(ngModel)]="_country_code"\n            (change)="setCountryCode($event.target.value)"\n            data-test="'+Kv+'"\n            >\n            <option *ngFor="let country of _countries"\n                value={{country.value}}>\n                {{country.label}}\n            </option>\n            </select>\n        </div>\n        <div class="amplify-input-group-item">\n            <input\n                #localPhoneNumberField\n                class="amplify-form-input"\n                placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n                name="local_phone_number"\n                type="tel"\n                (keyup)="setLocalPhoneNumber($event.target.value)"\n                data-test="'+Hv+'"\n            />\n        </div>\n    </div>\n</div>\n',Kw=(Object.defineProperty(Gw.prototype,"data",{set:function(e){this._placeholder=e.placeholder||this._placeholder,this._label=e.label||this._label,this._country_code=e.defaultCountryCode||this._country_code,this._required=void 0===e.required?this._required:e.required},enumerable:!0,configurable:!0}),Object.defineProperty(Gw.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(Gw.prototype,"label",{set:function(e){this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(Gw.prototype,"required",{set:function(e){this._required=e},enumerable:!0,configurable:!0}),Object.defineProperty(Gw.prototype,"defaultCountryCode",{set:function(e){this._country_code=e},enumerable:!0,configurable:!0}),Gw.prototype.ngOnInit=function(){},Gw.prototype.ngOnDestroy=function(){},Gw.prototype.setCountryCode=function(e){this._country_code=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},Gw.prototype.setLocalPhoneNumber=function(e){this._local_phone_number=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},Gw.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get("Enter your phone number")},Gw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-phone-field-core",template:Hw}]}],Gw.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},Gw.propDecorators={data:[{type:h.Input}],placeholder:[{type:h.Input}],label:[{type:h.Input}],required:[{type:h.Input}],defaultCountryCode:[{type:h.Input}],phoneFieldChanged:[{type:h.Output}]},Gw);function Gw(e){this.amplifyService=e,this._placeholder="",this._label="Phone Number",this._required=!0,this._country_code="1",this._local_phone_number="",this.phoneFieldChanged=new h.EventEmitter,this._countries=zw}var Ww=($w.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getList(this._path,this._options)},$w.prototype.onImageSelected=function(e){this.selected.emit(e)},Object.defineProperty($w.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty($w.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty($w.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),$w.prototype.getList=function(e,t){var n=this;e&&this.amplifyService.storage().list(e,t).then(function(e){n.list=e.map(function(e){return{path:e.key}})}).catch(function(e){return console.error(e)})},$w.decorators=[{type:h.Component,args:[{selector:"amplify-s3-album-core",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      [options]="_options"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],$w.ctorParameters=function(){return[{type:lv}]},$w.propDecorators={selected:[{type:h.Output}],data:[{type:h.Input}],path:[{type:h.Input}],options:[{type:h.Input}]},$w);function $w(e){this.amplifyService=e,this._options={},this.selected=new h.EventEmitter,this.logger=this.amplifyService.logger("S3AlbumComponent")}var Yw,Jw,Zw=((Yw=function(e,t){return(Yw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Yw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Qw,Jw=Ww),Qw.decorators=[{type:h.Component,args:[{selector:"amplify-s3-album-ionic",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],Qw.ctorParameters=function(){return[{type:lv}]},Qw);function Qw(e){var t=Jw.call(this,e)||this;return t.amplifyService=e,t}var Xw=(e_.prototype.ngOnInit=function(){this.loadComponent()},e_.prototype.ngOnDestroy=function(){},e_.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new _s(Zw,{path:this.path,options:this.options}):new _s(Ww,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();var o=r.createComponent(n);o.instance.data=e.data,o.instance.selected.subscribe(function(e){t.selected.emit(e)})},e_.decorators=[{type:h.Component,args:[{selector:"amplify-s3-album",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],e_.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},e_.propDecorators={framework:[{type:h.Input}],path:[{type:h.Input}],options:[{type:h.Input}],selected:[{type:h.Output}],componentHost:[{type:h.ViewChild,args:[bs]}]},e_);function e_(e){this.componentFactoryResolver=e,this.selected=new h.EventEmitter}var t_=(Object.defineProperty(n_.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(n_.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(n_.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),n_.prototype.ngOnInit=function(){if(this._path){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getImage(this._path,this._options)}},n_.prototype.onImageClicked=function(){this.selected.emit(this.url)},n_.prototype.getImage=function(e,t){var n=this;this.amplifyService.storage().get(e,t).then(function(e){return n.url=e}).catch(function(e){return console.error(e)})},n_.decorators=[{type:h.Component,args:[{selector:"amplify-s3-image-core",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],n_.ctorParameters=function(){return[{type:lv}]},n_.propDecorators={selected:[{type:h.Output}],data:[{type:h.Input}],path:[{type:h.Input}],options:[{type:h.Input}]},n_);function n_(e){this.amplifyService=e,this._options={},this.selected=new h.EventEmitter,this.logger=this.amplifyService.logger("S3ImageComponent")}var r_,o_,i_=((r_=function(e,t){return(r_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(s_,o_=t_),s_.decorators=[{type:h.Component,args:[{selector:"amplify-s3-image-ionic",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],s_.ctorParameters=function(){return[{type:lv}]},s_);function s_(e){var t=o_.call(this,e)||this;return t.amplifyService=e,t}var a_=(u_.prototype.ngOnInit=function(){this.loadComponent()},u_.prototype.ngOnDestroy=function(){},u_.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new _s(i_,{path:this.path,options:this.options}):new _s(t_,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();var o=r.createComponent(n);o.instance.data=e.data,o.instance.selected.subscribe(function(e){t.selected.emit(e)})},u_.decorators=[{type:h.Component,args:[{selector:"amplify-s3-image",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],u_.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},u_.propDecorators={framework:[{type:h.Input}],path:[{type:h.Input}],options:[{type:h.Input}],selected:[{type:h.Output}],componentHost:[{type:h.ViewChild,args:[bs]}]},u_);function u_(e){this.componentFactoryResolver=e,this.selected=new h.EventEmitter}var c_=(Object.defineProperty(l_.prototype,"url",{set:function(e){this.photoUrl=e,this.hasPhoto=!0},enumerable:!0,configurable:!0}),Object.defineProperty(l_.prototype,"storageOptions",{set:function(e){this._storageOptions=Object.assign(this._storageOptions,e)},enumerable:!0,configurable:!0}),Object.defineProperty(l_.prototype,"path",{set:function(e){this.s3ImagePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(l_.prototype,"data",{set:function(e){this.photoUrl=e.url,this.s3ImagePath=e.path,this._storageOptions=Object.assign(this._storageOptions,e.storageOptions),this.hasPhoto=!0},enumerable:!0,configurable:!0}),l_.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider")},l_.prototype.pick=function(e){var n,t,r=e.target.files[0];r&&(this._storageOptions.contentType||(this._storageOptions.contentType=r.type),r.name,r.size,r.type,this.picked.emit(r),this.s3ImagePath=this.s3ImagePath+"/"+r.name,this.s3ImageFile=r,n=this,(t=new FileReader).onload=function(e){var t=e.target.result;n.photoUrl=t,n.hasPhoto=!0,n.loaded.emit(t)},t.readAsDataURL(r))},l_.prototype.uploadFile=function(){var t=this;this.uploading=!0,this.amplifyService.storage().put(this.s3ImagePath,this.s3ImageFile,this._storageOptions).then(function(e){t.uploaded.emit(e),t.completeFileUpload()}).catch(function(e){t.completeFileUpload(e)})},l_.prototype.completeFileUpload=function(e){if(e)return this._setError(e);this.s3ImagePath="",this.photoUrl=null,this.s3ImageFile=null,this.uploading=!1},l_.prototype.onPhotoError=function(){this.hasPhoto=!1},l_.prototype.onAlertClose=function(){this._setError(null)},l_.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},l_.decorators=[{type:h.Component,args:[{selector:"amplify-photo-picker-core",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],l_.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},l_.propDecorators={url:[{type:h.Input}],storageOptions:[{type:h.Input}],path:[{type:h.Input}],data:[{type:h.Input}],picked:[{type:h.Output}],loaded:[{type:h.Output}],uploaded:[{type:h.Output}]},l_);function l_(e){this.amplifyService=e,this.hasPhoto=!1,this.uploading=!1,this.s3ImageFile=null,this.s3ImagePath="",this._storageOptions={},this.picked=new h.EventEmitter,this.loaded=new h.EventEmitter,this.uploaded=new h.EventEmitter,this.logger=this.amplifyService.logger("PhotoPickerComponent")}var p_,d_,h_=((p_=function(e,t){return(p_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}p_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(f_,d_=c_),f_.decorators=[{type:h.Component,args:[{selector:"amplify-photo-picker-ionic",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],f_.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},f_);function f_(e){var t=d_.call(this,e)||this;return t.amplifyService=e,t}var m_=(g_.prototype.ngOnInit=function(){this.loadComponent()},g_.prototype.ngOnDestroy=function(){},g_.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new _s(h_,{url:this.url,path:this.path,storageOptions:this.storageOptions}):new _s(c_,{url:this.url,path:this.path,storageOptions:this.storageOptions}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();var o=r.createComponent(n);o.instance.data=e.data,o.instance.picked.subscribe(function(e){t.picked.emit(e)}),o.instance.loaded.subscribe(function(e){t.loaded.emit(e)}),o.instance.uploaded.subscribe(function(e){t.uploaded.emit(e)})},g_.decorators=[{type:h.Component,args:[{selector:"amplify-photo-picker",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],g_.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},g_.propDecorators={framework:[{type:h.Input}],url:[{type:h.Input}],path:[{type:h.Input}],storageOptions:[{type:h.Input}],picked:[{type:h.Output}],loaded:[{type:h.Output}],uploaded:[{type:h.Output}],componentHost:[{type:h.ViewChild,args:[bs]}]},g_);function g_(e){this.componentFactoryResolver=e,this.picked=new h.EventEmitter,this.loaded=new h.EventEmitter,this.uploaded=new h.EventEmitter}function y_(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function v_(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}require("./aws-lex-audio.js");var b_={INITIAL:{MESSAGE:"Type your message or click  ðŸŽ¤",ICON:"ðŸŽ¤"},LISTENING:{MESSAGE:"Listening... click ðŸ”´ again to cancel",ICON:"ðŸ”´"},SENDING:{MESSAGE:"Please wait...",ICON:"ðŸ”Š"},SPEAKING:{MESSAGE:"Speaking...",ICON:"..."}},w_={silenceDetectionConfig:{time:2e3,amplitude:.2}},__=(Object.defineProperty(S_.prototype,"data",{set:function(e){this.botName=e.bot,this.chatTitle=e.title,this.clearComplete=e.clearComplete,this.conversationModeOn=!pp(e.conversationModeOn)&&e.conversationModeOn,this.voiceEnabled=!pp(e.voiceEnabled)&&e.voiceEnabled,this.textEnabled=!!pp(e.textEnabled)||e.textEnabled,this.voiceConfig=e.voiceConfig||this.voiceConfig,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(this.botName,this.performOnComplete),!this.textEnabled&&this.voiceEnabled&&(this.currentVoiceState="Click the mic button",b_.INITIAL.MESSAGE="Click the mic button"),!this.voiceEnabled&&this.textEnabled&&(this.currentVoiceState="Type a message",b_.INITIAL.MESSAGE="Type a message"),this.voiceEnabled&&(this.audioControl=new LexAudio.audioControl)},enumerable:!0,configurable:!0}),Object.defineProperty(S_.prototype,"bot",{set:function(e){this.botName=e,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(e,this.performOnComplete)},enumerable:!0,configurable:!0}),Object.defineProperty(S_.prototype,"title",{set:function(e){this.chatTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(S_.prototype,"clearOnComplete",{set:function(e){this.clearComplete=e},enumerable:!0,configurable:!0}),S_.prototype.ngOnInit=function(){if(!this.amplifyService.interactions())throw new Error("Interactions module not registered on AmplifyService provider")},S_.prototype.performOnComplete=function(e){this.complete.emit(e),this.clearComplete&&(this.messages=[])},S_.prototype.onInputChange=function(e){this.inputText=e},S_.prototype.onSubmit=function(e){var t,n=this;this.inputText&&(t={me:this.inputText,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.amplifyService.interactions().send(this.botName,this.inputText).then(function(e){n.inputText="",t.bot=e.message,t.botSentTime=(new Date).toLocaleTimeString(),n.messages.push(t)}).catch(function(e){return n.logger.error(e)}))},S_.prototype.reset=function(){this.audioControl.clear(),this.inputText="",this.currentVoiceState=b_.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=b_.INITIAL.ICON,this.continueConversation=!1,this.micButtonDisabled=!1,this.ref.detectChanges()},S_.prototype.onError=function(e){this.logger.error(e)},S_.prototype.lexResponseHandler=function(){return y_(this,void 0,void 0,function(){var t,n,r;return v_(this,function(e){switch(e.label){case 0:return this.continueConversation?(t={content:this.audioInput,options:{messageType:"voice"}},[4,this.amplifyService.interactions().send(this.botName,t)]):[2];case 1:return n=e.sent(),this.lexResponse=n,this.currentVoiceState=b_.SPEAKING.MESSAGE,this.micText=b_.SPEAKING.ICON,this.micButtonDisabled=!0,r={me:this.lexResponse.inputTranscript,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.inputText="",r.bot=this.lexResponse.message,r.botSentTime=(new Date).toLocaleTimeString(),this.messages.push(r),this.doneSpeakingHandler(),this.ref.detectChanges(),[2]}})})},S_.prototype.doneSpeakingHandler=function(){var e=this;this.continueConversation&&("audio/mpeg"===this.lexResponse.contentType?this.audioControl.play(this.lexResponse.audioStream,function(){"ReadyForFulfillment"!==e.lexResponse.dialogState&&"Fulfilled"!==e.lexResponse.dialogState&&"Failed"!==e.lexResponse.dialogState&&e.conversationModeOn?(e.currentVoiceState=b_.LISTENING.MESSAGE,e.micText=b_.LISTENING.ICON,e.micButtonDisabled=!1,e.audioControl.startRecording(e.onSilenceHandler,null,e.voiceConfig.silenceDetectionConfig)):(e.inputDisabled=!1,e.currentVoiceState=b_.INITIAL.MESSAGE,e.micText=b_.INITIAL.ICON,e.micButtonDisabled=!1,e.continueConversation=!1),e.ref.detectChanges()}):(this.inputDisabled=!1,this.currentVoiceState=b_.INITIAL.MESSAGE,this.micText=b_.INITIAL.ICON,this.micButtonDisabled=!1,this.continueConversation=!1,this.ref.detectChanges()))},S_.prototype.micButtonHandler=function(){return y_(this,void 0,void 0,function(){return v_(this,function(e){return this.continueConversation?this.reset():(this.inputDisabled=!0,this.continueConversation=!0,this.currentVoiceState=b_.LISTENING.MESSAGE,this.micText=b_.LISTENING.ICON,this.micButtonDisabled=!1,this.audioControl.startRecording(this.onSilenceHandler,null,this.voiceConfig.silenceDetectionConfig)),this.ref.detectChanges(),[2]})})},S_.decorators=[{type:h.Component,args:[{selector:"amplify-interactions-core",template:'\n<div class="amplify-interactions">\n\t<div class="amplify-interactions-container">\n\t\t<div class="amplify-form-container">\n\t\t\t<div class="amplify-form-row">\n\t\t\t\t<div class="amplify-interactions-conversation">\n\t\t\t\t\t<div *ngFor="let message of messages">\n\t\t\t\t\t\t<div class="amplify-interactions-input">{{message.me}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-input-timestamp">{{message.meSentTime}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response">{{message.bot}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response-timestamp">{{message.botSentTime}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="amplify-interactions-actions">\n\t\t\t\t<input #inputValue\n\t\t\t\t\tdata-test="chatbot-message-input"\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[value]="inputText"\n\t\t\t\t\t(keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t\t(change)="onInputChange($event.target.value)"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\t*ngIf="textEnabled">\n\t\t\t\t<input #inputValue\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t\t*ngIf="!textEnabled">\n\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t\t>\n\t\t\t\t\t{{micText}}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="textEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\tclass="amplify-interactions-button"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\tng-click="!inputDisabled || onSubmit(inputValue.value)"\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'}]}],S_.ctorParameters=function(){return[{type:h.ChangeDetectorRef},{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},S_.propDecorators={complete:[{type:h.Output}],data:[{type:h.Input}],bot:[{type:h.Input}],title:[{type:h.Input}],clearOnComplete:[{type:h.Input}]},S_);function S_(e,t){var n=this;this.amplifyService=t,this.inputText="",this.clearComplete=!1,this.messages=[],this.completions={},this.currentVoiceState=b_.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=b_.INITIAL.ICON,this.voiceConfig=w_,this.continueConversation=!1,this.micButtonDisabled=!1,this.conversationModeOn=!1,this.voiceEnabled=!1,this.textEnabled=!0,this.complete=new h.EventEmitter,this.onSilenceHandler=function(){n.continueConversation&&(n.audioControl.exportWAV(function(e){n.currentVoiceState=b_.SENDING.MESSAGE,n.audioInput=e,n.micText=b_.SENDING.ICON,n.micButtonDisabled=!0,n.lexResponseHandler()}),n.ref.detectChanges())},this.ref=e,this.continueConversation=!1,this.logger=this.amplifyService.logger("ChatbotComponent")}var C_,E_,I_=((C_=function(e,t){return(C_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}C_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(A_,E_=__),A_.decorators=[{type:h.Component,args:[{selector:"amplify-interactions-ionic",template:'\n<div class="amplify-interactions-container">\n\t<div class="amplify-form-container">\n\t\t<ion-grid>\n\t\t\t<ion-row *ngIf="chatTitle"> \n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t\t<ion-label>{{chatTitle}}</ion-label>\n\t\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t\t<ion-row *ngFor="let message of messages">\n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<ion-chip style="float:right">\n\t\t\t\t\t\t\t\t<ion-label>{{message.me}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t<ion-label>{{message.bot}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t</ion-grid>\n\t\t<div class="amplify-form-row">\n\t\t    <ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t        class="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t        placeholder="{{currentVoiceState}}"\n\t\t        [value]="inputText"\n\t\t        (keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t(ionChange)="onInputChange($event.target.value)"\n\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t*ngIf="textEnabled"></ion-input>\n\t\t\t<ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t\t\tclass="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t*ngIf="!textEnabled"></ion-input>\n\t\t\t<ion-button \n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t>\n\t\t\t\t{{micText}}\n\t\t\t</ion-button>\n\t\t\t<ion-button\n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="textEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="inputDisabled === false || onSubmit(inputValue.value)"\n\t\t\t>\n\t\t\t\tSend\n\t\t\t</ion-button>\n\t\t</div>\n\t</div>\n</div>\n'}]}],A_.ctorParameters=function(){return[{type:h.ChangeDetectorRef},{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},A_);function A_(e,t){var n=E_.call(this,e,t)||this;return n.amplifyService=t,n}var P_=(k_.prototype.ngOnInit=function(){this.loadComponent()},k_.prototype.ngOnDestroy=function(){},k_.prototype.loadComponent=function(){var t=this,e={bot:this.bot,title:this.title,clearComplete:this.clearComplete,conversationModeOn:this.conversationModeOn,voiceConfig:this.voiceConfig,voiceEnabled:this.voiceEnabled,textEnabled:this.textEnabled},n=this.framework&&"ionic"===this.framework.toLowerCase()?new _s(I_,e):new _s(__,e),r=this.componentFactoryResolver.resolveComponentFactory(n.component),o=this.componentHost.viewContainerRef;o.clear();var i=o.createComponent(r);i.instance.data=n.data,i.instance.complete.subscribe(function(e){t.complete.emit(e)})},k_.decorators=[{type:h.Component,args:[{selector:"amplify-interactions",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],k_.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},k_.propDecorators={framework:[{type:h.Input}],bot:[{type:h.Input}],title:[{type:h.Input}],clearComplete:[{type:h.Input}],conversationModeOn:[{type:h.Input}],voiceConfig:[{type:h.Input}],voiceEnabled:[{type:h.Input}],textEnabled:[{type:h.Input}],complete:[{type:h.Output}],componentHost:[{type:h.ViewChild,args:[bs]}]},k_);function k_(e){this.componentFactoryResolver=e,this.complete=new h.EventEmitter}var O_=(Object.defineProperty(T_.prototype,"title",{set:function(e){this.title=e},enumerable:!0,configurable:!0}),T_.decorators=[{type:h.Component,args:[{selector:"amplify-form",template:'\n<div class="amplify-form">\n  <div class="form-header">\n    <div class="form-title">{{ title }}</div>\n  </div>\n  <div class="form-body">\n    <ng-content select="[form-body]"></ng-content>\n  </div>\n  <div class="form-footer">\n    <ng-content select="[form-footer]"></ng-content>\n  </div>\n</div>\n'}]}],T_.propDecorators={title:[{type:h.Input}]},T_);function T_(){}function x_(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function N_(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var U_=(Object.defineProperty(R_.prototype,"data",{set:function(e){this.sceneName=e.sceneName},enumerable:!0,configurable:!0}),R_.prototype.ngOnInit=function(){if(document.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this)),!this.amplifyService.xr())throw new Error("XR module not registered on AmplifyService provider");this.loadAndStartScene()},R_.prototype.ngOnDestroy=function(){document.removeEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this))},R_.prototype.loadAndStartScene=function(){return x_(this,void 0,void 0,function(){var t,n,r=this;return N_(this,function(e){switch(e.label){case 0:this.loading=!0,t={progressCallback:this.progressCallback},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.amplifyService.xr().loadScene(this.sceneName,"sumerian-scene-dom-id",t)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),this.sceneError="Failed to load scene",this.logger.error(this.sceneError,n),[2];case 4:return this.amplifyService.xr().start(this.sceneName),this.loading=!1,this.muted=this.amplifyService.xr().isMuted(this.sceneName),this.isVRCapable=this.amplifyService.xr().isVRCapable(this.sceneName),this.isVRPresentationActive=this.amplifyService.xr().isVRPresentationActive(this.sceneName),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioEnabled",function(){return r.showEnableAudio=!1}),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioDisabled",function(){return r.showEnableAudio=!0}),[2]}})})},R_.prototype.setMuted=function(e){this.muted=e,this.amplifyService.xr().setMuted(this.sceneName,e),this.showEnableAudio&&(this.amplifyService.xr().enableAudio(this.sceneName),this.showEnableAudio=!1)},R_.prototype.toggleVRPresentation=function(){try{this.isVRPresentationActive?this.amplifyService.xr().exitVR(this.sceneName):this.amplifyService.xr().enterVR(this.sceneName)}catch(e){return void this.logger.error("Unable to start/stop WebVR System: "+e.message)}this.isVRPresentationActive=!this.isVRPresentationActive},R_.prototype.onFullscreenChange=function(){var e=document;this.isFullscreen=null!==e.fullscreenElement},R_.prototype.maximize=function(){return x_(this,void 0,void 0,function(){var t;return N_(this,function(e){return((t=document.getElementById("sumerian-scene-container")).requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen).call(t),[2]})})},R_.prototype.minimize=function(){return x_(this,void 0,void 0,function(){var t;return N_(this,function(e){return(t=document).exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen(),[2]})})},R_.decorators=[{type:h.Component,args:[{selector:"sumerian-scene-core",template:'\n<div id="sumerian-scene-container" class={{amplifyUI.sumerianSceneContainer}} data-test="sumerian-scene-container">\n  <div id="sumerian-scene-dom-id" class={{amplifyUI.sumerianScene}} data-test="sumerian-scene">\n    <sumerian-scene-loading-core *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} sceneError={{sceneError}} data-test="sumerian-scene-loading"></sumerian-scene-loading-core>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="sumerian-scene-bar">\n    <span class={{amplifyUI.sceneActions}} data-test="sumerian-scene-actions">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n'}]}],R_.ctorParameters=function(){return[{type:lv}]},R_.propDecorators={sceneName:[{type:h.Input}],data:[{type:h.Input}]},R_);function R_(e){var n=this;this.amplifyService=e,this.loading=!1,this.loadPercentage=0,this.muted=!1,this.showEnableAudio=!1,this.isVRCapable=!1,this.isVRPresentationActive=!1,this.isFullscreen=!1,this.sceneError=null,this.progressCallback=function(e){var t=100*e;n.loadPercentage=t},this.amplifyUI=Z,this.logger=this.amplifyService.logger("SumerianSceneComponentCore")}var M_,D_,F_=((M_=function(e,t){return(M_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}M_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(L_,D_=U_),L_.decorators=[{type:h.Component,args:[{selector:"sumerian-scene-ionic",template:'\n<div id="sumerian-scene-container" [ngClass]="amplifyUI.sumerianSceneContainer" data-test="sumerian-scene-container">\n  <div id="sumerian-scene-dom-id" [class]="amplifyUI.sumerianScene" data-test="sumerian-scene">\n    <sumerian-scene-loading-ionic *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} data-test="sumerian-scene-loading"></sumerian-scene-loading-ionic>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="sumerian-scene-bar">\n    <span class={{amplifyUI.sceneActions}} data-test="sumerian-scene-actions">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n'}]}],L_.ctorParameters=function(){return[{type:lv}]},L_);function L_(e){var t=D_.call(this,e)||this;return t.amplifyService=e,t}var j_=(B_.prototype.ngOnInit=function(){this.loadComponent()},B_.prototype.ngOnDestroy=function(){},B_.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new _s(F_,{sceneName:this.sceneName}):new _s(U_,{sceneName:this.sceneName}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},B_.decorators=[{type:h.Component,args:[{selector:"amplify-sumerian-scene",template:"\n\t\t<ng-template component-host></ng-template>\n\t"}]}],B_.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},B_.propDecorators={framework:[{type:h.Input}],sceneName:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[bs]}]},B_);function B_(e){this.componentFactoryResolver=e}var V_=(q_.decorators=[{type:h.Component,args:[{selector:"sumerian-scene-loading-core",template:'\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="sumerian-scene-loading-logo">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="sumerian-scene-loading-scene-name">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="sumerian-scene-error-text">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="sumerian-scene-loading-bar">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]="{ \'width\': loadPercentage + \'%\' }"></div>\n    </div>\n  </div>\n</div>\n'}]}],q_.ctorParameters=function(){return[]},q_.propDecorators={loadPercentage:[{type:h.Input}],sceneName:[{type:h.Input}],sceneError:[{type:h.Input}]},q_);function q_(){this.AmplifyUI=Z}function z_(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}var H_=[vv,dv,Cb,gb,Lb,Ob,$b,Vb,aw,ew,yw,lw,Pw,ww,Fw,Tw,Vw,Kw,Xw,Ww,a_,t_,m_,c_,P_,__,O_,j_,U_,V_],K_=(G_.decorators=[{type:h.NgModule,args:[{imports:[t.CommonModule,gs],declarations:z_([bs],H_),entryComponents:z_(H_),providers:[],exports:z_(H_)}]}],G_);function G_(){}var W_,$_,Y_='\n<ion-grid class="amplify-ionic-grid-padding-left">\n    <ion-row>\n        <ion-col size="6" class="amplify-ionic-grid-padding-left">\n            <ion-label class="amplify-input-label push-right"\n                position="stacked" \n                for="localPhoneNumberField">\n                {{ this.amplifyService.i18n().get(this._label) }}\n                <span *ngIf="_required">*</span>\n            </ion-label>\n            <ion-select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [value]="_country_code"\n            (ionChange)="setCountryCode($event.target.value)"\n            data-test="'+Kv+'">\n            <ion-select-option *ngFor="let country of _countries"\n            value={{country.value}}>\n                {{country.label}}\n            </ion-select-option>\n            </ion-select>\n        </ion-col>\n        <ion-col size="6">\n            <ion-label class="amplify-input-label push-right">&nbsp;</ion-label>\n            <ion-input\n            #localPhoneNumberField\n            class="amplify-form-input-phone-ionic"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            name="local_phone_number"\n            type="tel"\n            (ionChange)="setLocalPhoneNumber($event.target.value)"\n            data-test="'+Hv+'"\n            ></ion-input>\n        </ion-col>\n    </ion-row>\n</ion-grid>',J_=((W_=function(e,t){return(W_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}W_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Z_,$_=Kw),Z_.decorators=[{type:h.Component,args:[{selector:"amplify-auth-phone-field-ionic",template:Y_}]}],Z_.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},Z_);function Z_(e){var t=$_.call(this,e)||this;return t.amplifyService=e,t}var Q_,X_,eS='\n\n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'email\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="emailField" position="stacked">{{ this.amplifyService.i18n().get(\'Email *\') }}</ion-label>\n        <ion-input type="text"\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setEmail($event.target.value)"\n            data-test="'+zv+'"\n        ></ion-input>\n    </ion-item> \n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'phone_number\'">\n       <amplify-auth-phone-field-ionic\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-ionic>\n    </ion-item>\n    <ion-item lines="none" *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="usernameField" position="stacked">{{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</ion-label>\n        <ion-input type="text"\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setUsername($event.target.value)"\n            data-test="'+qv+'"\n        ></ion-input>\n    </ion-item>\n\n',tS=((Q_=function(e,t){return(Q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Q_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(nS,X_=Vw),nS.decorators=[{type:h.Component,args:[{selector:"amplify-auth-username-field-ionic",template:eS}]}],nS.ctorParameters=function(){return[{type:lv,decorators:[{type:h.Inject,args:[lv]}]}]},nS);function nS(e){var t=X_.call(this,e)||this;return t.amplifyService=e,t}var rS,oS,iS=((rS=function(e,t){return(rS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}rS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(sS,oS=V_),sS.decorators=[{type:h.Component,args:[{selector:"sumerian-scene-loading-ionic",template:'\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="sumerian-scene-loading-logo">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="sumerian-scene-loading-scene-name">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="sumerian-scene-error-text">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="sumerian-scene-loading-bar">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]="{ \'width\': loadPercentage + \'%\' }"></div>\n    </div>\n  </div>\n</div>\n'}]}],sS.ctorParameters=function(){return[]},sS);function sS(){return oS.call(this)||this}function aS(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}var uS=[gv,_b,Rb,Mw,Iw,Gb,iw,tS,J_,mw,h_,Zw,i_,I_,F_,iS],cS=(lS.decorators=[{type:h.NgModule,args:[{imports:[t.CommonModule,gs],declarations:aS(uS),entryComponents:aS(uS),providers:[lv],schemas:[h.CUSTOM_ELEMENTS_SCHEMA],exports:aS(uS)}]}],lS);function lS(){}e.AmplifyAngularModule=K_,e.AmplifyIonicModule=cS,e.AmplifyModules=function(e){return new lv(e)},e.AmplifyService=lv,Object.defineProperty(e,"__esModule",{value:!0})});