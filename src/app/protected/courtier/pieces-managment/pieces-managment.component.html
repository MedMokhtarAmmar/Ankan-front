<main role="main">

  <div class="container-fluid mainContent">

    <div class="row mb-4">
      <div class="col-md-12 d-flex justify-content-end">
        <a href="javascript:void(0)" [routerLink]="'/courtier/createPiece'" class="btn btn-default">Ajouter une
          pièce</a>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12 col-md-12">
        <div class="portlet">
          <div class="headerPortlet">
            <h3>Pièces</h3>
          </div>
          <div class="bodyPortlet">
            <div *ngIf="pieces.length < 1" class="row">
              <div class="col-md-12">
                <div class="alert alert-warning w-100 mt-2" role="alert">
                  Aucune pièce à afficher.
                </div>
              </div>



              <div class="col-md-12 mt-12">
                <div style="position: center">
                  <a href="javaScript:void (0)" class="edit-piece"> <i class="ri-rewind-fill"
                                                                       (click)="previousPage()"> </i></a>
                  &nbsp;
                  <label class="nbrResultatRecherche"> Résultats {{perPage}} à {{page}} sur {{page}}  </label>
                  &nbsp;
                  <a href="javaScript:void (0)" class="edit-piece">
                    <i class="ri-speed-fill" (click)="nextPage()"> </i></a>
                </div>


              </div>



            </div>


            <div *ngIf="pieces.length >= 1" class="row">
              <div class="col-md-12">
                <form class="form-recherche mt-2 mb-2">
                  <label>Recherche: </label>
                  <input type="text" class="form-control ml-2" id="inlineFormInputName2" placeholder="">

                </form>
              </div>
              <div class="col-md-12">

                <div class="contentPieces">

                  <ul class="list-table">
                    <li class="list-table-header">
                      <div class="colm colm-1">Libelle</div>
                      <div class="colm colm-2">Descriptif</div>
                      <div class="colm colm-3">Projet</div>
                      <div class="colm colm-4">Categorie</div>
                      <div class="colm colm-5">Status</div>
                      <div class="colm colm-6"></div>
                    </li>
                    <li class="list-table-row" *ngFor="let piece of pieces">
                      <div class="colm colm-1" data-label="Libelle"
                           [routerLink]="['/courtier/piece-info/', piece.id ]">{{piece.pieceName}}</div>
                      <div class="colm colm-2" data-label="Descriptif"
                           [routerLink]="['/courtier/piece-info/', piece.id ]">
                        <p *ngIf="piece.description.length<150 ;else bloc2">{{piece.description}}</p>
                        <ng-template #bloc2>
                          <p>{{piece.description.substr(0, 150) + '...'}}</p>
                        </ng-template>
                      </div>
                      <div class="colm colm-3" data-label="Projet">
                        <app-projet-tableau [projectID]="piece.projetID"></app-projet-tableau>
                      </div>
                      <div class="colm colm-4" data-label="Categorie">
                        <app-categorie-tableau [categorieID]="piece.categorieID"></app-categorie-tableau>
                      </div>

                      <div class="colm colm-5" data-label="Etat du projet">
                        <span *ngIf="piece.pieceStatus === 'NEW'" class="statusPiece new-piece">Nouveau</span>
                        <span *ngIf="piece.pieceStatus === 'VERIFIED'"
                              class="statusPiece verified-piece">Vérifiée</span>
                        <span *ngIf="piece.pieceStatus === 'WAITING'"
                              class="statusPiece waiting-piece">En attente</span>
                      </div>
                      <div class="colm colm-6">


                        <div class="actionPieces">
                          <!--                          <a href="javascript:main(0)" class="duplicate-piece">-->
                          <!--                            <i class="ri-file-copy-2-line"></i>-->
                          <!--                          </a>-->
                          <a href="javascript:void (0)" class="duplicate-piece"
                             [routerLink]="['/courtier/piece-info/', piece.id ]" value='Press me'
                             title='show piece details'>
                            <i class="ri-file-copy-2-line"></i>
                          </a>
                          <a href="javascript:void(0)" (click)="editPiece(piece)" class="edit-piece" value='Press me'
                             title='edit piece '>
                            <i class="ri-file-edit-line"></i>
                          </a>
                          <a href="javascript:void(0)" (click)="deletePiece(piece.id)" class="delete-piece"
                             value='Press me' title='delete piece '>
                            <i class="ri-delete-bin-6-line"></i>
                          </a>

                        </div>

                      </div>
                    </li>


                  </ul>

                </div>

              </div>
              <div class="col-md-12 mt-12">
                <div style="position: center">
                  <a href="javaScript:void (0)" class="edit-piece"> <i class="ri-rewind-fill"
                                                                      (click)="previousPage()"> </i></a>
                  &nbsp;
                  <label class="nbrResultatRecherche"> Résultats {{perPage}} à {{page}} sur {{page}}  </label>
                  &nbsp;
                  <a href="javaScript:void (0)" class="edit-piece">
                    <i class="ri-speed-fill" (click)="nextPage()"> </i></a>
                </div>


              </div>
            </div>

          </div>
        </div>
      </div>

    </div>

  </div>
</main>
